(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{3147:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return h}});var i=s(9268);s(6341);var r=s(6006),a=s(1638),n=s.n(a),o=(()=>{var t,e,s,i,r,a,n,o,l,h,c,d,u,m,g,f,p,x,b,w,v,y,k,C,S,A,I,M,T,E,F,Y,R=Object.defineProperty,X=t=>R(t,"__esModule",{value:!0}),L={};((t,e)=>{for(var s in X(t),e)R(t,s,{get:e[s],enumerable:!0})})(L,{AlphaTimeline:()=>ty,Animation:()=>ti,AnimationState:()=>tV,AnimationStateAdapter:()=>tU,AnimationStateData:()=>tZ,AssetManager:()=>se,AssetManagerBase:()=>er,AtlasAttachmentLoader:()=>et,Attachment:()=>J,AttachmentTimeline:()=>tS,BinaryInput:()=>eC,BlendMode:()=>A,Bone:()=>es,BoneData:()=>ee,BoundingBoxAttachment:()=>tK,CURRENT:()=>tH,CameraController:()=>sS,ClippingAttachment:()=>tJ,Color:()=>V,Color2Attribute:()=>sX,ColorAttribute:()=>sR,ConstraintData:()=>ei,CurveTimeline:()=>tn,CurveTimeline1:()=>to,CurveTimeline2:()=>tl,DebugUtils:()=>j,DeformTimeline:()=>tA,Downloader:()=>ea,DrawOrderTimeline:()=>tE,Event:()=>en,EventData:()=>eo,EventQueue:()=>tN,EventTimeline:()=>tM,EventType:()=>b,FIRST:()=>tz,FakeTexture:()=>t0,GLTexture:()=>st,HOLD_FIRST:()=>t_,HOLD_MIX:()=>tj,HOLD_SUBSEQUENT:()=>tq,IkConstraint:()=>el,IkConstraintData:()=>eh,IkConstraintTimeline:()=>tF,Input:()=>sk,IntSet:()=>B,Interpolation:()=>U,LoadingScreen:()=>sG,M00:()=>si,M01:()=>sr,M02:()=>sa,M03:()=>sn,M10:()=>so,M11:()=>sl,M12:()=>sh,M13:()=>sc,M20:()=>sd,M21:()=>su,M22:()=>sm,M23:()=>sg,M30:()=>sf,M31:()=>sp,M32:()=>sx,M33:()=>sb,ManagedWebGLRenderingContext:()=>e8,MathUtils:()=>N,Matrix4:()=>sv,Mesh:()=>sM,MeshAttachment:()=>t4,MixBlend:()=>p,MixDirection:()=>x,OrthoCamera:()=>sy,PathAttachment:()=>t6,PathConstraint:()=>eu,PathConstraintData:()=>ec,PathConstraintMixTimeline:()=>tL,PathConstraintPositionTimeline:()=>tR,PathConstraintSpacingTimeline:()=>tX,PointAttachment:()=>t8,PolygonBatcher:()=>sB,Pool:()=>G,Position2Attribute:()=>sE,Position3Attribute:()=>sF,PositionMode:()=>k,Pow:()=>W,PowOut:()=>z,RGB2Timeline:()=>tC,RGBA2Timeline:()=>tk,RGBATimeline:()=>tw,RGBTimeline:()=>tv,RegionAttachment:()=>t9,ResizeMode:()=>E,RotateMode:()=>S,RotateTimeline:()=>th,SETUP:()=>tG,SUBSEQUENT:()=>tW,ScaleTimeline:()=>tm,ScaleXTimeline:()=>tg,ScaleYTimeline:()=>tf,SceneRenderer:()=>s_,SequenceTimeline:()=>tP,Shader:()=>sI,ShapeRenderer:()=>sP,ShapeType:()=>T,ShearTimeline:()=>tp,ShearXTimeline:()=>tx,ShearYTimeline:()=>tb,Skeleton:()=>ep,SkeletonBinary:()=>ek,SkeletonBounds:()=>eQ,SkeletonClipping:()=>e0,SkeletonData:()=>ex,SkeletonDebugRenderer:()=>sV,SkeletonJson:()=>e1,SkeletonRenderer:()=>sU,Skin:()=>ew,SkinEntry:()=>eb,Slot:()=>em,SlotData:()=>ev,SpacingMode:()=>C,SpineCanvas:()=>sK,StringSet:()=>P,TexCoordAttribute:()=>sY,Texture:()=>tQ,TextureAtlas:()=>t1,TextureAtlasPage:()=>t3,TextureAtlasRegion:()=>t5,TextureFilter:()=>w,TextureRegion:()=>t$,TextureWrap:()=>v,TimeKeeper:()=>Z,Timeline:()=>ta,Touch:()=>sC,TrackEntry:()=>tO,TransformConstraint:()=>eg,TransformConstraintData:()=>ey,TransformConstraintTimeline:()=>tY,TransformMode:()=>y,TranslateTimeline:()=>tc,TranslateXTimeline:()=>td,TranslateYTimeline:()=>tu,Triangulator:()=>e$,Utils:()=>_,Vector2:()=>H,Vector3:()=>ss,VertexAttachment:()=>$,VertexAttribute:()=>sT,VertexAttributeType:()=>M,WebGLBlendModeConverter:()=>e7,WindowedMean:()=>K});var B=class{add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return void 0!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}constructor(){this.array=[]}},P=class{add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var s=0,i=t.length;s<i;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}constructor(){this.entries={},this.size=0}},D=class{set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return new D().setFromString(t)}constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}},V=D;V.WHITE=new D(1,1,1,1),V.RED=new D(1,0,0,1),V.GREEN=new D(0,1,0,1),V.BLUE=new D(0,0,1,1),V.MAGENTA=new D(1,0,1,1);var O=class{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*O.degRad)}static sinDeg(t){return Math.sin(t*O.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return O.randomTriangularWith(t,e,(t+e)*.5)}static randomTriangularWith(t,e,s){let i=Math.random(),r=e-t;return i<=(s-t)/r?t+Math.sqrt(i*r*(s-t)):e-Math.sqrt((1-i)*r*(e-s))}static isPowerOfTwo(t){return t&&(t&t-1)==0}},N=O;N.PI=3.1415927,N.PI2=2*O.PI,N.radiansToDegrees=180/O.PI,N.radDeg=O.radiansToDegrees,N.degreesToRadians=O.PI/180,N.degRad=O.degreesToRadians;var U=class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}},W=class extends U{applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}constructor(t){super(),this.power=2,this.power=t}},z=class extends W{applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}constructor(t){super(t)}},q=class{static arrayCopy(t,e,s,i,r){for(let a=e,n=i;a<e+r;a++,n++)s[n]=t[a]}static arrayFill(t,e,s,i){for(let r=e;r<s;r++)t[r]=i}static setArraySize(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let r=i;r<e;r++)t[r]=s;return t}static ensureArrayCapacity(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.length>=e?t:q.setArraySize(t,e,s)}static newArray(t,e){let s=Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(q.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(q.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return q.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return q.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},_=q;_.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var j=class{static logBones(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}}},G=class{obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}constructor(t){this.items=[],this.instantiator=t}},H=class{set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}constructor(t=0,e=0){this.x=t,this.y=e}},Z=class{update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}},K=class{hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=Array(t)}},J=class{constructor(t){if(!t)throw Error("name cannot be null.");this.name=t}},Q=class extends J{computeWorldVertices(t,e,s,i,r,a){s=r+(s>>1)*a;let n=t.bone.skeleton,o=t.deform,l=this.vertices,h=this.bones;if(!h){o.length>0&&(l=o);let n=t.bone,h=n.worldX,c=n.worldY,d=n.a,u=n.b,m=n.c,g=n.d;for(let t=e,n=r;n<s;t+=2,n+=a){let e=l[t],s=l[t+1];i[n]=e*d+s*u+h,i[n+1]=e*m+s*g+c}return}let c=0,d=0;for(let t=0;t<e;t+=2){let t=h[c];c+=t+1,d+=t}let u=n.bones;if(0==o.length)for(let t=r,e=3*d;t<s;t+=a){let s=0,r=0,a=h[c++];for(a+=c;c<a;c++,e+=3){let t=u[h[c]],i=l[e],a=l[e+1],n=l[e+2];s+=(i*t.a+a*t.b+t.worldX)*n,r+=(i*t.c+a*t.d+t.worldY)*n}i[t]=s,i[t+1]=r}else for(let t=r,e=3*d,n=d<<1;t<s;t+=a){let s=0,r=0,a=h[c++];for(a+=c;c<a;c++,e+=3,n+=2){let t=u[h[c]],i=l[e]+o[n],a=l[e+1]+o[n+1],d=l[e+2];s+=(i*t.a+a*t.b+t.worldX)*d,r+=(i*t.c+a*t.d+t.worldY)*d}i[t]=s,i[t+1]=r}}copyTo(t){this.bones?(t.bones=Array(this.bones.length),_.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=_.newFloatArray(this.vertices.length),_.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}constructor(t){super(t),this.id=Q.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}},$=Q;$.nextID=0;var tt=class{copy(){let t=new tt(this.regions.length);return _.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;-1==s&&(s=this.setupIndex),s>=this.regions.length&&(s=this.regions.length-1);let i=this.regions[s];e.region!=i&&(e.region=i,e.updateRegion())}getPath(t,e){let s=t,i=(this.start+e).toString();for(let t=this.digits-i.length;t>0;t--)s+="0";return s+i}static nextID(){return tt._nextID++}constructor(t){this.id=tt.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=Array(t)}},te=tt;te._nextID=0,(t=f||(f={}))[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse";var ts=[0,1,2,3,4,5,6],ti=class{setTimelines(t){if(!t)throw Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,r,a,n,o){if(!t)throw Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));let l=this.timelines;for(let i=0,h=l.length;i<h;i++)l[i].apply(t,e,s,r,a,n,o)}constructor(t,e,s){if(this.timelines=[],this.timelineIds=new P,!t)throw Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}};(e=p||(p={}))[e.setup=0]="setup",e[e.first=1]="first",e[e.replace=2]="replace",e[e.add=3]="add",(s=x||(x={}))[s.mixIn=0]="mixIn",s[s.mixOut=1]="mixOut";var tr={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},ta=class{getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){let i=t.length;for(let r=s;r<i;r+=s)if(t[r]>e)return r-s;return i-s}constructor(t,e){this.propertyIds=e,this.frames=_.newFloatArray(t*this.getFrameEntries())}},tn=class extends ta{setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=_.newFloatArray(e);_.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,s,i,r,a,n,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let m=(i-2*a+o)*.03,g=(r-2*n+l)*.03,f=((a-o)*3-i+h)*.006,p=((n-l)*3-r+c)*.006,x=2*m+f,b=2*g+p,w=(a-i)*.3+m+.16666667*f,v=(n-r)*.3+g+.16666667*p,y=i+w,k=r+v;for(let t=u+18;u<t;u+=2)d[u]=y,d[u+1]=k,w+=x,v+=b,x+=f,b+=p,y+=w,k+=v}getBezierValue(t,e,s,i){let r=this.curves;if(r[i]>t){let a=this.frames[e],n=this.frames[e+s];return n+(t-a)/(r[i]-a)*(r[i+1]-n)}let a=i+18;for(i+=2;i<a;i+=2)if(r[i]>=t){let e=r[i-2],s=r[i-1];return s+(t-e)/(r[i]-e)*(r[i+1]-s)}e+=this.getFrameEntries();let n=r[a-2],o=r[a-1];return o+(t-n)/(this.frames[e]-n)*(this.frames[e+s]-o)}constructor(t,e,s){super(t,s),this.curves=_.newFloatArray(t+18*e),this.curves[t-1]=1}},to=class extends tn{getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}let i=this.curves[s>>1];switch(i){case 0:let r=e[s],a=e[s+1];return a+(t-r)/(e[s+2]-r)*(e[s+2+1]-a);case 1:return e[s+1]}return this.getBezierValue(t,s,1,i-2)}constructor(t,e,s){super(t,e,[s])}},tl=class extends tn{getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}constructor(t,e,s,i){super(t,e,[s,i])}},th=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.rotation=o.data.rotation;break;case 1:o.rotation+=(o.data.rotation-o.rotation)*r}return}let l=this.getCurveValue(s);switch(a){case 0:o.rotation=o.data.rotation+l*r;break;case 1:case 2:l+=o.data.rotation-o.rotation;case 3:o.rotation+=l*r}}constructor(t,e,s){super(t,e,tr.rotate+"|"+s),this.boneIndex=0,this.boneIndex=s}},tc=class extends tl{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(s<l[0]){switch(a){case 0:o.x=o.data.x,o.y=o.data.y;break;case 1:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let h=0,c=0,d=ta.search(l,s,3),u=this.curves[d/3];switch(u){case 0:let m=l[d];h=l[d+1],c=l[d+2];let g=(s-m)/(l[d+3]-m);h+=(l[d+3+1]-h)*g,c+=(l[d+3+2]-c)*g;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(a){case 0:o.x=o.data.x+h*r,o.y=o.data.y+c*r;break;case 1:case 2:o.x+=(o.data.x+h-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case 3:o.x+=h*r,o.y+=c*r}}constructor(t,e,s){super(t,e,tr.x+"|"+s,tr.y+"|"+s),this.boneIndex=0,this.boneIndex=s}},td=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.x=o.data.x;break;case 1:o.x+=(o.data.x-o.x)*r}return}let l=this.getCurveValue(s);switch(a){case 0:o.x=o.data.x+l*r;break;case 1:case 2:o.x+=(o.data.x+l-o.x)*r;break;case 3:o.x+=l*r}}constructor(t,e,s){super(t,e,tr.x+"|"+s),this.boneIndex=0,this.boneIndex=s}},tu=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.y=o.data.y;break;case 1:o.y+=(o.data.y-o.y)*r}return}let l=this.getCurveValue(s);switch(a){case 0:o.y=o.data.y+l*r;break;case 1:case 2:o.y+=(o.data.y+l-o.y)*r;break;case 3:o.y+=l*r}}constructor(t,e,s){super(t,e,tr.y+"|"+s),this.boneIndex=0,this.boneIndex=s}},tm=class extends tl{apply(t,e,s,i,r,a,n){let o,l,h=t.bones[this.boneIndex];if(!h.active)return;let c=this.frames;if(s<c[0]){switch(a){case 0:h.scaleX=h.data.scaleX,h.scaleY=h.data.scaleY;break;case 1:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let d=ta.search(c,s,3),u=this.curves[d/3];switch(u){case 0:let m=c[d];o=c[d+1],l=c[d+2];let g=(s-m)/(c[d+3]-m);o+=(c[d+3+1]-o)*g,l+=(c[d+3+2]-l)*g;break;case 1:o=c[d+1],l=c[d+2];break;default:o=this.getBezierValue(s,d,1,u-2),l=this.getBezierValue(s,d,2,u+18-2)}if(o*=h.data.scaleX,l*=h.data.scaleY,1==r)3==a?(h.scaleX+=o-h.data.scaleX,h.scaleY+=l-h.data.scaleY):(h.scaleX=o,h.scaleY=l);else{let t=0,e=0;if(1==n)switch(a){case 0:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(o)*N.signum(t)-t)*r,h.scaleY=e+(Math.abs(l)*N.signum(e)-e)*r;break;case 1:case 2:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(o)*N.signum(t)-t)*r,h.scaleY=e+(Math.abs(l)*N.signum(e)-e)*r;break;case 3:h.scaleX+=(o-h.data.scaleX)*r,h.scaleY+=(l-h.data.scaleY)*r}else switch(a){case 0:t=Math.abs(h.data.scaleX)*N.signum(o),e=Math.abs(h.data.scaleY)*N.signum(l),h.scaleX=t+(o-t)*r,h.scaleY=e+(l-e)*r;break;case 1:case 2:t=Math.abs(h.scaleX)*N.signum(o),e=Math.abs(h.scaleY)*N.signum(l),h.scaleX=t+(o-t)*r,h.scaleY=e+(l-e)*r;break;case 3:h.scaleX+=(o-h.data.scaleX)*r,h.scaleY+=(l-h.data.scaleY)*r}}}constructor(t,e,s){super(t,e,tr.scaleX+"|"+s,tr.scaleY+"|"+s),this.boneIndex=0,this.boneIndex=s}},tg=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.scaleX=o.data.scaleX;break;case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*r}return}let l=this.getCurveValue(s)*o.data.scaleX;if(1==r)3==a?o.scaleX+=l-o.data.scaleX:o.scaleX=l;else{let t=0;if(1==n)switch(a){case 0:t=o.data.scaleX,o.scaleX=t+(Math.abs(l)*N.signum(t)-t)*r;break;case 1:case 2:t=o.scaleX,o.scaleX=t+(Math.abs(l)*N.signum(t)-t)*r;break;case 3:o.scaleX+=(l-o.data.scaleX)*r}else switch(a){case 0:t=Math.abs(o.data.scaleX)*N.signum(l),o.scaleX=t+(l-t)*r;break;case 1:case 2:t=Math.abs(o.scaleX)*N.signum(l),o.scaleX=t+(l-t)*r;break;case 3:o.scaleX+=(l-o.data.scaleX)*r}}}constructor(t,e,s){super(t,e,tr.scaleX+"|"+s),this.boneIndex=0,this.boneIndex=s}},tf=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.scaleY=o.data.scaleY;break;case 1:o.scaleY+=(o.data.scaleY-o.scaleY)*r}return}let l=this.getCurveValue(s)*o.data.scaleY;if(1==r)3==a?o.scaleY+=l-o.data.scaleY:o.scaleY=l;else{let t=0;if(1==n)switch(a){case 0:t=o.data.scaleY,o.scaleY=t+(Math.abs(l)*N.signum(t)-t)*r;break;case 1:case 2:t=o.scaleY,o.scaleY=t+(Math.abs(l)*N.signum(t)-t)*r;break;case 3:o.scaleY+=(l-o.data.scaleY)*r}else switch(a){case 0:t=Math.abs(o.data.scaleY)*N.signum(l),o.scaleY=t+(l-t)*r;break;case 1:case 2:t=Math.abs(o.scaleY)*N.signum(l),o.scaleY=t+(l-t)*r;break;case 3:o.scaleY+=(l-o.data.scaleY)*r}}}constructor(t,e,s){super(t,e,tr.scaleY+"|"+s),this.boneIndex=0,this.boneIndex=s}},tp=class extends tl{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(s<l[0]){switch(a){case 0:o.shearX=o.data.shearX,o.shearY=o.data.shearY;break;case 1:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=0,c=0,d=ta.search(l,s,3),u=this.curves[d/3];switch(u){case 0:let m=l[d];h=l[d+1],c=l[d+2];let g=(s-m)/(l[d+3]-m);h+=(l[d+3+1]-h)*g,c+=(l[d+3+2]-c)*g;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(a){case 0:o.shearX=o.data.shearX+h*r,o.shearY=o.data.shearY+c*r;break;case 1:case 2:o.shearX+=(o.data.shearX+h-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case 3:o.shearX+=h*r,o.shearY+=c*r}}constructor(t,e,s){super(t,e,tr.shearX+"|"+s,tr.shearY+"|"+s),this.boneIndex=0,this.boneIndex=s}},tx=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.shearX=o.data.shearX;break;case 1:o.shearX+=(o.data.shearX-o.shearX)*r}return}let l=this.getCurveValue(s);switch(a){case 0:o.shearX=o.data.shearX+l*r;break;case 1:case 2:o.shearX+=(o.data.shearX+l-o.shearX)*r;break;case 3:o.shearX+=l*r}}constructor(t,e,s){super(t,e,tr.shearX+"|"+s),this.boneIndex=0,this.boneIndex=s}},tb=class extends to{apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.shearY=o.data.shearY;break;case 1:o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=this.getCurveValue(s);switch(a){case 0:o.shearY=o.data.shearY+l*r;break;case 1:case 2:o.shearY+=(o.data.shearY+l-o.shearY)*r;break;case 3:o.shearY+=l*r}}constructor(t,e,s){super(t,e,tr.shearY+"|"+s),this.boneIndex=0,this.boneIndex=s}},tw=class extends tn{getFrameEntries(){return 5}setFrame(t,e,s,i,r,a){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(s<l[0]){let t=o.data.color;switch(a){case 0:h.setFromColor(t);break;case 1:h.add((t.r-h.r)*r,(t.g-h.g)*r,(t.b-h.b)*r,(t.a-h.a)*r)}return}let c=0,d=0,u=0,m=0,g=ta.search(l,s,5),f=this.curves[g/5];switch(f){case 0:let p=l[g];c=l[g+1],d=l[g+2],u=l[g+3],m=l[g+4];let x=(s-p)/(l[g+5]-p);c+=(l[g+5+1]-c)*x,d+=(l[g+5+2]-d)*x,u+=(l[g+5+3]-u)*x,m+=(l[g+5+4]-m)*x;break;case 1:c=l[g+1],d=l[g+2],u=l[g+3],m=l[g+4];break;default:c=this.getBezierValue(s,g,1,f-2),d=this.getBezierValue(s,g,2,f+18-2),u=this.getBezierValue(s,g,3,f+36-2),m=this.getBezierValue(s,g,4,f+54-2)}1==r?h.set(c,d,u,m):(0==a&&h.setFromColor(o.data.color),h.add((c-h.r)*r,(d-h.g)*r,(u-h.b)*r,(m-h.a)*r))}constructor(t,e,s){super(t,e,[tr.rgb+"|"+s,tr.alpha+"|"+s]),this.slotIndex=0,this.slotIndex=s}},tv=class extends tn{getFrameEntries(){return 4}setFrame(t,e,s,i,r){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(s<l[0]){let t=o.data.color;switch(a){case 0:h.r=t.r,h.g=t.g,h.b=t.b;break;case 1:h.r+=(t.r-h.r)*r,h.g+=(t.g-h.g)*r,h.b+=(t.b-h.b)*r}return}let c=0,d=0,u=0,m=ta.search(l,s,4),g=this.curves[m>>2];switch(g){case 0:let f=l[m];c=l[m+1],d=l[m+2],u=l[m+3];let p=(s-f)/(l[m+4]-f);c+=(l[m+4+1]-c)*p,d+=(l[m+4+2]-d)*p,u+=(l[m+4+3]-u)*p;break;case 1:c=l[m+1],d=l[m+2],u=l[m+3];break;default:c=this.getBezierValue(s,m,1,g-2),d=this.getBezierValue(s,m,2,g+18-2),u=this.getBezierValue(s,m,3,g+36-2)}if(1==r)h.r=c,h.g=d,h.b=u;else{if(0==a){let t=o.data.color;h.r=t.r,h.g=t.g,h.b=t.b}h.r+=(c-h.r)*r,h.g+=(d-h.g)*r,h.b+=(u-h.b)*r}}constructor(t,e,s){super(t,e,[tr.rgb+"|"+s]),this.slotIndex=0,this.slotIndex=s}},ty=class extends to{apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.color;if(s<this.frames[0]){let t=o.data.color;switch(a){case 0:l.a=t.a;break;case 1:l.a+=(t.a-l.a)*r}return}let h=this.getCurveValue(s);1==r?l.a=h:(0==a&&(l.a=o.data.color.a),l.a+=(h-l.a)*r)}constructor(t,e,s){super(t,e,tr.alpha+"|"+s),this.slotIndex=0,this.slotIndex=s}},tk=class extends tn{getFrameEntries(){return 8}setFrame(t,e,s,i,r,a,n,o,l){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a,this.frames[t+5]=n,this.frames[t+6]=o,this.frames[t+7]=l}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(s<l[0]){let t=o.data.color,e=o.data.darkColor;switch(a){case 0:h.setFromColor(t),c.r=e.r,c.g=e.g,c.b=e.b;break;case 1:h.add((t.r-h.r)*r,(t.g-h.g)*r,(t.b-h.b)*r,(t.a-h.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let d=0,u=0,m=0,g=0,f=0,p=0,x=0,b=ta.search(l,s,8),w=this.curves[b>>3];switch(w){case 0:let v=l[b];d=l[b+1],u=l[b+2],m=l[b+3],g=l[b+4],f=l[b+5],p=l[b+6],x=l[b+7];let y=(s-v)/(l[b+8]-v);d+=(l[b+8+1]-d)*y,u+=(l[b+8+2]-u)*y,m+=(l[b+8+3]-m)*y,g+=(l[b+8+4]-g)*y,f+=(l[b+8+5]-f)*y,p+=(l[b+8+6]-p)*y,x+=(l[b+8+7]-x)*y;break;case 1:d=l[b+1],u=l[b+2],m=l[b+3],g=l[b+4],f=l[b+5],p=l[b+6],x=l[b+7];break;default:d=this.getBezierValue(s,b,1,w-2),u=this.getBezierValue(s,b,2,w+18-2),m=this.getBezierValue(s,b,3,w+36-2),g=this.getBezierValue(s,b,4,w+54-2),f=this.getBezierValue(s,b,5,w+72-2),p=this.getBezierValue(s,b,6,w+90-2),x=this.getBezierValue(s,b,7,w+108-2)}if(1==r)h.set(d,u,m,g),c.r=f,c.g=p,c.b=x;else{if(0==a){h.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}h.add((d-h.r)*r,(u-h.g)*r,(m-h.b)*r,(g-h.a)*r),c.r+=(f-c.r)*r,c.g+=(p-c.g)*r,c.b+=(x-c.b)*r}}constructor(t,e,s){super(t,e,[tr.rgb+"|"+s,tr.alpha+"|"+s,tr.rgb2+"|"+s]),this.slotIndex=0,this.slotIndex=s}},tC=class extends tn{getFrameEntries(){return 7}setFrame(t,e,s,i,r,a,n,o){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a,this.frames[t+5]=n,this.frames[t+6]=o}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(s<l[0]){let t=o.data.color,e=o.data.darkColor;switch(a){case 0:h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b;break;case 1:h.r+=(t.r-h.r)*r,h.g+=(t.g-h.g)*r,h.b+=(t.b-h.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let d=0,u=0,m=0,g=0,f=0,p=0,x=ta.search(l,s,7),b=this.curves[x/7];switch(b){case 0:let w=l[x];d=l[x+1],u=l[x+2],m=l[x+3],g=l[x+4],f=l[x+5],p=l[x+6];let v=(s-w)/(l[x+7]-w);d+=(l[x+7+1]-d)*v,u+=(l[x+7+2]-u)*v,m+=(l[x+7+3]-m)*v,g+=(l[x+7+4]-g)*v,f+=(l[x+7+5]-f)*v,p+=(l[x+7+6]-p)*v;break;case 1:d=l[x+1],u=l[x+2],m=l[x+3],g=l[x+4],f=l[x+5],p=l[x+6];break;default:d=this.getBezierValue(s,x,1,b-2),u=this.getBezierValue(s,x,2,b+18-2),m=this.getBezierValue(s,x,3,b+36-2),g=this.getBezierValue(s,x,4,b+54-2),f=this.getBezierValue(s,x,5,b+72-2),p=this.getBezierValue(s,x,6,b+90-2)}if(1==r)h.r=d,h.g=u,h.b=m,c.r=g,c.g=f,c.b=p;else{if(0==a){let t=o.data.color,e=o.data.darkColor;h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}h.r+=(d-h.r)*r,h.g+=(u-h.g)*r,h.b+=(m-h.b)*r,c.r+=(g-c.r)*r,c.g+=(f-c.g)*r,c.b+=(p-c.b)*r}}constructor(t,e,s){super(t,e,[tr.rgb+"|"+s,tr.rgb2+"|"+s]),this.slotIndex=0,this.slotIndex=s}},tS=class extends ta{getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(o.bone.active){if(1==n){0==a&&this.setAttachment(t,o,o.data.attachmentName);return}if(s<this.frames[0]){(0==a||1==a)&&this.setAttachment(t,o,o.data.attachmentName);return}this.setAttachment(t,o,this.attachmentNames[ta.search1(this.frames,s)])}}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}constructor(t,e){super(t,[tr.attachment+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=Array(t)}},tA=class extends tn{getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,r,a,n,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let m=(i-2*a+o)*.03,g=.03*l-.06*n,f=((a-o)*3-i+h)*.006,p=(n-l+.33333333)*.018,x=2*m+f,b=2*g+p,w=(a-i)*.3+m+.16666667*f,v=.3*n+g+.16666667*p,y=i+w,k=v;for(let t=u+18;u<t;u+=2)d[u]=y,d[u+1]=k,w+=x,v+=b,x+=f,b+=p,y+=w,k+=v}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:let r=this.frames[e];return(t-r)/(this.frames[e+this.getFrameEntries()]-r);case 1:return 0}if(s[i-=2]>t){let r=this.frames[e];return s[i+1]*(t-r)/(s[i]-r)}let a=i+18;for(i+=2;i<a;i+=2)if(s[i]>=t){let e=s[i-2],r=s[i-1];return r+(t-e)/(s[i]-e)*(s[i+1]-r)}let n=s[a-2],o=s[a-1];return o+(1-o)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.getAttachment();if(!l||!(l instanceof $)||l.timelineAttachment!=this.attachment)return;let h=o.deform;0==h.length&&(a=0);let c=this.vertices,d=c[0].length,u=this.frames;if(s<u[0]){switch(a){case 0:h.length=0;break;case 1:if(1==r){h.length=0;break}if(h.length=d,l.bones){r=1-r;for(var m=0;m<d;m++)h[m]*=r}else{let t=l.vertices;for(var m=0;m<d;m++)h[m]+=(t[m]-h[m])*r}}return}if(h.length=d,s>=u[u.length-1]){let t=c[u.length-1];if(1==r){if(3==a){if(l.bones)for(let e=0;e<d;e++)h[e]+=t[e];else{let e=l.vertices;for(let s=0;s<d;s++)h[s]+=t[s]-e[s]}}else _.arrayCopy(t,0,h,0,d)}else switch(a){case 0:if(l.bones)for(let e=0;e<d;e++)h[e]=t[e]*r;else{let e=l.vertices;for(let s=0;s<d;s++){let i=e[s];h[s]=i+(t[s]-i)*r}}break;case 1:case 2:for(let e=0;e<d;e++)h[e]+=(t[e]-h[e])*r;break;case 3:if(l.bones)for(let e=0;e<d;e++)h[e]+=t[e]*r;else{let e=l.vertices;for(let s=0;s<d;s++)h[s]+=(t[s]-e[s])*r}}return}let g=ta.search1(u,s),f=this.getCurvePercent(s,g),p=c[g],x=c[g+1];if(1==r){if(3==a){if(l.bones)for(let t=0;t<d;t++){let e=p[t];h[t]+=e+(x[t]-e)*f}else{let t=l.vertices;for(let e=0;e<d;e++){let s=p[e];h[e]+=s+(x[e]-s)*f-t[e]}}}else for(let t=0;t<d;t++){let e=p[t];h[t]=e+(x[t]-e)*f}}else switch(a){case 0:if(l.bones)for(let t=0;t<d;t++){let e=p[t];h[t]=(e+(x[t]-e)*f)*r}else{let t=l.vertices;for(let e=0;e<d;e++){let s=p[e],i=t[e];h[e]=i+(s+(x[e]-s)*f-i)*r}}break;case 1:case 2:for(let t=0;t<d;t++){let e=p[t];h[t]+=(e+(x[t]-e)*f-h[t])*r}break;case 3:if(l.bones)for(let t=0;t<d;t++){let e=p[t];h[t]+=(e+(x[t]-e)*f)*r}else{let t=l.vertices;for(let e=0;e<d;e++){let s=p[e];h[e]+=(s+(x[e]-s)*f-t[e])*r}}}}constructor(t,e,s,i){super(t,e,[tr.deform+"|"+s+"|"+i.id]),this.slotIndex=0,this.slotIndex=s,this.attachment=i,this.vertices=Array(t)}},tI=class extends ta{getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,r,a,n){if(!i)return;let o=this.frames,l=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,r,a,n),e=-1;else if(e>=o[l-1])return;if(s<o[0])return;let h=0;if(e<o[0])h=0;else{h=ta.search1(o,e)+1;let t=o[h];for(;h>0&&o[h-1]==t;)h--}for(;h<l&&s>=o[h];h++)i.push(this.events[h])}constructor(t){super(t,tI.propertyIds),this.events=Array(t)}},tM=tI;tM.propertyIds=[""+tr.event];var tT=class extends ta{getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,r,a,n){if(1==n){0==a&&_.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(s<this.frames[0]){(0==a||1==a)&&_.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let o=ta.search1(this.frames,s),l=this.drawOrders[o];if(l){let e=t.drawOrder,s=t.slots;for(let t=0,i=l.length;t<i;t++)e[t]=s[l[t]]}else _.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}constructor(t){super(t,tT.propertyIds),this.drawOrders=Array(t)}},tE=tT;tE.propertyIds=[""+tr.drawOrder];var tF=class extends tn{getFrameEntries(){return 6}setFrame(t,e,s,i,r,a,n){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a?1:0,this.frames[t+5]=n?1:0}apply(t,e,s,i,r,a,n){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let l=this.frames;if(s<l[0]){switch(a){case 0:o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch;break;case 1:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let h=0,c=0,d=ta.search(l,s,6),u=this.curves[d/6];switch(u){case 0:let m=l[d];h=l[d+1],c=l[d+2];let g=(s-m)/(l[d+6]-m);h+=(l[d+6+1]-h)*g,c+=(l[d+6+2]-c)*g;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}0==a?(o.mix=o.data.mix+(h-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,1==n?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5])):(o.mix+=(h-o.mix)*r,o.softness+=(c-o.softness)*r,0==n&&(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5]))}constructor(t,e,s){super(t,e,[tr.ikConstraint+"|"+s]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}},tY=class extends tn{getFrameEntries(){return 7}setFrame(t,e,s,i,r,a,n,o){let l=this.frames;l[t*=7]=e,l[t+1]=s,l[t+2]=i,l[t+3]=r,l[t+4]=a,l[t+5]=n,l[t+6]=o}apply(t,e,s,i,r,a,n){let o,l,h,c,d,u,m=t.transformConstraints[this.transformConstraintIndex];if(!m.active)return;let g=this.frames;if(s<g[0]){let t=m.data;switch(a){case 0:m.mixRotate=t.mixRotate,m.mixX=t.mixX,m.mixY=t.mixY,m.mixScaleX=t.mixScaleX,m.mixScaleY=t.mixScaleY,m.mixShearY=t.mixShearY;break;case 1:m.mixRotate+=(t.mixRotate-m.mixRotate)*r,m.mixX+=(t.mixX-m.mixX)*r,m.mixY+=(t.mixY-m.mixY)*r,m.mixScaleX+=(t.mixScaleX-m.mixScaleX)*r,m.mixScaleY+=(t.mixScaleY-m.mixScaleY)*r,m.mixShearY+=(t.mixShearY-m.mixShearY)*r}return}let f=ta.search(g,s,7),p=this.curves[f/7];switch(p){case 0:let x=g[f];o=g[f+1],l=g[f+2],h=g[f+3],c=g[f+4],d=g[f+5],u=g[f+6];let b=(s-x)/(g[f+7]-x);o+=(g[f+7+1]-o)*b,l+=(g[f+7+2]-l)*b,h+=(g[f+7+3]-h)*b,c+=(g[f+7+4]-c)*b,d+=(g[f+7+5]-d)*b,u+=(g[f+7+6]-u)*b;break;case 1:o=g[f+1],l=g[f+2],h=g[f+3],c=g[f+4],d=g[f+5],u=g[f+6];break;default:o=this.getBezierValue(s,f,1,p-2),l=this.getBezierValue(s,f,2,p+18-2),h=this.getBezierValue(s,f,3,p+36-2),c=this.getBezierValue(s,f,4,p+54-2),d=this.getBezierValue(s,f,5,p+72-2),u=this.getBezierValue(s,f,6,p+90-2)}if(0==a){let t=m.data;m.mixRotate=t.mixRotate+(o-t.mixRotate)*r,m.mixX=t.mixX+(l-t.mixX)*r,m.mixY=t.mixY+(h-t.mixY)*r,m.mixScaleX=t.mixScaleX+(c-t.mixScaleX)*r,m.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*r,m.mixShearY=t.mixShearY+(u-t.mixShearY)*r}else m.mixRotate+=(o-m.mixRotate)*r,m.mixX+=(l-m.mixX)*r,m.mixY+=(h-m.mixY)*r,m.mixScaleX+=(c-m.mixScaleX)*r,m.mixScaleY+=(d-m.mixScaleY)*r,m.mixShearY+=(u-m.mixShearY)*r}constructor(t,e,s){super(t,e,[tr.transformConstraint+"|"+s]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}},tR=class extends to{apply(t,e,s,i,r,a,n){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.position=o.data.position;break;case 1:o.position+=(o.data.position-o.position)*r}return}let l=this.getCurveValue(s);0==a?o.position=o.data.position+(l-o.data.position)*r:o.position+=(l-o.position)*r}constructor(t,e,s){super(t,e,tr.pathConstraintPosition+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}},tX=class extends to{apply(t,e,s,i,r,a,n){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case 0:o.spacing=o.data.spacing;break;case 1:o.spacing+=(o.data.spacing-o.spacing)*r}return}let l=this.getCurveValue(s);0==a?o.spacing=o.data.spacing+(l-o.data.spacing)*r:o.spacing+=(l-o.spacing)*r}constructor(t,e,s){super(t,e,tr.pathConstraintSpacing+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}},tL=class extends tn{getFrameEntries(){return 4}setFrame(t,e,s,i,r){let a=this.frames;a[t<<=2]=e,a[t+1]=s,a[t+2]=i,a[t+3]=r}apply(t,e,s,i,r,a,n){let o,l,h,c=t.pathConstraints[this.pathConstraintIndex];if(!c.active)return;let d=this.frames;if(s<d[0]){switch(a){case 0:c.mixRotate=c.data.mixRotate,c.mixX=c.data.mixX,c.mixY=c.data.mixY;break;case 1:c.mixRotate+=(c.data.mixRotate-c.mixRotate)*r,c.mixX+=(c.data.mixX-c.mixX)*r,c.mixY+=(c.data.mixY-c.mixY)*r}return}let u=ta.search(d,s,4),m=this.curves[u>>2];switch(m){case 0:let g=d[u];o=d[u+1],l=d[u+2],h=d[u+3];let f=(s-g)/(d[u+4]-g);o+=(d[u+4+1]-o)*f,l+=(d[u+4+2]-l)*f,h+=(d[u+4+3]-h)*f;break;case 1:o=d[u+1],l=d[u+2],h=d[u+3];break;default:o=this.getBezierValue(s,u,1,m-2),l=this.getBezierValue(s,u,2,m+18-2),h=this.getBezierValue(s,u,3,m+36-2)}if(0==a){let t=c.data;c.mixRotate=t.mixRotate+(o-t.mixRotate)*r,c.mixX=t.mixX+(l-t.mixX)*r,c.mixY=t.mixY+(h-t.mixY)*r}else c.mixRotate+=(o-c.mixRotate)*r,c.mixX+=(l-c.mixX)*r,c.mixY+=(h-c.mixY)*r}constructor(t,e,s){super(t,e,[tr.pathConstraintMix+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}},tB=class extends ta{getFrameEntries(){return tB.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,i,r){let a=this.frames;a[t*=tB.ENTRIES]=e,a[t+tB.MODE]=s|i<<4,a[t+tB.DELAY]=r}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.attachment,h=this.attachment;if(l!=h&&(!(l instanceof $)||l.timelineAttachment!=h))return;let c=this.frames;if(s<c[0]){(0==a||1==a)&&(o.sequenceIndex=-1);return}let d=ta.search(c,s,tB.ENTRIES),u=c[d],m=c[d+tB.MODE],g=c[d+tB.DELAY];if(!this.attachment.sequence)return;let p=m>>4,x=this.attachment.sequence.regions.length,b=ts[15&m];if(b!=f.hold)switch(p+=(s-u)/g+1e-5|0,b){case f.once:p=Math.min(x-1,p);break;case f.loop:p%=x;break;case f.pingpong:{let t=(x<<1)-2;(p=0==t?0:p%t)>=x&&(p=t-p);break}case f.onceReverse:p=Math.max(x-1-p,0);break;case f.loopReverse:p=x-1-p%x;break;case f.pingpongReverse:{let t=(x<<1)-2;(p=0==t?0:(p+x-1)%t)>=x&&(p=t-p)}}o.sequenceIndex=p}constructor(t,e,s){super(t,[tr.sequence+"|"+e+"|"+s.sequence.id]),this.slotIndex=e,this.attachment=s}},tP=tB;tP.ENTRIES=3,tP.MODE=1,tP.DELAY=2;var tD=class{static emptyAnimation(){return tD._emptyAnimation}update(t){t*=this.timeScale;let e=this.tracks;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(!i)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let r=t*i.timeScale;if(i.delay>0){if(i.delay-=r,i.delay>0)continue;r=-i.delay,i.delay=0}let a=i.next;if(a){let e=i.trackLast-a.delay;if(e>=0){for(a.delay=0,a.trackTime+=0==i.timeScale?0:(e/i.timeScale+t)*a.timeScale,i.trackTime+=r,this.setCurrent(s,a,!0);a.mixingFrom;)a.mixTime+=t,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let s=t.mixingFrom;if(!s)return!0;let i=this.updateMixingFrom(s,e);return(s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration)?((0==s.totalAlpha||0==t.mixDuration)&&(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,s=this.tracks,i=!1;for(let a=0,n=s.length;a<n;a++){let n=s[a];if(!n||n.delay>0)continue;i=!0;let o=0==a?p.first:n.mixBlend,l=n.alpha;n.mixingFrom?l*=this.applyMixingFrom(n,t,o):n.trackTime>=n.trackEnd&&!n.next&&(l=0);let h=n.animationLast,c=n.getAnimationTime(),d=c,u=e;n.reverse&&(d=n.animation.duration-d,u=null);let m=n.animation.timelines,g=m.length;if(0==a&&1==l||o==p.add)for(let e=0;e<g;e++){_.webkit602BugfixHelper(l,o);var r=m[e];r instanceof tS?this.applyAttachmentTimeline(r,t,d,o,!0):r.apply(t,h,d,u,l,o,x.mixIn)}else{let e=n.timelineMode,s=n.shortestRotation,i=!s&&n.timelinesRotation.length!=g<<1;i&&(n.timelinesRotation.length=g<<1);for(let r=0;r<g;r++){let a=m[r],c=e[r]==tW?o:p.setup;!s&&a instanceof th?this.applyRotateTimeline(a,t,d,l,c,n.timelinesRotation,r<<1,i):a instanceof tS?this.applyAttachmentTimeline(a,t,d,o,!0):(_.webkit602BugfixHelper(l,o),a.apply(t,h,d,u,l,c,x.mixIn))}}this.queueEvents(n,c),e.length=0,n.nextAnimationLast=c,n.nextTrackLast=n.trackTime}for(var a=this.unkeyedState+tG,n=t.slots,o=0,l=t.slots.length;o<l;o++){var h=n[o];if(h.attachmentState==a){var c=h.data.attachmentName;h.setAttachment(c?t.getAttachment(h.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(t,e,s){let i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,e,s);let r=0;0==t.mixDuration?(r=1,s==p.first&&(s=p.setup)):((r=t.mixTime/t.mixDuration)>1&&(r=1),s!=p.first&&(s=i.mixBlend));let a=r<i.attachmentThreshold,n=r<i.drawOrderThreshold,o=i.animation.timelines,l=o.length,h=i.alpha*t.interruptAlpha,c=h*(1-r),d=i.animationLast,u=i.getAnimationTime(),m=u,g=null;if(i.reverse?m=i.animation.duration-m:r<i.eventThreshold&&(g=this.events),s==p.add)for(let t=0;t<l;t++)o[t].apply(e,d,m,g,c,s,x.mixOut);else{let t=i.timelineMode,r=i.timelineHoldMix,u=i.shortestRotation,f=!u&&i.timelinesRotation.length!=l<<1;f&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(let b=0;b<l;b++){let l,w=o[b],v=x.mixOut,y=0;switch(t[b]){case tW:if(!n&&w instanceof tE)continue;l=s,y=c;break;case tz:l=p.setup,y=c;break;case tq:l=s,y=h;break;case t_:l=p.setup,y=h;break;default:l=p.setup;let k=r[b];y=h*Math.max(0,1-k.mixTime/k.mixDuration)}i.totalAlpha+=y,!u&&w instanceof th?this.applyRotateTimeline(w,e,m,y,l,i.timelinesRotation,b<<1,f):w instanceof tS?this.applyAttachmentTimeline(w,e,m,l,a):(_.webkit602BugfixHelper(y,s),n&&w instanceof tE&&l==p.setup&&(v=x.mixIn),w.apply(e,d,m,g,y,l,v))}}return t.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,r}applyAttachmentTimeline(t,e,s,i,r){var a=e.slots[t.slotIndex];a.bone.active&&(s<t.frames[0]?(i==p.setup||i==p.first)&&this.setAttachment(e,a,a.data.attachmentName,r):this.setAttachment(e,a,t.attachmentNames[ta.search1(t.frames,s)],r),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+tG))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+tH)}applyRotateTimeline(t,e,s,i,r,a,n,o){if(o&&(a[n]=0),1==i){t.apply(e,0,s,null,1,r,x.mixIn);return}let l=e.bones[t.boneIndex];if(!l.active)return;let h=t.frames,c=0,d=0;if(s<h[0])switch(r){case p.setup:l.rotation=l.data.rotation;default:return;case p.first:c=l.rotation,d=l.data.rotation}else c=r==p.setup?l.data.rotation:l.rotation,d=l.data.rotation+t.getCurveValue(s);let u=0,m=d-c;if(0==(m-=(16384-(16384.499999999996-m/360|0))*360))u=a[n];else{let t=0,e=0;o?(t=0,e=m):(t=a[n],e=a[n+1]);let s=m>0,i=t>=0;N.signum(e)!=N.signum(m)&&90>=Math.abs(e)&&(Math.abs(t)>180&&(t+=360*N.signum(t)),i=s),u=m+t-t%360,i!=s&&(u+=360*N.signum(t)),a[n]=u}a[n+1]=m,l.rotation=c+u*i}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,r=i-s,a=t.trackLast%r,n=this.events,o=0,l=n.length;for(;o<l;o++){let e=n[o];if(e.time<a)break;e.time>i||this.queue.event(t,e)}for((t.loop?0==r||a>t.trackTime%r:e>=i&&t.animationLast<i)&&this.queue.complete(t);o<l;o++){let e=n[o];e.time<s||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){let t=s.mixingFrom;if(!t)break;this.queue.end(t),s.mixingFrom=null,s.mixingTo=null,s=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){let i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.data.skeletonData.findAnimation(e);if(!i)throw Error("Animation not found: "+e);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw Error("animation cannot be null.");let i=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,i=!1):this.clearNext(r));let a=this.trackEntry(t,e,s,r);return this.setCurrent(t,a,i),this.queue.drain(),a}addAnimation(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.data.skeletonData.findAnimation(e);if(!r)throw Error("Animation not found: "+e);return this.addAnimationWith(t,r,s,i)}addAnimationWith(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)throw Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let a=this.trackEntry(t,e,s,r);return r?(r.next=a,a.previous=r,i<=0&&(i+=r.getTrackComplete()-a.mixDuration)):(this.setCurrent(t,a,!0),this.queue.drain()),a.delay=i,a}setEmptyAnimation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=this.setAnimationWith(t,tD.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.addAnimationWith(t,tD.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){let s=this.tracks[e];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(_.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,i){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=s,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=i?this.data.getMix(i.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=p.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do s.mixingTo&&s.mixBlend==p.add||this.computeHold(s),s=s.mixingTo;while(s)}}}computeHold(t){let e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,r=t.timelineMode;r.length=i;let a=t.timelineHoldMix;a.length=0;let n=this.propertyIDs;if(e&&e.holdPrevious){for(let t=0;t<i;t++)r[t]=n.addAll(s[t].getPropertyIds())?t_:tq;return}t:for(let o=0;o<i;o++){let i=s[o],l=i.getPropertyIds();if(n.addAll(l)){if(!e||i instanceof tS||i instanceof tE||i instanceof tM||!e.animation.hasTimeline(l))r[o]=tz;else{for(let s=e.mixingTo;s;s=s.mixingTo)if(!s.animation.hasTimeline(l)){if(t.mixDuration>0){r[o]=tj,a[o]=s;continue t}break}r[o]=t_}}else r[o]=tW}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}constructor(t){this.tracks=[],this.timeScale=1,this.unkeyedState=0,this.events=[],this.listeners=[],this.queue=new tN(this),this.propertyIDs=new P,this.animationsChanged=!1,this.trackEntryPool=new G(()=>new tO),this.data=t}},tV=tD;tV._emptyAnimation=new ti("<empty>",[],0);var tO=class{reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=p.replace,this.timelineMode=[],this.timelineHoldMix=[],this.timelinesRotation=[]}},tN=class{start(t){this.objects.push(b.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(b.interrupt),this.objects.push(t)}end(t){this.objects.push(b.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(b.dispose),this.objects.push(t)}complete(t){this.objects.push(b.complete),this.objects.push(t)}event(t,e){this.objects.push(b.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){let i=t[s],r=t[s+1];switch(i){case b.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let s=e[t];s.start&&s.start(r)}break;case b.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let s=e[t];s.interrupt&&s.interrupt(r)}break;case b.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let s=e[t];s.end&&s.end(r)}case b.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let s=e[t];s.dispose&&s.dispose(r)}this.animState.trackEntryPool.free(r);break;case b.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let s=e[t];s.complete&&s.complete(r)}break;case b.event:let a=t[s+++2];r.listener&&r.listener.event&&r.listener.event(r,a);for(let t=0;t<e.length;t++){let s=e[t];s.event&&s.event(r,a)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}};(i=b||(b={}))[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event";var tU=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},tW=0,tz=1,tq=2,t_=3,tj=4,tG=1,tH=2,tZ=class{setMix(t,e,s){let i=this.skeletonData.findAnimation(t);if(!i)throw Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw Error("Animation not found: "+e);this.setMixWith(i,r,s)}setMixWith(t,e,s){if(!t)throw Error("from cannot be null.");if(!e)throw Error("to cannot be null.");let i=t.name+"."+e.name;this.animationToMixTime[i]=s}getMix(t,e){let s=t.name+"."+e.name,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw Error("skeletonData cannot be null.");this.skeletonData=t}},tK=class extends ${copy(){let t=new tK(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}constructor(t){super(t),this.color=new V(1,1,1,1)}},tJ=class extends ${copy(){let t=new tJ(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}constructor(t){super(t),this.endSlot=null,this.color=new V(.2275,.2275,.8078,1)}},tQ=class{getImage(){return this._image}constructor(t){this._image=t}};(r=w||(w={}))[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.MipMap=9987]="MipMap",r[r.MipMapNearestNearest=9984]="MipMapNearestNearest",r[r.MipMapLinearNearest=9985]="MipMapLinearNearest",r[r.MipMapNearestLinear=9986]="MipMapNearestLinear",r[r.MipMapLinearLinear=9987]="MipMapLinearLinear",(a=v||(v={}))[a.MirroredRepeat=33648]="MirroredRepeat",a[a.ClampToEdge=33071]="ClampToEdge",a[a.Repeat=10497]="Repeat";var t$=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},t0=class extends tQ{setFilters(t,e){}setWraps(t,e){}dispose(){}},t1=class{findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(let s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){var t;for(let e=0;e<this.pages.length;e++)null==(t=this.pages[e].texture)||t.dispose()}constructor(t){this.pages=[],this.regions=[];let e=new t2(t),s=[,,,,],i={};i.size=t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},i.format=()=>{},i.filter=t=>{t.minFilter=_.enumValue(w,s[1]),t.magFilter=_.enumValue(w,s[2])},i.repeat=t=>{-1!=s[1].indexOf("x")&&(t.uWrap=v.Repeat),-1!=s[1].indexOf("y")&&(t.vWrap=v.Repeat)},i.pma=t=>{t.pma="true"==s[1]};var r={};r.xy=t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},r.size=t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},r.bounds=t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},r.offset=t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},r.orig=t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},r.offsets=t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},r.rotate=t=>{let e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},r.index=t=>{t.index=parseInt(s[1])};let a=e.readLine();for(;a&&0==a.trim().length;)a=e.readLine();for(;a&&0!=a.trim().length&&0!=e.readEntry(s,a);)a=e.readLine();let n=null,o=null,l=null;for(;null!==a;)if(0==a.trim().length)n=null,a=e.readLine();else if(n){let t=new t5(n,a);for(;;){let i=e.readEntry(s,a=e.readLine());if(0==i)break;let n=r[s[0]];if(n)n(t);else{o||(o=[]),l||(l=[]),o.push(s[0]);let t=[];for(let e=0;e<i;e++)t.push(parseInt(s[e+1]));l.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&l&&l.length>0&&(t.names=o,t.values=l,o=null,l=null),t.u=t.x/n.width,t.v=t.y/n.height,90==t.degrees?(t.u2=(t.x+t.height)/n.width,t.v2=(t.y+t.width)/n.height):(t.u2=(t.x+t.width)/n.width,t.v2=(t.y+t.height)/n.height),this.regions.push(t)}else{for(n=new t3(a.trim());0!=e.readEntry(s,a=e.readLine());){let t=i[s[0]];t&&t(n)}this.pages.push(n)}}},t2=class{readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e||0==(e=e.trim()).length)return 0;let s=e.indexOf(":");if(-1==s)return 0;t[0]=e.substr(0,s).trim();for(let i=1,r=s+1;;i++){let s=e.indexOf(",",r);if(-1==s)return t[i]=e.substr(r).trim(),i;if(t[i]=e.substr(r,s-r).trim(),r=s+1,4==i)return 4}}constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}},t3=class{setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}constructor(t){this.minFilter=w.Nearest,this.magFilter=w.Nearest,this.uWrap=v.ClampToEdge,this.vWrap=v.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=t}},t5=class extends t${constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e}},t4=class extends ${updateRegion(){if(!this.region)throw Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=_.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,r=this.region.v,a=0,n=0;if(this.region instanceof t5){let o=this.region,l=o.page.texture.getImage(),h=l.width,c=l.height;switch(o.degrees){case 90:i-=(o.originalHeight-o.offsetY-o.height)/h,r-=(o.originalWidth-o.offsetX-o.width)/c,a=o.originalHeight/h,n=o.originalWidth/c;for(let o=0;o<s;o+=2)e[o]=i+t[o+1]*a,e[o+1]=r+(1-t[o])*n;return;case 180:i-=(o.originalWidth-o.offsetX-o.width)/h,r-=o.offsetY/c,a=o.originalWidth/h,n=o.originalHeight/c;for(let o=0;o<s;o+=2)e[o]=i+(1-t[o])*a,e[o+1]=r+(1-t[o+1])*n;return;case 270:i-=o.offsetY/h,r-=o.offsetX/c,a=o.originalHeight/h,n=o.originalWidth/c;for(let o=0;o<s;o+=2)e[o]=i+(1-t[o+1])*a,e[o+1]=r+t[o]*n;return}i-=o.offsetX/h,r-=(o.originalHeight-o.offsetY-o.height)/c,a=o.originalWidth/h,n=o.originalHeight/c}else this.region?(a=this.region.u2-i,n=this.region.v2-r):(i=r=0,a=n=1);for(let o=0;o<s;o+=2)e[o]=i+t[o]*a,e[o+1]=r+t[o+1]*n}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new t4(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=Array(this.regionUVs.length),_.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=Array(this.uvs.length),_.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=Array(this.triangles.length),_.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=Array(this.edges.length),_.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,i,r,a){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,i,r,a)}newLinkedMesh(){let t=new t4(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new V(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new V(0,0,0,0),this.path=e}},t6=class extends ${copy(){let t=new t6(this.name);return this.copyTo(t),t.lengths=Array(this.lengths.length),_.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new V(1,1,1,1)}},t8=class extends ${computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=N.cosDeg(this.rotation),s=N.sinDeg(this.rotation),i=e*t.a+s*t.b;return Math.atan2(e*t.c+s*t.d,i)*N.radDeg}copy(){let t=new t8(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new V(.38,.94,0,1)}},t7=class extends J{updateRegion(){if(!this.region)throw Error("Region not set.");let t=this.region,e=this.uvs;if(null==t){e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,e[7]=0;return}let s=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*s,a=-this.height/2*this.scaleY+this.region.offsetY*i,n=r+this.region.width*s,o=a+this.region.height*i,l=this.rotation*Math.PI/180,h=Math.cos(l),c=Math.sin(l),d=this.x,u=this.y,m=r*h+d,g=r*c,f=a*h+u,p=a*c,x=n*h+d,b=n*c,w=o*h+u,v=o*c,y=this.offset;y[0]=m-p,y[1]=f+g,y[2]=m-v,y[3]=w+g,y[4]=x-v,y[5]=w+b,y[6]=x-p,y[7]=f+b,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,i){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,a=this.offset,n=r.worldX,o=r.worldY,l=r.a,h=r.b,c=r.c,d=r.d,u=0,m=0;u=a[0],m=a[1],e[s]=u*l+m*h+n,e[s+1]=u*c+m*d+o,s+=i,u=a[2],m=a[3],e[s]=u*l+m*h+n,e[s+1]=u*c+m*d+o,s+=i,u=a[4],m=a[5],e[s]=u*l+m*h+n,e[s+1]=u*c+m*d+o,s+=i,u=a[6],m=a[7],e[s]=u*l+m*h+n,e[s+1]=u*c+m*d+o}copy(){let t=new t7(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,_.arrayCopy(this.uvs,0,t.uvs,0,8),_.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new V(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=_.newFloatArray(8),this.uvs=_.newFloatArray(8),this.tempColor=new V(1,1,1,1),this.path=e}},t9=t7;t9.X1=0,t9.Y1=1,t9.C1R=2,t9.C1G=3,t9.C1B=4,t9.C1A=5,t9.U1=6,t9.V1=7,t9.X2=8,t9.Y2=9,t9.C2R=10,t9.C2G=11,t9.C2B=12,t9.C2A=13,t9.U2=14,t9.V2=15,t9.X3=16,t9.Y3=17,t9.C3R=18,t9.C3G=19,t9.C3B=20,t9.C3A=21,t9.U3=22,t9.V3=23,t9.X4=24,t9.Y4=25,t9.C4R=26,t9.C4G=27,t9.C4B=28,t9.C4A=29,t9.U4=30,t9.V4=31;var et=class{loadSequence(t,e,s){let i=s.regions;for(let r=0,a=i.length;r<a;r++){let a=s.getPath(e,r),n=this.atlas.findRegion(a);if(null==n)throw Error("Region not found in atlas: "+a+" (sequence: "+t+")");i[r]=n,i[r].renderObject=i[r]}}newRegionAttachment(t,e,s,i){let r=new t9(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw Error("Region not found in atlas: "+s+" (region attachment: "+e+")");t.renderObject=t,r.region=t}return r}newMeshAttachment(t,e,s,i){let r=new t4(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");t.renderObject=t,r.region=t}return r}newBoundingBoxAttachment(t,e){return new tK(e)}newPathAttachment(t,e){return new t6(e)}newPointAttachment(t,e){return new t8(e)}newClippingAttachment(t,e){return new tJ(e)}constructor(t){this.atlas=t}},ee=class{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=y.Normal,this.skinRequired=!1,this.color=new V,t<0)throw Error("index must be >= 0.");if(!e)throw Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}};(n=y||(y={}))[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection";var es=class{isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,r,a,n){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=r,this.ashearX=a,this.ashearY=n;let o=this.parent;if(!o){let o=this.skeleton,l=s+90+n,h=o.scaleX,c=o.scaleY;this.a=N.cosDeg(s+a)*i*h,this.b=N.cosDeg(l)*r*h,this.c=N.sinDeg(s+a)*i*c,this.d=N.sinDeg(l)*r*c,this.worldX=t*h+o.x,this.worldY=e*c+o.y;return}let l=o.a,h=o.b,c=o.c,d=o.d;switch(this.worldX=l*t+h*e+o.worldX,this.worldY=c*t+d*e+o.worldY,this.data.transformMode){case y.Normal:{let t=s+90+n,e=N.cosDeg(s+a)*i,o=N.cosDeg(t)*r,u=N.sinDeg(s+a)*i,m=N.sinDeg(t)*r;this.a=l*e+h*u,this.b=l*o+h*m,this.c=c*e+d*u,this.d=c*o+d*m;return}case y.OnlyTranslation:{let t=s+90+n;this.a=N.cosDeg(s+a)*i,this.b=N.cosDeg(t)*r,this.c=N.sinDeg(s+a)*i,this.d=N.sinDeg(t)*r;break}case y.NoRotationOrReflection:{let t=l*l+c*c,e=0;t>1e-4?(t=Math.abs(l*d-h*c)/t,l/=this.skeleton.scaleX,c/=this.skeleton.scaleY,h=c*t,d=l*t,e=Math.atan2(c,l)*N.radDeg):(l=0,c=0,e=90-Math.atan2(d,h)*N.radDeg);let o=s+a-e,u=s+n-e+90,m=N.cosDeg(o)*i,g=N.cosDeg(u)*r,f=N.sinDeg(o)*i,p=N.sinDeg(u)*r;this.a=l*m-h*f,this.b=l*g-h*p,this.c=c*m+d*f,this.d=c*g+d*p;break}case y.NoScale:case y.NoScaleOrReflection:{let t=N.cosDeg(s),e=N.sinDeg(s),o=(l*t+h*e)/this.skeleton.scaleX,u=(c*t+d*e)/this.skeleton.scaleY,m=Math.sqrt(o*o+u*u);m>1e-5&&(m=1/m),o*=m,u*=m,m=Math.sqrt(o*o+u*u),this.data.transformMode==y.NoScale&&l*d-h*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(m=-m);let g=Math.PI/2+Math.atan2(u,o),f=Math.cos(g)*m,p=Math.sin(g)*m,x=N.cosDeg(a)*i,b=N.cosDeg(90+n)*r,w=N.sinDeg(a)*i,v=N.sinDeg(90+n)*r;this.a=o*x+f*w,this.b=o*b+f*v,this.c=u*x+p*w,this.d=u*b+p*v}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*N.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*N.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*N.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*N.radDeg;return}let e=t.a,s=t.b,i=t.c,r=t.d,a=1/(e*r-s*i),n=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=n*r*a-o*s*a,this.ay=o*e*a-n*i*a;let l=a*r,h=a*e,c=a*s,d=a*i,u=l*this.a-c*this.c,m=l*this.b-c*this.d,g=h*this.c-d*this.a,f=h*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+g*g),this.ascaleX>1e-4){let t=u*f-m*g;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(u*m+g*f,t)*N.radDeg,this.arotation=Math.atan2(g,u)*N.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,m)*N.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){let e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){let e=N.sinDeg(t),s=N.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*N.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=N.sinDeg(t),s=N.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*N.radDeg}rotateWorld(t){let e=this.a,s=this.b,i=this.c,r=this.d,a=N.cosDeg(t),n=N.sinDeg(t);this.a=a*e-n*i,this.b=a*s-n*r,this.c=n*e+a*i,this.d=n*s+a*r}constructor(t,e,s){if(this.parent=null,this.children=[],this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}},ei=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},er=class{start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise((t,e)=>{let s=()=>{if(this.isLoadingComplete()){this.hasErrors()?e(this.errors):t(this);return}requestAnimationFrame(s)};requestAnimationFrame(s)})}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};t=this.start(t),this.downloader.downloadBinary(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,"Couldn't load binary ".concat(t,": status ").concat(e,", ").concat(i))})}loadText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};t=this.start(t),this.downloader.downloadText(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,"Couldn't load text ".concat(t,": status ").concat(e,", ").concat(i))})}loadJson(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};t=this.start(t),this.downloader.downloadJson(t,s=>{this.success(e,t,s)},(e,i)=>{this.error(s,t,"Couldn't load JSON ".concat(t,": status ").concat(e,", ").concat(i))})}loadTexture(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(t=this.start(t),"undefined"!=typeof navigator&&window.document){let i=new Image;i.crossOrigin="anonymous",i.onload=()=>{this.success(e,t,this.textureLoader(i))},i.onerror=()=>{this.error(s,t,"Couldn't load image: ".concat(t))},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),i.src=t}else fetch(t,{mode:"cors"}).then(e=>e.ok?e.blob():(this.error(s,t,"Couldn't load image: ".concat(t)),null)).then(t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(s=>{s&&this.success(e,t,this.textureLoader(s))})}loadTextureAtlas(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},i=arguments.length>3?arguments[3]:void 0,r=t.lastIndexOf("/"),a=r>=0?t.substring(0,r+1):"";t=this.start(t),this.downloader.downloadText(t,r=>{try{let n=new t1(r),o=n.pages.length,l=!1;for(let r of n.pages)this.loadTexture(i?i[r.name]:a+r.name,(s,i)=>{l||(r.setTexture(i),0==--o&&this.success(e,t,n))},(e,i)=>{l||this.error(s,t,"Couldn't load texture atlas ".concat(t," page image: ").concat(e)),l=!0})}catch(e){this.error(s,t,"Couldn't parse texture atlas ".concat(t,": ").concat(e.message))}},(e,i)=>{this.error(s,t,"Couldn't load texture atlas ".concat(t,": status ").concat(e,", ").concat(i))})}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let s=this.errors[t];throw Error("Asset not found: "+t+(s?"\n"+s:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}constructor(t,e="",s=new ea){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s}},ea=class{dataUriToString(t){if(!t.startsWith("data:"))throw Error("Not a data URI.");let e=t.indexOf("base64,");return -1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=e.charCodeAt(r);return i}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);let r=()=>{this.finish(t,i.status,i.responseText)};i.onload=r,i.onerror=r,i.send()}downloadJson(t,e,s){this.downloadText(t,t=>{e(JSON.parse(t))},s)}downloadBinary(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";let r=()=>{this.finish(t,i.status,i.response)};i.onload=()=>{200==i.status||0==i.status?this.finish(t,200,new Uint8Array(i.response)):r()},i.onerror=r,i.send()}start(t,e,s){let i=this.callbacks[t];try{if(i)return!0;this.callbacks[t]=i=[]}finally{i.push(e,s)}}finish(t,e,s){let i=this.callbacks[t];delete this.callbacks[t];let r=200==e||0==e?[s]:[e,s];for(let t=r.length-1,e=i.length;t<e;t+=2)i[t].apply(null,r)}constructor(){this.callbacks={},this.rawDataUris={}}},en=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw Error("data cannot be null.");this.time=t,this.data=e}},eo=class{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},el=class{isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,r,a,n){let o=t.parent;if(!o)throw Error("IK bone must have parent.");let l=o.a,h=o.b,c=o.c,d=o.d,u=-t.ashearX-t.arotation,m=0,g=0;switch(t.data.transformMode){case y.OnlyTranslation:m=e-t.worldX,g=s-t.worldY;break;case y.NoRotationOrReflection:let f=Math.abs(l*d-h*c)/(l*l+c*c),p=l/t.skeleton.scaleX,x=c/t.skeleton.scaleY;h=-x*f*t.skeleton.scaleX,d=p*f*t.skeleton.scaleY,u+=Math.atan2(x,p)*N.radDeg;default:let b=e-o.worldX,w=s-o.worldY,v=l*d-h*c;m=(b*d-w*h)/v-t.ax,g=(w*l-b*c)/v-t.ay}u+=Math.atan2(g,m)*N.radDeg,t.ascaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360);let k=t.ascaleX,C=t.ascaleY;if(i||r){switch(t.data.transformMode){case y.NoScale:case y.NoScaleOrReflection:m=e-t.worldX,g=s-t.worldY}let o=t.data.length*k,l=Math.sqrt(m*m+g*g);if(i&&l<o||r&&l>o&&o>1e-4){let t=(l/o-1)*n+1;k*=t,a&&(C*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*n,k,C,t.ashearX,t.ashearY)}apply2(t,e,s,i,r,a,n,o,l){let h=t.ax,c=t.ay,d=t.ascaleX,u=t.ascaleY,m=d,g=u,f=e.ascaleX,p=0,x=0,b=0;d<0?(d=-d,p=180,b=-1):(p=0,b=1),u<0&&(u=-u,b=-b),f<0?(f=-f,x=180):x=0;let w=e.ax,v=0,y=0,k=0,C=t.a,S=t.b,A=t.c,I=t.d,M=1e-4>=Math.abs(d-u);!M||a?(v=0,y=C*w+t.worldX,k=A*w+t.worldY):(y=C*w+S*(v=e.ay)+t.worldX,k=A*w+I*v+t.worldY);let T=t.parent;if(!T)throw Error("IK parent must itself have a parent.");C=T.a,S=T.b,A=T.c;let E=1/(C*(I=T.d)-S*A),F=y-T.worldX,Y=k-T.worldY,R=(F*I-Y*S)*E-h,X=(Y*C-F*A)*E-c,L=Math.sqrt(R*R+X*X),B=e.data.length*f,P,D;if(L<1e-4){this.apply1(t,s,i,!1,a,!1,l),e.updateWorldTransformWith(w,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}let V=((F=s-T.worldX)*I-(Y=i-T.worldY)*S)*E-h,O=(Y*C-F*A)*E-c,U=V*V+O*O;if(0!=o){o*=d*(f+1)*.5;let t=Math.sqrt(U),e=t-L-B*d+o;if(e>0){let s=Math.min(1,e/(2*o))-1;s=(e-o*(1-s*s))/t,V-=s*V,O-=s*O,U=V*V+O*O}}t:if(M){let t=(U-L*L-(B*=d)*B)/(2*L*B);t<-1?(t=-1,D=Math.PI*r):t>1?(t=1,D=0,a&&(m*=C=(Math.sqrt(U)/(L+B)-1)*l+1,n&&(g*=C))):D=Math.acos(t)*r,P=Math.atan2(O*(C=L+B*t)-V*(S=B*Math.sin(D)),V*C+O*S)}else{let t=(C=d*B)*C,e=(S=u*B)*S,s=Math.atan2(O,V);A=e*L*L+t*U-t*e;let i=-2*e*L,a=e-t;if((I=i*i-4*a*A)>=0){let t=Math.sqrt(I);i<0&&(t=-t);let e=(t=-(.5*(i+t)))/a,n=A/t,o=Math.abs(e)<Math.abs(n)?e:n;if(o*o<=U){P=s-Math.atan2(Y=Math.sqrt(U-o*o)*r,o),D=Math.atan2(Y/u,(o-L)/d);break t}}let n=N.PI,o=L-C,l=o*o,h=0,c=0,m=L+C,g=m*m,f=0;(A=-C*L/(t-e))>=-1&&A<=1&&((I=(F=C*Math.cos(A=Math.acos(A))+L)*F+(Y=S*Math.sin(A))*Y)<l&&(n=A,l=I,o=F,h=Y),I>g&&(c=A,g=I,m=F,f=Y)),U<=(l+g)*.5?(P=s-Math.atan2(h*r,o),D=n*r):(P=s-Math.atan2(f*r,m),D=c*r)}let W=Math.atan2(v,w)*b,z=t.arotation;(P=(P-W)*N.radDeg+p-z)>180?P-=360:P<-180&&(P+=360),t.updateWorldTransformWith(h,c,z+P*l,m,g,0,0),z=e.arotation,(D=((D+W)*N.radDeg-e.ashearX)*b+x-z)>180?D-=360:D<-180&&(D+=360),e.updateWorldTransformWith(w,v,z+D*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=[];for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw Error("Couldn't find bone ".concat(t.bones[s].name));this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw Error("Couldn't find bone ".concat(t.target.name));this.target=s}},eh=class extends ei{set target(t){this._target=t}get target(){if(this._target)return this._target;throw Error("BoneData not set.")}constructor(t){super(t,0,!1),this.bones=[],this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},ec=class extends ei{set target(t){this._target=t}get target(){if(this._target)return this._target;throw Error("SlotData not set.")}constructor(t){super(t,0,!1),this.bones=[],this._target=null,this.positionMode=k.Fixed,this.spacingMode=C.Fixed,this.rotateMode=S.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}};(o=k||(k={}))[o.Fixed=0]="Fixed",o[o.Percent=1]="Percent",(l=C||(C={}))[l.Length=0]="Length",l[l.Fixed=1]="Fixed",l[l.Percent=2]="Percent",l[l.Proportional=3]="Proportional",(h=S||(S={}))[h.Tangent=0]="Tangent",h[h.Chain=1]="Chain",h[h.ChainScale=2]="ChainScale";var ed=class{isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof t6))return;let e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;let r=this.data,a=r.rotateMode==S.Tangent,n=r.rotateMode==S.ChainScale,o=this.bones,l=o.length,h=a?l:l+1,c=_.setArraySize(this.spaces,h),d=n?this.lengths=_.setArraySize(this.lengths,l):[],u=this.spacing;switch(r.spacingMode){case C.Percent:if(n)for(let t=0,e=h-1;t<e;t++){let e=o[t],s=e.data.length;if(s<ed.epsilon)d[t]=0;else{let i=s*e.a,r=s*e.c;d[t]=Math.sqrt(i*i+r*r)}}_.arrayFill(c,1,h,u);break;case C.Proportional:let m=0;for(let t=0,e=h-1;t<e;){let e=o[t],s=e.data.length;if(s<ed.epsilon)n&&(d[t]=0),c[++t]=u;else{let i=s*e.a,r=s*e.c,a=Math.sqrt(i*i+r*r);n&&(d[t]=a),c[++t]=a,m+=a}}if(m>0){m=h/m*u;for(let t=1;t<h;t++)c[t]*=m}break;default:let g=r.spacingMode==C.Length;for(let t=0,e=h-1;t<e;){let e=o[t],s=e.data.length;if(s<ed.epsilon)n&&(d[t]=0),c[++t]=u;else{let i=s*e.a,r=s*e.c,a=Math.sqrt(i*i+r*r);n&&(d[t]=a),c[++t]=(g?s+u:u)*a/s}}}let f=this.computeWorldPositions(t,h,a),p=f[0],x=f[1],b=r.offsetRotation,w=!1;if(0==b)w=r.rotateMode==S.Chain;else{w=!1;let t=this.target.bone;b*=t.a*t.d-t.b*t.c>0?N.degRad:-N.degRad}for(let t=0,r=3;t<l;t++,r+=3){let l=o[t];l.worldX+=(p-l.worldX)*s,l.worldY+=(x-l.worldY)*i;let h=f[r],u=f[r+1],m=h-p,g=u-x;if(n){let s=d[t];if(0!=s){let t=(Math.sqrt(m*m+g*g)/s-1)*e+1;l.a*=t,l.c*=t}}if(p=h,x=u,e>0){let s=l.a,i=l.b,n=l.c,o=l.d,h=0,d=0,u=0;if(h=(a?f[r-1]:0==c[t+1]?f[r+2]:Math.atan2(g,m))-Math.atan2(n,s),w){d=Math.cos(h),u=Math.sin(h);let t=l.data.length;p+=(t*(d*s-u*n)-m)*e,x+=(t*(u*s+d*n)-g)*e}else h+=b;h>N.PI?h-=N.PI2:h<-N.PI&&(h+=N.PI2),h*=e,d=Math.cos(h),u=Math.sin(h),l.a=d*s-u*n,l.b=d*i-u*o,l.c=u*s+d*n,l.d=u*i+d*o}l.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i,r=this.target,a=this.position,n=this.spaces,o=_.setArraySize(this.positions,3*e+2),l=this.world,h=t.closed,c=t.worldVerticesLength,d=c/6,u=ed.NONE;if(!t.constantSpeed){let i,m=t.lengths,g=m[d-=h?1:2];switch(this.data.positionMode==k.Percent&&(a*=g),this.data.spacingMode){case C.Percent:i=g;break;case C.Proportional:i=g/e;break;default:i=1}l=_.setArraySize(this.world,8);for(let f=0,p=0,x=0;f<e;f++,p+=3){let e=n[f]*i,b=a+=e;if(h)(b%=g)<0&&(b+=g),x=0;else if(b<0){u!=ed.BEFORE&&(u=ed.BEFORE,t.computeWorldVertices(r,2,4,l,0,2)),this.addBeforePosition(b,l,0,o,p);continue}else if(b>g){u!=ed.AFTER&&(u=ed.AFTER,t.computeWorldVertices(r,c-6,4,l,0,2)),this.addAfterPosition(b-g,l,0,o,p);continue}for(;;x++){let t=m[x];if(!(b>t)){if(0==x)b/=t;else{let e=m[x-1];b=(b-e)/(t-e)}break}}x!=u&&(u=x,h&&x==d?(t.computeWorldVertices(r,c-4,4,l,0,2),t.computeWorldVertices(r,0,4,l,4,2)):t.computeWorldVertices(r,6*x+2,8,l,0,2)),this.addCurvePosition(b,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],o,p,s||f>0&&0==e)}return o}h?(c+=2,l=_.setArraySize(this.world,c),t.computeWorldVertices(r,2,c-4,l,0,2),t.computeWorldVertices(r,0,2,l,c-4,2),l[c-2]=l[0],l[c-1]=l[1]):(d--,c-=4,l=_.setArraySize(this.world,c),t.computeWorldVertices(r,2,c,l,0,2));let m=_.setArraySize(this.curves,d),g=0,f=l[0],p=l[1],x=0,b=0,w=0,v=0,y=0,S=0,A=0,I=0,M=0,T=0,E=0,F=0,Y=0,R=0;for(let t=0,e=2;t<d;t++,e+=6)x=l[e],b=l[e+1],w=l[e+2],v=l[e+3],y=l[e+4],S=l[e+5],A=(f-2*x+w)*.1875,I=(p-2*b+v)*.1875,M=((x-w)*3-f+y)*.09375,T=((b-v)*3-p+S)*.09375,E=2*A+M,F=2*I+T,g+=Math.sqrt((Y=(x-f)*.75+A+.16666667*M)*Y+(R=(b-p)*.75+I+.16666667*T)*R),Y+=E,R+=F,E+=M,F+=T,g+=Math.sqrt(Y*Y+R*R),Y+=E,R+=F,g+=Math.sqrt(Y*Y+R*R),Y+=E+M,R+=F+T,g+=Math.sqrt(Y*Y+R*R),m[t]=g,f=y,p=S;switch(this.data.positionMode==k.Percent&&(a*=g),this.data.spacingMode){case C.Percent:i=g;break;case C.Proportional:i=g/e;break;default:i=1}let X=this.segments,L=0;for(let t=0,r=0,d=0,k=0;t<e;t++,r+=3){let e=n[t]*i,C=a+=e;if(h)(C%=g)<0&&(C+=g),d=0;else if(C<0){this.addBeforePosition(C,l,0,o,r);continue}else if(C>g){this.addAfterPosition(C-g,l,c-4,o,r);continue}for(;;d++){let t=m[d];if(!(C>t)){if(0==d)C/=t;else{let e=m[d-1];C=(C-e)/(t-e)}break}}if(d!=u){u=d;let t=6*d;for(f=l[t],p=l[t+1],x=l[t+2],b=l[t+3],w=l[t+4],v=l[t+5],y=l[t+6],S=l[t+7],A=(f-2*x+w)*.03,I=(p-2*b+v)*.03,M=((x-w)*3-f+y)*.006,T=((b-v)*3-p+S)*.006,E=2*A+M,F=2*I+T,L=Math.sqrt((Y=(x-f)*.3+A+.16666667*M)*Y+(R=(b-p)*.3+I+.16666667*T)*R),X[0]=L,t=1;t<8;t++)Y+=E,R+=F,E+=M,F+=T,L+=Math.sqrt(Y*Y+R*R),X[t]=L;Y+=E,R+=F,L+=Math.sqrt(Y*Y+R*R),X[8]=L,Y+=E+M,R+=F+T,L+=Math.sqrt(Y*Y+R*R),X[9]=L,k=0}for(C*=L;;k++){let t=X[k];if(!(C>t)){if(0==k)C/=t;else{let e=X[k-1];C=k+(C-e)/(t-e)}break}}this.addCurvePosition(.1*C,f,p,x,b,w,v,y,S,o,r,s||t>0&&0==e)}return o}addBeforePosition(t,e,s,i,r){let a=e[s],n=e[s+1],o=e[s+2]-a,l=Math.atan2(e[s+3]-n,o);i[r]=a+t*Math.cos(l),i[r+1]=n+t*Math.sin(l),i[r+2]=l}addAfterPosition(t,e,s,i,r){let a=e[s+2],n=e[s+3],o=a-e[s],l=Math.atan2(n-e[s+1],o);i[r]=a+t*Math.cos(l),i[r+1]=n+t*Math.sin(l),i[r+2]=l}addCurvePosition(t,e,s,i,r,a,n,o,l,h,c,d){if(0==t||isNaN(t)){h[c]=e,h[c+1]=s,h[c+2]=Math.atan2(r-s,i-e);return}let u=t*t,m=u*t,g=1-t,f=g*g,p=f*g,x=g*t,b=3*x,w=g*b,v=b*t,y=e*p+i*w+a*v+o*m,k=s*p+r*w+n*v+l*m;h[c]=y,h[c+1]=k,d&&(t<.001?h[c+2]=Math.atan2(r-s,i-e):h[c+2]=Math.atan2(k-(s*f+r*x*2+n*u),y-(e*f+i*x*2+a*u)))}constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=[],this.positions=[],this.world=[],this.curves=[],this.lengths=[],this.segments=[],this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.bones=[];for(let s=0,i=t.bones.length;s<i;s++){let i=e.findBone(t.bones[s].name);if(!i)throw Error("Couldn't find bone ".concat(t.bones[s].name,"."));this.bones.push(i)}let s=e.findSlot(t.target.name);if(!s)throw Error("Couldn't find target bone ".concat(t.target.name));this.target=s,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}},eu=ed;eu.NONE=-1,eu.BEFORE=-2,eu.AFTER=-3,eu.epsilon=1e-5;var em=class{getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof $&&this.attachment instanceof $&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=[],!t)throw Error("data cannot be null.");if(!e)throw Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new V,this.darkColor=t.darkColor?new V:null,this.setToSetupPose()}},eg=class{isActive(){return this.active}update(){(0!=this.mixRotate||0!=this.mixX||0!=this.mixY||0!=this.mixScaleX||0!=this.mixScaleY||0!=this.mixShearY)&&(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,n=0!=e||0!=s,o=this.target,l=o.a,h=o.b,c=o.c,d=o.d,u=l*d-h*c>0?N.degRad:-N.degRad,m=this.data.offsetRotation*u,g=this.data.offsetShearY*u,f=this.bones;for(let u=0,p=f.length;u<p;u++){let p=f[u];if(0!=t){let e=p.a,s=p.b,i=p.c,r=p.d,a=Math.atan2(c,l)-Math.atan2(i,e)+m;a>N.PI?a-=N.PI2:a<-N.PI&&(a+=N.PI2);let n=Math.cos(a*=t),o=Math.sin(a);p.a=n*e-o*i,p.b=n*s-o*r,p.c=o*e+n*i,p.d=o*s+n*r}if(n){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),p.worldX+=(t.x-p.worldX)*e,p.worldY+=(t.y-p.worldY)*s}if(0!=i){let t=Math.sqrt(p.a*p.a+p.c*p.c);0!=t&&(t=(t+(Math.sqrt(l*l+c*c)-t+this.data.offsetScaleX)*i)/t),p.a*=t,p.c*=t}if(0!=r){let t=Math.sqrt(p.b*p.b+p.d*p.d);0!=t&&(t=(t+(Math.sqrt(h*h+d*d)-t+this.data.offsetScaleY)*r)/t),p.b*=t,p.d*=t}if(a>0){let t=p.b,e=p.d,s=Math.atan2(e,t),i=Math.atan2(d,h)-Math.atan2(c,l)-(s-Math.atan2(p.c,p.a));i>N.PI?i-=N.PI2:i<-N.PI&&(i+=N.PI2),i=s+(i+g)*a;let r=Math.sqrt(t*t+e*e);p.b=Math.cos(i)*r,p.d=Math.sin(i)*r}p.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,n=0!=e||0!=s,o=this.target,l=o.a,h=o.b,c=o.c,d=o.d,u=l*d-h*c>0?N.degRad:-N.degRad,m=this.data.offsetRotation*u,g=this.data.offsetShearY*u,f=this.bones;for(let u=0,p=f.length;u<p;u++){let p=f[u];if(0!=t){let e=p.a,s=p.b,i=p.c,r=p.d,a=Math.atan2(c,l)+m;a>N.PI?a-=N.PI2:a<-N.PI&&(a+=N.PI2);let n=Math.cos(a*=t),o=Math.sin(a);p.a=n*e-o*i,p.b=n*s-o*r,p.c=o*e+n*i,p.d=o*s+n*r}if(n){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),p.worldX+=t.x*e,p.worldY+=t.y*s}if(0!=i){let t=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*i+1;p.a*=t,p.c*=t}if(0!=r){let t=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleY)*r+1;p.b*=t,p.d*=t}if(a>0){let t=Math.atan2(d,h)-Math.atan2(c,l);t>N.PI?t-=N.PI2:t<-N.PI&&(t+=N.PI2);let e=p.b,s=p.d;t=Math.atan2(s,e)+(t-N.PI/2+g)*a;let i=Math.sqrt(e*e+s*s);p.b=Math.cos(t)*i,p.d=Math.sin(t)*i}p.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,n=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation;if(0!=t){let e=n.arotation-c+this.data.offsetRotation;e-=(16384-(16384.499999999996-e/360|0))*360,c+=e*t}let d=h.ax,u=h.ay;d+=(n.ax-d+this.data.offsetX)*e,u+=(n.ay-u+this.data.offsetY)*s;let m=h.ascaleX,g=h.ascaleY;0!=i&&0!=m&&(m=(m+(n.ascaleX-m+this.data.offsetScaleX)*i)/m),0!=r&&0!=g&&(g=(g+(n.ascaleY-g+this.data.offsetScaleY)*r)/g);let f=h.ashearY;if(0!=a){let t=n.ashearY-f+this.data.offsetShearY;t-=(16384-(16384.499999999996-t/360|0))*360,f+=t*a}h.updateWorldTransformWith(d,u,c,m,g,h.ashearX,f)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,n=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation+(n.arotation+this.data.offsetRotation)*t,d=h.ax+(n.ax+this.data.offsetX)*e,u=h.ay+(n.ay+this.data.offsetY)*s,m=h.ascaleX*((n.ascaleX-1+this.data.offsetScaleX)*i+1),g=h.ascaleY*((n.ascaleY-1+this.data.offsetScaleY)*r+1),f=h.ashearY+(n.ashearY+this.data.offsetShearY)*a;h.updateWorldTransformWith(d,u,c,m,g,h.ashearX,f)}}constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new H,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=[];for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw Error("Couldn't find bone ".concat(t.bones[s].name,"."));this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw Error("Couldn't find target bone ".concat(t.target.name,"."));this.target=s}},ef=class{get scaleY(){return ef.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,s=this.skin.bones.length;e<s;e++){let s=this.bones[t[e].index];do s.sorted=!1,s.active=!0,s=s.parent;while(s)}}let e=this.ikConstraints,s=this.transformConstraints,i=this.pathConstraints,r=e.length,a=s.length,n=i.length,o=r+a+n;t:for(let t=0;t<o;t++){for(let s=0;s<r;s++){let i=e[s];if(i.data.order==t){this.sortIkConstraint(i);continue t}}for(let e=0;e<a;e++){let i=s[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<n;e++){let s=i[e];if(s.data.order==t){this.sortPathConstraint(s);continue t}}}for(let e=0,s=t.length;e<s;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&_.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{let e=s[s.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(i.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&_.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,i);let r=e.getAttachment();r instanceof t6&&this.sortPathConstraintAttachmentWith(r,i);let a=t.bones,n=a.length;for(let t=0;t<n;t++)this.sortBone(a[t]);this._updateCache.push(t);for(let t=0;t<n;t++)this.sortReset(a[t].children);for(let t=0;t<n;t++)a[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&_.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){let s=e[t];this.sortBone(s.parent),this.sortBone(s)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,s){let i=t.attachments[e];if(i)for(let t in i)this.sortPathConstraintAttachmentWith(i[t],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof t6))return;let s=t.bones;if(s){let t=this.bones;for(let e=0,i=s.length;e<i;){let i=s[e++];for(i+=e;e<i;)this.sortBone(t[s[e++]])}}else this.sortBone(e)}sortBone(t){if(!t||t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){let s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY}let e=this._updateCache;for(let t=0,s=e.length;t<s;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw Error("Root bone must not be null.");let s=t.a,i=t.b,r=t.c,a=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=r*this.x+a*this.y+t.worldY;let n=e.rotation+90+e.shearY,o=N.cosDeg(e.rotation+e.shearX)*e.scaleX,l=N.cosDeg(n)*e.scaleY,h=N.sinDeg(e.rotation+e.shearX)*e.scaleX,c=N.sinDeg(n)*e.scaleY;e.a=(s*o+i*h)*this.scaleX,e.b=(s*l+i*c)*this.scaleX,e.c=(r*o+a*h)*this.scaleY,e.d=(r*l+a*c)*this.scaleY;let d=this._updateCache;for(let t=0,s=d.length;t<s;t++){let s=d[t];s!=e&&s.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,s=e.length;t<s;t++){let s=e[t];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}let s=this.transformConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY,e.mixScaleX=i.mixScaleX,e.mixScaleY=i.mixScaleY,e.mixShearY=i.mixShearY}let i=this.pathConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.position=s.position,e.spacing=s.spacing,e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY}}setSlotsToSetupPose(){let t=this.slots;_.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findSlot(t){if(!t)throw Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t){if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s],r=i.data.attachmentName;if(r){let e=t.getAttachment(s,r);e&&i.setAttachment(e)}}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let s=this.data.findSlot(t);if(!s)throw Error("Can't find slot with name ".concat(t));return this.getAttachment(s.index,e)}getAttachment(t,e){if(!e)throw Error("attachmentName cannot be null.");if(this.skin){let s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw Error("slotName cannot be null.");let s=this.slots;for(let i=0,r=s.length;i<r;i++){let r=s[i];if(r.data.name==t){let s=null;if(e&&!(s=this.getAttachment(i,e)))throw Error("Attachment not found: "+e+", for slot: "+t);r.setAttachment(s);return}}throw Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}getBoundsRect(){let t=new H,e=new H;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[,,];if(!t)throw Error("offset cannot be null.");if(!e)throw Error("size cannot be null.");let i=this.drawOrder,r=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=i.length;t<e;t++){let e=i[t];if(!e.bone.active)continue;let l=0,h=null,c=e.getAttachment();if(c instanceof t9?(l=8,h=_.setArraySize(s,l,0),c.computeWorldVertices(e,h,0,2)):c instanceof t4&&(l=c.worldVerticesLength,h=_.setArraySize(s,l,0),c.computeWorldVertices(e,0,l,h,0,2)),h)for(let t=0,e=h.length;t<e;t+=2){let e=h[t],s=h[t+1];r=Math.min(r,e),a=Math.min(a,s),n=Math.max(n,e),o=Math.max(o,s)}}t.set(r,a),e.set(n-r,o-a)}constructor(t){if(this._updateCache=[],this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!t)throw Error("data cannot be null.");this.data=t,this.bones=[];for(let e=0;e<t.bones.length;e++){let s,i=t.bones[e];if(i.parent){let t=this.bones[i.parent.index];s=new es(i,this,t),t.children.push(s)}else s=new es(i,this,null);this.bones.push(s)}this.slots=[],this.drawOrder=[];for(let e=0;e<t.slots.length;e++){let s=t.slots[e],i=this.bones[s.boneData.index],r=new em(s,i);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=[];for(let e=0;e<t.ikConstraints.length;e++){let s=t.ikConstraints[e];this.ikConstraints.push(new el(s,this))}this.transformConstraints=[];for(let e=0;e<t.transformConstraints.length;e++){let s=t.transformConstraints[e];this.transformConstraints.push(new eg(s,this))}this.pathConstraints=[];for(let e=0;e<t.pathConstraints.length;e++){let s=t.pathConstraints[e];this.pathConstraints.push(new eu(s,this))}this.color=new V(1,1,1,1),this.updateCache()}},ep=ef;ep.yDown=!1;var ex=class{findBone(t){if(!t)throw Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSlot(t){if(!t)throw Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSkin(t){if(!t)throw Error("skinName cannot be null.");let e=this.skins;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw Error("eventDataName cannot be null.");let e=this.events;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw Error("animationName cannot be null.");let e=this.animations;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}constructor(){this.name=null,this.bones=[],this.slots=[],this.skins=[],this.defaultSkin=null,this.events=[],this.animations=[],this.ikConstraints=[],this.transformConstraints=[],this.pathConstraints=[],this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}},eb=class{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},ew=class{setAttachment(t,e,s){if(!s)throw Error("attachment cannot be null.");let i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];s.attachment&&(s.attachment instanceof t4?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(t,e){let s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){let s=this.attachments[t];s&&delete s[e]}getAttachments(){let t=[];for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let i in s){let r=s[i];r&&t.push(new eb(e,i,r))}}return t}getAttachmentsForSlot(t,e){let s=this.attachments[t];if(s)for(let i in s){let r=s[i];r&&e.push(new eb(t,i,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){let r=t.slots[i],a=r.getAttachment();if(a&&s<e.attachments.length){let t=e.attachments[s];for(let e in t)if(a==t[e]){let t=this.getAttachment(s,e);t&&r.setAttachment(t);break}}s++}}constructor(t){if(this.attachments=[],this.bones=[],this.constraints=[],!t)throw Error("name cannot be null.");this.name=t}},ev=class{constructor(t,e,s){if(this.index=0,this.color=new V(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=A.Normal,t<0)throw Error("index must be >= 0.");if(!e)throw Error("name cannot be null.");if(!s)throw Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}};(c=A||(A={}))[c.Normal=0]="Normal",c[c.Additive=1]="Additive",c[c.Multiply=2]="Multiply",c[c.Screen=3]="Screen";var ey=class extends ei{set target(t){this._target=t}get target(){if(this._target)return this._target;throw Error("BoneData not set.")}constructor(t){super(t,0,!1),this.bones=[],this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},ek=class{readSkeletonData(t){let e=this.scale,s=new ex;s.name="";let i=new eC(t),r=i.readInt32(),a=i.readInt32();s.hash=0==a&&0==r?null:a.toString(16)+r.toString(16),s.version=i.readString(),s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();let n=i.readBoolean();n&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());let o=0;o=i.readInt(!0);for(let t=0;t<o;t++){let t=i.readString();if(!t)throw Error("String in string table must not be null.");i.strings.push(t)}o=i.readInt(!0);for(let t=0;t<o;t++){let r=i.readString();if(!r)throw Error("Bone name must not be null.");let a=0==t?null:s.bones[i.readInt(!0)],o=new ee(t,r,a);o.rotation=i.readFloat(),o.x=i.readFloat()*e,o.y=i.readFloat()*e,o.scaleX=i.readFloat(),o.scaleY=i.readFloat(),o.shearX=i.readFloat(),o.shearY=i.readFloat(),o.length=i.readFloat()*e,o.transformMode=i.readInt(!0),o.skinRequired=i.readBoolean(),n&&V.rgba8888ToColor(o.color,i.readInt32()),s.bones.push(o)}o=i.readInt(!0);for(let t=0;t<o;t++){let e=i.readString();if(!e)throw Error("Slot name must not be null.");let r=s.bones[i.readInt(!0)],a=new ev(t,e,r);V.rgba8888ToColor(a.color,i.readInt32());let n=i.readInt32();-1!=n&&V.rgb888ToColor(a.darkColor=new V,n),a.attachmentName=i.readStringRef(),a.blendMode=i.readInt(!0),s.slots.push(a)}o=i.readInt(!0);for(let t=0,r;t<o;t++){let t=i.readString();if(!t)throw Error("IK constraint data name must not be null.");let a=new eh(t);a.order=i.readInt(!0),a.skinRequired=i.readBoolean(),r=i.readInt(!0);for(let t=0;t<r;t++)a.bones.push(s.bones[i.readInt(!0)]);a.target=s.bones[i.readInt(!0)],a.mix=i.readFloat(),a.softness=i.readFloat()*e,a.bendDirection=i.readByte(),a.compress=i.readBoolean(),a.stretch=i.readBoolean(),a.uniform=i.readBoolean(),s.ikConstraints.push(a)}o=i.readInt(!0);for(let t=0,r;t<o;t++){let t=i.readString();if(!t)throw Error("Transform constraint data name must not be null.");let a=new ey(t);a.order=i.readInt(!0),a.skinRequired=i.readBoolean(),r=i.readInt(!0);for(let t=0;t<r;t++)a.bones.push(s.bones[i.readInt(!0)]);a.target=s.bones[i.readInt(!0)],a.local=i.readBoolean(),a.relative=i.readBoolean(),a.offsetRotation=i.readFloat(),a.offsetX=i.readFloat()*e,a.offsetY=i.readFloat()*e,a.offsetScaleX=i.readFloat(),a.offsetScaleY=i.readFloat(),a.offsetShearY=i.readFloat(),a.mixRotate=i.readFloat(),a.mixX=i.readFloat(),a.mixY=i.readFloat(),a.mixScaleX=i.readFloat(),a.mixScaleY=i.readFloat(),a.mixShearY=i.readFloat(),s.transformConstraints.push(a)}o=i.readInt(!0);for(let t=0,r;t<o;t++){let t=i.readString();if(!t)throw Error("Path constraint data name must not be null.");let a=new ec(t);a.order=i.readInt(!0),a.skinRequired=i.readBoolean(),r=i.readInt(!0);for(let t=0;t<r;t++)a.bones.push(s.bones[i.readInt(!0)]);a.target=s.slots[i.readInt(!0)],a.positionMode=i.readInt(!0),a.spacingMode=i.readInt(!0),a.rotateMode=i.readInt(!0),a.offsetRotation=i.readFloat(),a.position=i.readFloat(),a.positionMode==k.Fixed&&(a.position*=e),a.spacing=i.readFloat(),(a.spacingMode==C.Length||a.spacingMode==C.Fixed)&&(a.spacing*=e),a.mixRotate=i.readFloat(),a.mixX=i.readFloat(),a.mixY=i.readFloat(),s.pathConstraints.push(a)}let l=this.readSkin(i,s,!0,n);l&&(s.defaultSkin=l,s.skins.push(l));{let t=s.skins.length;for(_.setArraySize(s.skins,o=t+i.readInt(!0));t<o;t++){let e=this.readSkin(i,s,!1,n);if(!e)throw Error("readSkin() should not have returned null.");s.skins[t]=e}}o=this.linkedMeshes.length;for(let t=0;t<o;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw Error("Not skin found for linked mesh.");if(!e.parent)throw Error("Linked mesh parent must not be null");let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw Error("Parent mesh not found: ".concat(e.parent));e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,o=i.readInt(!0);for(let t=0;t<o;t++){let t=i.readStringRef();if(!t)throw Error();let e=new eo(t);e.intValue=i.readInt(!1),e.floatValue=i.readFloat(),e.stringValue=i.readString(),e.audioPath=i.readString(),e.audioPath&&(e.volume=i.readFloat(),e.balance=i.readFloat()),s.events.push(e)}o=i.readInt(!0);for(let t=0;t<o;t++){let t=i.readString();if(!t)throw Error("Animatio name must not be null.");s.animations.push(this.readAnimation(i,t,s))}return s}readSkin(t,e,s,i){let r=null,a=0;if(s){if(0==(a=t.readInt(!0)))return null;r=new ew("default")}else{let s=t.readStringRef();if(!s)throw Error("Skin name must not be null.");(r=new ew(s)).bones.length=t.readInt(!0);for(let s=0,i=r.bones.length;s<i;s++)r.bones[s]=e.bones[t.readInt(!0)];for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);a=t.readInt(!0)}for(let s=0;s<a;s++){let s=t.readInt(!0);for(let a=0,n=t.readInt(!0);a<n;a++){let a=t.readStringRef();if(!a)throw Error("Attachment name must not be null");let n=this.readAttachment(t,e,r,s,a,i);n&&r.setAttachment(s,a,n)}}return r}readAttachment(t,e,s,i,r,a){let n=this.scale,o=t.readStringRef();switch(o||(o=r),t.readByte()){case I.Region:{let e=t.readStringRef(),i=t.readFloat(),r=t.readFloat(),a=t.readFloat(),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readInt32(),m=this.readSequence(t);e||(e=o);let g=this.attachmentLoader.newRegionAttachment(s,o,e,m);if(!g)return null;return g.path=e,g.x=r*n,g.y=a*n,g.scaleX=l,g.scaleY=h,g.rotation=i,g.width=c*n,g.height=d*n,V.rgba8888ToColor(g.color,u),g.sequence=m,null==m&&g.updateRegion(),g}case I.BoundingBox:{let e=t.readInt(!0),i=this.readVertices(t,e),r=a?t.readInt32():0,n=this.attachmentLoader.newBoundingBoxAttachment(s,o);if(!n)return null;return n.worldVerticesLength=e<<1,n.vertices=i.vertices,n.bones=i.bones,a&&V.rgba8888ToColor(n.color,r),n}case I.Mesh:{let e=t.readStringRef(),i=t.readInt32(),r=t.readInt(!0),l=this.readFloatArray(t,r<<1,1),h=this.readShortArray(t),c=this.readVertices(t,r),d=t.readInt(!0),u=this.readSequence(t),m=[],g=0,f=0;a&&(m=this.readShortArray(t),g=t.readFloat(),f=t.readFloat()),e||(e=o);let p=this.attachmentLoader.newMeshAttachment(s,o,e,u);if(!p)return null;return p.path=e,V.rgba8888ToColor(p.color,i),p.bones=c.bones,p.vertices=c.vertices,p.worldVerticesLength=r<<1,p.triangles=h,p.regionUVs=l,null==u&&p.updateRegion(),p.hullLength=d<<1,p.sequence=u,a&&(p.edges=m,p.width=g*n,p.height=f*n),p}case I.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),l=t.readStringRef(),h=t.readStringRef(),c=t.readBoolean(),d=this.readSequence(t),u=0,m=0;a&&(u=t.readFloat(),m=t.readFloat()),e||(e=o);let g=this.attachmentLoader.newMeshAttachment(s,o,e,d);if(!g)return null;return g.path=e,V.rgba8888ToColor(g.color,r),g.sequence=d,a&&(g.width=u*n,g.height=m*n),this.linkedMeshes.push(new eS(g,l,i,h,c)),g}case I.Path:{let e=t.readBoolean(),i=t.readBoolean(),r=t.readInt(!0),l=this.readVertices(t,r),h=_.newArray(r/3,0);for(let e=0,s=h.length;e<s;e++)h[e]=t.readFloat()*n;let c=a?t.readInt32():0,d=this.attachmentLoader.newPathAttachment(s,o);if(!d)return null;return d.closed=e,d.constantSpeed=i,d.worldVerticesLength=r<<1,d.vertices=l.vertices,d.bones=l.bones,d.lengths=h,a&&V.rgba8888ToColor(d.color,c),d}case I.Point:{let e=t.readFloat(),i=t.readFloat(),r=t.readFloat(),l=a?t.readInt32():0,h=this.attachmentLoader.newPointAttachment(s,o);if(!h)return null;return h.x=i*n,h.y=r*n,h.rotation=e,a&&V.rgba8888ToColor(h.color,l),h}case I.Clipping:{let i=t.readInt(!0),r=t.readInt(!0),n=this.readVertices(t,r),l=a?t.readInt32():0,h=this.attachmentLoader.newClippingAttachment(s,o);if(!h)return null;return h.endSlot=e.slots[i],h.worldVerticesLength=r<<1,h.vertices=n.vertices,h.bones=n.bones,a&&V.rgba8888ToColor(h.color,l),h}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new te(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let s=this.scale,i=new eA;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,e<<1,s),i;let r=[],a=[];for(let i=0;i<e;i++){let e=t.readInt(!0);a.push(e);for(let i=0;i<e;i++)a.push(t.readInt(!0)),r.push(t.readFloat()*s),r.push(t.readFloat()*s),r.push(t.readFloat())}return i.vertices=_.toFloatArray(r),i.bones=a,i}readFloatArray(t,e,s){let i=Array(e);if(1==s)for(let s=0;s<e;s++)i[s]=t.readFloat();else for(let r=0;r<e;r++)i[r]=t.readFloat()*s;return i}readShortArray(t){let e=t.readInt(!0),s=Array(e);for(let i=0;i<e;i++)s[i]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);let i=[],r=this.scale;new V,new V;for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0);for(let s=0,r=t.readInt(!0);s<r;s++){let s=t.readByte(),r=t.readInt(!0),a=r-1;switch(s){case eO:{let s=new tS(r,e);for(let e=0;e<r;e++)s.setFrame(e,t.readFloat(),t.readStringRef());i.push(s);break}case eN:{let s=t.readInt(!0),n=new tw(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c,d),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;switch(t.readByte()){case eK:n.setStepped(e);break;case eJ:eT(t,n,s++,e,0,o,i,l,r,1),eT(t,n,s++,e,1,o,i,h,a,1),eT(t,n,s++,e,2,o,i,c,u,1),eT(t,n,s++,e,3,o,i,d,m,1)}o=i,l=r,h=a,c=u,d=m}i.push(n);break}case eU:{let s=t.readInt(!0),n=new tv(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;switch(t.readByte()){case eK:n.setStepped(e);break;case eJ:eT(t,n,s++,e,0,o,i,l,r,1),eT(t,n,s++,e,1,o,i,h,a,1),eT(t,n,s++,e,2,o,i,c,d,1)}o=i,l=r,h=a,c=d}i.push(n);break}case eW:{let s=t.readInt(!0),n=new tk(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c,d,u,m,g),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255;switch(t.readByte()){case eK:n.setStepped(e);break;case eJ:eT(t,n,s++,e,0,o,i,l,r,1),eT(t,n,s++,e,1,o,i,h,a,1),eT(t,n,s++,e,2,o,i,c,f,1),eT(t,n,s++,e,3,o,i,d,p,1),eT(t,n,s++,e,4,o,i,u,x,1),eT(t,n,s++,e,5,o,i,m,b,1),eT(t,n,s++,e,6,o,i,g,w,1)}o=i,l=r,h=a,c=f,d=p,u=x,m=b,g=w}i.push(n);break}case ez:{let s=t.readInt(!0),n=new tC(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c,d,u,m),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case eK:n.setStepped(e);break;case eJ:eT(t,n,s++,e,0,o,i,l,r,1),eT(t,n,s++,e,1,o,i,h,a,1),eT(t,n,s++,e,2,o,i,c,g,1),eT(t,n,s++,e,3,o,i,d,f,1),eT(t,n,s++,e,4,o,i,u,p,1),eT(t,n,s++,e,5,o,i,m,x,1)}o=i,l=r,h=a,c=g,d=f,u=p,m=x}i.push(n);break}case eq:{let s=new ty(r,t.readInt(!0),e),n=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,i=0;s.setFrame(e,n,o),e!=a;e++){let r=t.readFloat(),a=t.readUnsignedByte()/255;switch(t.readByte()){case eK:s.setStepped(e);break;case eJ:eT(t,s,i++,e,0,n,r,o,a,1)}n=r,o=a}i.push(s)}}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0);for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readByte(),a=t.readInt(!0),n=t.readInt(!0);switch(s){case eE:i.push(eI(t,new th(a,n,e),1));break;case eF:i.push(eM(t,new tc(a,n,e),r));break;case eY:i.push(eI(t,new td(a,n,e),r));break;case eR:i.push(eI(t,new tu(a,n,e),r));break;case eX:i.push(eM(t,new tm(a,n,e),1));break;case eL:i.push(eI(t,new tg(a,n,e),1));break;case eB:i.push(eI(t,new tf(a,n,e),1));break;case eP:i.push(eM(t,new tp(a,n,e),1));break;case eD:i.push(eI(t,new tx(a,n,e),1));break;case eV:i.push(eI(t,new tb(a,n,e),1))}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),a=s-1,n=new tF(s,t.readInt(!0),e),o=t.readFloat(),l=t.readFloat(),h=t.readFloat()*r;for(let e=0,s=0;n.setFrame(e,o,l,h,t.readByte(),t.readBoolean(),t.readBoolean()),e!=a;e++){let i=t.readFloat(),a=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case eK:n.setStepped(e);break;case eJ:eT(t,n,s++,e,0,o,i,l,a,1),eT(t,n,s++,e,1,o,i,h,c,r)}o=i,l=a,h=c}i.push(n)}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),r=s-1,a=new tY(s,t.readInt(!0),e),n=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat();for(let e=0,s=0;a.setFrame(e,n,o,l,h,c,d,u),e!=r;e++){let i=t.readFloat(),r=t.readFloat(),m=t.readFloat(),g=t.readFloat(),f=t.readFloat(),p=t.readFloat(),x=t.readFloat();switch(t.readByte()){case eK:a.setStepped(e);break;case eJ:eT(t,a,s++,e,0,n,i,o,r,1),eT(t,a,s++,e,1,n,i,l,m,1),eT(t,a,s++,e,2,n,i,h,g,1),eT(t,a,s++,e,3,n,i,c,f,1),eT(t,a,s++,e,4,n,i,d,p,1),eT(t,a,s++,e,5,n,i,u,x,1)}n=i,o=r,l=m,h=g,c=f,d=p,u=x}i.push(a)}for(let e=0,a=t.readInt(!0);e<a;e++){let e=t.readInt(!0),a=s.pathConstraints[e];for(let s=0,n=t.readInt(!0);s<n;s++)switch(t.readByte()){case eG:i.push(eI(t,new tR(t.readInt(!0),t.readInt(!0),e),a.positionMode==k.Fixed?r:1));break;case eH:i.push(eI(t,new tX(t.readInt(!0),t.readInt(!0),e),a.spacingMode==C.Length||a.spacingMode==C.Fixed?r:1));break;case eZ:let s=new tL(t.readInt(!0),t.readInt(!0),e),n=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat();for(let e=0,i=0,r=s.getFrameCount()-1;s.setFrame(e,n,o,l,h),e!=r;e++){let r=t.readFloat(),a=t.readFloat(),c=t.readFloat(),d=t.readFloat();switch(t.readByte()){case eK:s.setStepped(e);break;case eJ:eT(t,s,i++,e,0,n,r,o,a,1),eT(t,s,i++,e,1,n,r,l,c,1),eT(t,s,i++,e,2,n,r,h,d,1)}n=r,o=a,l=c,h=d}i.push(s)}}for(let e=0,a=t.readInt(!0);e<a;e++){let e=s.skins[t.readInt(!0)];for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readInt(!0);for(let a=0,n=t.readInt(!0);a<n;a++){let a=t.readStringRef();if(!a)throw Error("attachmentName must not be null.");let n=e.getAttachment(s,a),o=t.readByte(),l=t.readInt(!0),h=l-1;switch(o){case e_:{let e=n.bones,a=n.vertices,o=e?a.length/3*2:a.length,c=t.readInt(!0),d=new tA(l,c,s,n),u=t.readFloat();for(let s=0,i=0;;s++){let n;let l=t.readInt(!0);if(0==l)n=e?_.newFloatArray(o):a;else{n=_.newFloatArray(o);let s=t.readInt(!0);if(l+=s,1==r)for(let e=s;e<l;e++)n[e]=t.readFloat();else for(let e=s;e<l;e++)n[e]=t.readFloat()*r;if(!e)for(let t=0,e=n.length;t<e;t++)n[t]+=a[t]}if(d.setFrame(s,u,n),s==h)break;let c=t.readFloat();switch(t.readByte()){case eK:d.setStepped(s);break;case eJ:eT(t,d,i++,s,0,u,c,0,1,1)}u=c}i.push(d);break}case ej:{let e=new tP(l,s,n);for(let s=0;s<l;s++){let i=t.readFloat(),r=t.readInt32();e.setFrame(s,i,ts[15&r],r>>4,t.readFloat())}i.push(e)}}}}}let a=t.readInt(!0);if(a>0){let e=new tE(a),r=s.slots.length;for(let s=0;s<a;s++){let i=t.readFloat(),a=t.readInt(!0),n=_.newArray(r,0);for(let t=r-1;t>=0;t--)n[t]=-1;let o=_.newArray(r-a,0),l=0,h=0;for(let e=0;e<a;e++){let e=t.readInt(!0);for(;l!=e;)o[h++]=l++;n[l+t.readInt(!0)]=l++}for(;l<r;)o[h++]=l++;for(let t=r-1;t>=0;t--)-1==n[t]&&(n[t]=o[--h]);e.setFrame(s,i,n)}i.push(e)}let n=t.readInt(!0);if(n>0){let e=new tM(n);for(let i=0;i<n;i++){let r=t.readFloat(),a=s.events[t.readInt(!0)],n=new en(r,a);n.intValue=t.readInt(!1),n.floatValue=t.readFloat(),n.stringValue=t.readBoolean()?t.readString():a.stringValue,n.data.audioPath&&(n.volume=t.readFloat(),n.balance=t.readFloat()),e.setFrame(i,n)}i.push(e)}let o=0;for(let t=0,e=i.length;t<e;t++)o=Math.max(o,i[t].getDuration());return new ti(e,i,o)}constructor(t){this.scale=1,this.linkedMeshes=[],this.attachmentLoader=t}},eC=class{readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=127&e;return(128&e)!=0&&(s|=(127&(e=this.readByte()))<<7,(128&e)!=0&&(s|=(127&(e=this.readByte()))<<14,(128&e)!=0&&(s|=(127&(e=this.readByte()))<<21,(128&e)!=0&&(s|=(127&(e=this.readByte()))<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),s+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),s+=3;break;default:e+=String.fromCharCode(t),s++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}constructor(t,e=[],s=0,i=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=i}},eS=class{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}},eA=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}};function eI(t,e,s){let i=t.readFloat(),r=t.readFloat()*s;for(let a=0,n=0,o=e.getFrameCount()-1;e.setFrame(a,i,r),a!=o;a++){let o=t.readFloat(),l=t.readFloat()*s;switch(t.readByte()){case eK:e.setStepped(a);break;case eJ:eT(t,e,n++,a,0,i,o,r,l,s)}i=o,r=l}return e}function eM(t,e,s){let i=t.readFloat(),r=t.readFloat()*s,a=t.readFloat()*s;for(let n=0,o=0,l=e.getFrameCount()-1;e.setFrame(n,i,r,a),n!=l;n++){let l=t.readFloat(),h=t.readFloat()*s,c=t.readFloat()*s;switch(t.readByte()){case eK:e.setStepped(n);break;case eJ:eT(t,e,o++,n,0,i,l,r,h,s),eT(t,e,o++,n,1,i,l,a,c,s)}i=l,r=h,a=c}return e}function eT(t,e,s,i,r,a,n,o,l,h){e.setBezier(s,i,r,a,o,t.readFloat(),t.readFloat()*h,t.readFloat(),t.readFloat()*h,n,l)}(d=I||(I={}))[d.Region=0]="Region",d[d.BoundingBox=1]="BoundingBox",d[d.Mesh=2]="Mesh",d[d.LinkedMesh=3]="LinkedMesh",d[d.Path=4]="Path",d[d.Point=5]="Point",d[d.Clipping=6]="Clipping";var eE=0,eF=1,eY=2,eR=3,eX=4,eL=5,eB=6,eP=7,eD=8,eV=9,eO=0,eN=1,eU=2,eW=3,ez=4,eq=5,e_=0,ej=1,eG=0,eH=1,eZ=2,eK=1,eJ=2,eQ=class{update(t,e){if(!t)throw Error("skeleton cannot be null.");let s=this.boundingBoxes,i=this.polygons,r=this.polygonPool,a=t.slots,n=a.length;s.length=0,r.freeAll(i),i.length=0;for(let t=0;t<n;t++){let e=a[t];if(!e.bone.active)continue;let n=e.getAttachment();if(n instanceof tK){s.push(n);let t=r.obtain();t.length!=n.worldVerticesLength&&(t=_.newFloatArray(n.worldVerticesLength)),i.push(t),n.computeWorldVertices(e,0,n.worldVerticesLength,t,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons;for(let a=0,n=r.length;a<n;a++){let n=r[a];for(let r=0,a=n.length;r<a;r+=2){let a=n[r],o=n[r+1];t=Math.min(t,a),e=Math.min(e,o),s=Math.max(s,a),i=Math.max(i,o)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,i){let r=this.minX,a=this.minY,n=this.maxX,o=this.maxY;if(t<=r&&s<=r||e<=a&&i<=a||t>=n&&s>=n||e>=o&&i>=o)return!1;let l=(i-e)/(s-t),h=l*(r-t)+e;if(h>a&&h<o||(h=l*(n-t)+e)>a&&h<o)return!0;let c=(a-e)/l+t;return c>r&&c<n||(c=(o-e)/l+t)>r&&c<n}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let s=this.polygons;for(let i=0,r=s.length;i<r;i++)if(this.containsPointPolygon(s[i],t,e))return this.boundingBoxes[i];return null}containsPointPolygon(t,e,s){let i=t.length,r=i-2,a=!1;for(let n=0;n<i;n+=2){let i=t[n+1],o=t[r+1];if(i<s&&o>=s||o<s&&i>=s){let l=t[n];l+(s-i)/(o-i)*(t[r]-l)<e&&(a=!a)}r=n}return a}intersectsSegment(t,e,s,i){let r=this.polygons;for(let a=0,n=r.length;a<n;a++)if(this.intersectsSegmentPolygon(r[a],t,e,s,i))return this.boundingBoxes[a];return null}intersectsSegmentPolygon(t,e,s,i,r){let a=t.length,n=e-i,o=s-r,l=e*r-s*i,h=t[a-2],c=t[a-1];for(let d=0;d<a;d+=2){let a=t[d],u=t[d+1],m=h*u-c*a,g=h-a,f=c-u,p=n*f-o*g,x=(l*g-n*m)/p;if((x>=h&&x<=a||x>=a&&x<=h)&&(x>=e&&x<=i||x>=i&&x<=e)){let t=(l*f-o*m)/p;if((t>=c&&t<=u||t>=u&&t<=c)&&(t>=s&&t<=r||t>=r&&t<=s))return!0}h=a,c=u}return!1}getPolygon(t){if(!t)throw Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return -1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=[],this.polygons=[],this.polygonPool=new G(()=>_.newFloatArray(16))}},e$=class{triangulate(t){let e=t.length>>1,s=this.indicesArray;s.length=0;for(let t=0;t<e;t++)s[t]=t;let i=this.isConcaveArray;i.length=0;for(let r=0,a=e;r<a;++r)i[r]=e$.isConcave(r,e,t,s);let r=this.triangles;for(r.length=0;e>3;){let a=e-1,n=0,o=1;for(;;){t:if(!i[n]){let r=s[a]<<1,l=s[n]<<1,h=s[o]<<1,c=t[r],d=t[r+1],u=t[l],m=t[l+1],g=t[h],f=t[h+1];for(let r=(o+1)%e;r!=a;r=(r+1)%e){if(!i[r])continue;let e=s[r]<<1,a=t[e],n=t[e+1];if(e$.positiveArea(g,f,c,d,a,n)&&e$.positiveArea(c,d,u,m,a,n)&&e$.positiveArea(u,m,g,f,a,n))break t}break}if(0==o){do{if(!i[n])break;n--}while(n>0);break}a=n,n=o,o=(o+1)%e}r.push(s[(e+n-1)%e]),r.push(s[n]),r.push(s[(n+1)%e]),s.splice(n,1),i.splice(n,1);let l=(--e+n-1)%e,h=n==e?0:n;i[l]=e$.isConcave(l,e,t,s),i[h]=e$.isConcave(h,e,t,s)}return 3==e&&(r.push(s[2]),r.push(s[0]),r.push(s[1])),r}decompose(t,e){let s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;let r=this.polygonIndicesPool.obtain();r.length=0;let a=this.polygonPool.obtain();a.length=0;let n=-1,o=0;for(let l=0,h=e.length;l<h;l+=3){let h=e[l]<<1,c=e[l+1]<<1,d=e[l+2]<<1,u=t[h],m=t[h+1],g=t[c],f=t[c+1],p=t[d],x=t[d+1],b=!1;if(n==h){let t=a.length-4,e=e$.winding(a[t],a[t+1],a[t+2],a[t+3],p,x),s=e$.winding(p,x,a[0],a[1],a[2],a[3]);e==o&&s==o&&(a.push(p),a.push(x),r.push(d),b=!0)}b||(a.length>0?(s.push(a),i.push(r)):(this.polygonPool.free(a),this.polygonIndicesPool.free(r)),(a=this.polygonPool.obtain()).length=0,a.push(u),a.push(m),a.push(g),a.push(f),a.push(p),a.push(x),(r=this.polygonIndicesPool.obtain()).length=0,r.push(h),r.push(c),r.push(d),o=e$.winding(u,m,g,f,p,x),n=h)}a.length>0&&(s.push(a),i.push(r));for(let t=0,e=s.length;t<e;t++){if(0==(r=i[t]).length)continue;let n=r[0],o=r[r.length-1],l=(a=s[t]).length-4,h=a[l],c=a[l+1],d=a[l+2],u=a[l+3],m=a[0],g=a[1],f=a[2],p=a[3],x=e$.winding(h,c,d,u,m,g);for(let l=0;l<e;l++){if(l==t)continue;let e=i[l];if(3!=e.length)continue;let b=e[0],w=e[1],v=e[2],y=s[l],k=y[y.length-2],C=y[y.length-1];if(b!=n||w!=o)continue;let S=e$.winding(h,c,d,u,k,C),A=e$.winding(k,C,m,g,f,p);S==x&&A==x&&(y.length=0,e.length=0,a.push(k),a.push(C),r.push(v),h=d,c=u,d=k,u=C,l=0)}}for(let t=s.length-1;t>=0;t--)0==(a=s[t]).length&&(s.splice(t,1),this.polygonPool.free(a),r=i[t],i.splice(t,1),this.polygonIndicesPool.free(r));return s}static isConcave(t,e,s,i){let r=i[(e+t-1)%e]<<1,a=i[t]<<1,n=i[(t+1)%e]<<1;return!this.positiveArea(s[r],s[r+1],s[a],s[a+1],s[n],s[n+1])}static positiveArea(t,e,s,i,r,a){return t*(a-i)+s*(e-a)+r*(i-e)>=0}static winding(t,e,s,i,r,a){let n=s-t,o=i-e;return r*o-a*n+n*e-t*o>=0?1:-1}constructor(){this.convexPolygons=[],this.convexPolygonsIndices=[],this.indicesArray=[],this.isConcaveArray=[],this.triangles=[],this.polygonPool=new G(()=>[]),this.polygonIndicesPool=new G(()=>[])}},e0=class{clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let s=e.worldVerticesLength,i=_.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);let r=this.clippingPolygon;e0.makeClockwise(r);let a=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=a.length;t<e;t++){let e=a[t];e0.makeClockwise(e),e.push(e[0]),e.push(e[1])}return a.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,r,a,n,o){let l=this.clipOutput,h=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,u=d.length,m=o?12:8,g=0;h.length=0,c.length=0;t:for(let e=0;e<i;e+=3){let i=s[e]<<1,f=t[i],p=t[i+1],x=r[i],b=r[i+1],w=t[i=s[e+1]<<1],v=t[i+1],y=r[i],k=r[i+1],C=t[i=s[e+2]<<1],S=t[i+1],A=r[i],I=r[i+1];for(let t=0;t<u;t++){let e=h.length;if(this.clip(f,p,w,v,C,S,d[t],l)){let t=l.length;if(0==t)continue;let s=v-S,i=C-w,r=f-C,d=S-p,u=1/(s*r+i*(p-S)),M=t>>1,T=this.clipOutput,E=_.setArraySize(h,e+M*m);for(let l=0;l<t;l+=2){let t=T[l],h=T[l+1];E[e]=t,E[e+1]=h,E[e+2]=a.r,E[e+3]=a.g,E[e+4]=a.b,E[e+5]=a.a;let c=t-C,g=h-S,f=(s*c+i*g)*u,p=(d*c+r*g)*u,w=1-f-p;E[e+6]=x*f+y*p+A*w,E[e+7]=b*f+k*p+I*w,o&&(E[e+8]=n.r,E[e+9]=n.g,E[e+10]=n.b,E[e+11]=n.a),e+=m}e=c.length;let F=_.setArraySize(c,e+3*(M-2));M--;for(let t=1;t<M;t++)F[e]=g,F[e+1]=g+t,F[e+2]=g+t+1,e+=3;g+=M+1}else{let t=_.setArraySize(h,e+3*m);t[e]=f,t[e+1]=p,t[e+2]=a.r,t[e+3]=a.g,t[e+4]=a.b,t[e+5]=a.a,o?(t[e+6]=x,t[e+7]=b,t[e+8]=n.r,t[e+9]=n.g,t[e+10]=n.b,t[e+11]=n.a,t[e+12]=w,t[e+13]=v,t[e+14]=a.r,t[e+15]=a.g,t[e+16]=a.b,t[e+17]=a.a,t[e+18]=y,t[e+19]=k,t[e+20]=n.r,t[e+21]=n.g,t[e+22]=n.b,t[e+23]=n.a,t[e+24]=C,t[e+25]=S,t[e+26]=a.r,t[e+27]=a.g,t[e+28]=a.b,t[e+29]=a.a,t[e+30]=A,t[e+31]=I,t[e+32]=n.r,t[e+33]=n.g,t[e+34]=n.b,t[e+35]=n.a):(t[e+6]=x,t[e+7]=b,t[e+8]=w,t[e+9]=v,t[e+10]=a.r,t[e+11]=a.g,t[e+12]=a.b,t[e+13]=a.a,t[e+14]=y,t[e+15]=k,t[e+16]=C,t[e+17]=S,t[e+18]=a.r,t[e+19]=a.g,t[e+20]=a.b,t[e+21]=a.a,t[e+22]=A,t[e+23]=I),e=c.length;let s=_.setArraySize(c,e+3);s[e]=g,s[e+1]=g+1,s[e+2]=g+2,g+=3;continue t}}}}clip(t,e,s,i,r,a,n,o){let l,h=o,c=!1;n.length%4>=2?(l=o,o=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(s),l.push(i),l.push(r),l.push(a),l.push(t),l.push(e),o.length=0;let d=n.length-4;for(let t=0;;t+=2){let e=n[t],s=n[t+1],i=n[t+2],r=n[t+3],a=e-i,u=s-r,m=l,g=l.length-2,f=o.length;for(let t=0;t<g;t+=2){let n=m[t],l=m[t+1],h=m[t+2],d=m[t+3],g=a*(d-r)-u*(h-i)>0;if(a*(l-r)-u*(n-i)>0){if(g){o.push(h),o.push(d);continue}let t=d-l,a=h-n,c=t*(i-e)-a*(r-s);if(Math.abs(c)>1e-6){let h=(a*(s-l)-t*(e-n))/c;o.push(e+(i-e)*h),o.push(s+(r-s)*h)}else o.push(e),o.push(s)}else if(g){let t=d-l,a=h-n,c=t*(i-e)-a*(r-s);if(Math.abs(c)>1e-6){let h=(a*(s-l)-t*(e-n))/c;o.push(e+(i-e)*h),o.push(s+(r-s)*h)}else o.push(e),o.push(s);o.push(h),o.push(d)}c=!0}if(f==o.length)return h.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==d)break;let p=o;(o=l).length=0,l=p}if(h!=o){h.length=0;for(let t=0,e=o.length-2;t<e;t++)h[t]=o[t]}else h.length=h.length-2;return c}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],r=0,a=0,n=0;for(let t=0,o=s-3;t<o;t+=2)r=e[t],a=e[t+1],n=e[t+2],i+=r*e[t+3]-n*a;if(!(i<0))for(let t=0,i=s-2,r=s>>1;t<r;t+=2){let s=e[t],r=e[t+1],a=i-t;e[t]=e[a],e[t+1]=e[a+1],e[a]=s,e[a+1]=r}}constructor(){this.triangulator=new e$,this.clippingPolygon=[],this.clipOutput=[],this.clippedVertices=[],this.clippedTriangles=[],this.scratch=[],this.clipAttachment=null,this.clippingPolygons=null}},e1=class{readSkeletonData(t){let e=this.scale,s=new ex,i="string"==typeof t?JSON.parse(t):t,r=i.skeleton;if(r&&(s.hash=r.hash,s.version=r.spine,s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height,s.fps=r.fps,s.imagesPath=r.images),i.bones)for(let t=0;t<i.bones.length;t++){let r=i.bones[t],a=null,n=e6(r,"parent",null);n&&(a=s.findBone(n));let o=new ee(s.bones.length,r.name,a);o.length=e6(r,"length",0)*e,o.x=e6(r,"x",0)*e,o.y=e6(r,"y",0)*e,o.rotation=e6(r,"rotation",0),o.scaleX=e6(r,"scaleX",1),o.scaleY=e6(r,"scaleY",1),o.shearX=e6(r,"shearX",0),o.shearY=e6(r,"shearY",0),o.transformMode=_.enumValue(y,e6(r,"transform","Normal")),o.skinRequired=e6(r,"skin",!1);let l=e6(r,"color",null);l&&o.color.setFromString(l),s.bones.push(o)}if(i.slots)for(let t=0;t<i.slots.length;t++){let e=i.slots[t],r=s.findBone(e.bone);if(!r)throw Error("Couldn't find bone ".concat(e.bone," for slot ").concat(e.name));let a=new ev(s.slots.length,e.name,r),n=e6(e,"color",null);n&&a.color.setFromString(n);let o=e6(e,"dark",null);o&&(a.darkColor=V.fromString(o)),a.attachmentName=e6(e,"attachment",null),a.blendMode=_.enumValue(A,e6(e,"blend","normal")),s.slots.push(a)}if(i.ik)for(let t=0;t<i.ik.length;t++){let r=i.ik[t],a=new eh(r.name);a.order=e6(r,"order",0),a.skinRequired=e6(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=s.findBone(r.bones[t]);if(!e)throw Error("Couldn't find bone ".concat(r.bones[t]," for IK constraint ").concat(r.name,"."));a.bones.push(e)}let n=s.findBone(r.target);if(!n)throw Error("Couldn't find target bone ".concat(r.target," for IK constraint ").concat(r.name,"."));a.target=n,a.mix=e6(r,"mix",1),a.softness=e6(r,"softness",0)*e,a.bendDirection=e6(r,"bendPositive",!0)?1:-1,a.compress=e6(r,"compress",!1),a.stretch=e6(r,"stretch",!1),a.uniform=e6(r,"uniform",!1),s.ikConstraints.push(a)}if(i.transform)for(let t=0;t<i.transform.length;t++){let r=i.transform[t],a=new ey(r.name);a.order=e6(r,"order",0),a.skinRequired=e6(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw Error("Couldn't find bone ".concat(e," for transform constraint ").concat(r.name,"."));a.bones.push(i)}let n=r.target,o=s.findBone(n);if(!o)throw Error("Couldn't find target bone ".concat(n," for transform constraint ").concat(r.name,"."));a.target=o,a.local=e6(r,"local",!1),a.relative=e6(r,"relative",!1),a.offsetRotation=e6(r,"rotation",0),a.offsetX=e6(r,"x",0)*e,a.offsetY=e6(r,"y",0)*e,a.offsetScaleX=e6(r,"scaleX",0),a.offsetScaleY=e6(r,"scaleY",0),a.offsetShearY=e6(r,"shearY",0),a.mixRotate=e6(r,"mixRotate",1),a.mixX=e6(r,"mixX",1),a.mixY=e6(r,"mixY",a.mixX),a.mixScaleX=e6(r,"mixScaleX",1),a.mixScaleY=e6(r,"mixScaleY",a.mixScaleX),a.mixShearY=e6(r,"mixShearY",1),s.transformConstraints.push(a)}if(i.path)for(let t=0;t<i.path.length;t++){let r=i.path[t],a=new ec(r.name);a.order=e6(r,"order",0),a.skinRequired=e6(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw Error("Couldn't find bone ".concat(e," for path constraint ").concat(r.name,"."));a.bones.push(i)}let n=r.target,o=s.findSlot(n);if(!o)throw Error("Couldn't find target slot ".concat(n," for path constraint ").concat(r.name,"."));a.target=o,a.positionMode=_.enumValue(k,e6(r,"positionMode","Percent")),a.spacingMode=_.enumValue(C,e6(r,"spacingMode","Length")),a.rotateMode=_.enumValue(S,e6(r,"rotateMode","Tangent")),a.offsetRotation=e6(r,"rotation",0),a.position=e6(r,"position",0),a.positionMode==k.Fixed&&(a.position*=e),a.spacing=e6(r,"spacing",0),(a.spacingMode==C.Length||a.spacingMode==C.Fixed)&&(a.spacing*=e),a.mixRotate=e6(r,"mixRotate",1),a.mixX=e6(r,"mixX",1),a.mixY=e6(r,"mixY",a.mixX),s.pathConstraints.push(a)}if(i.skins)for(let t=0;t<i.skins.length;t++){let e=i.skins[t],r=new ew(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let i=e.bones[t],a=s.findBone(i);if(!a)throw Error("Couldn't find bone ".concat(i," for skin ").concat(e.name,"."));r.bones.push(a)}if(e.ik)for(let t=0;t<e.ik.length;t++){let i=e.ik[t],a=s.findIkConstraint(i);if(!a)throw Error("Couldn't find IK constraint ".concat(i," for skin ").concat(e.name,"."));r.constraints.push(a)}if(e.transform)for(let t=0;t<e.transform.length;t++){let i=e.transform[t],a=s.findTransformConstraint(i);if(!a)throw Error("Couldn't find transform constraint ".concat(i," for skin ").concat(e.name,"."));r.constraints.push(a)}if(e.path)for(let t=0;t<e.path.length;t++){let i=e.path[t],a=s.findPathConstraint(i);if(!a)throw Error("Couldn't find path constraint ".concat(i," for skin ").concat(e.name,"."));r.constraints.push(a)}for(let t in e.attachments){let i=s.findSlot(t);if(!i)throw Error("Couldn't find slot ".concat(t," for skin ").concat(e.name,"."));let a=e.attachments[t];for(let t in a){let e=this.readAttachment(a[t],r,i.index,t,s);e&&r.setAttachment(i.index,t,e)}}s.skins.push(r),"default"==r.name&&(s.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw Error("Skin not found: ".concat(e.skin));let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw Error("Parent mesh not found: ".concat(e.parent));e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let t in i.events){let e=i.events[t],r=new eo(t);r.intValue=e6(e,"int",0),r.floatValue=e6(e,"float",0),r.stringValue=e6(e,"string",""),r.audioPath=e6(e,"audio",null),r.audioPath&&(r.volume=e6(e,"volume",1),r.balance=e6(e,"balance",0)),s.events.push(r)}if(i.animations)for(let t in i.animations){let e=i.animations[t];this.readAnimation(e,t,s)}return s}readAttachment(t,e,s,i,r){let a=this.scale;switch(i=e6(t,"name",i),e6(t,"type","region")){case"region":{let s=e6(t,"path",i),r=this.readSequence(e6(t,"sequence",null)),n=this.attachmentLoader.newRegionAttachment(e,i,s,r);if(!n)return null;n.path=s,n.x=e6(t,"x",0)*a,n.y=e6(t,"y",0)*a,n.scaleX=e6(t,"scaleX",1),n.scaleY=e6(t,"scaleY",1),n.rotation=e6(t,"rotation",0),n.width=t.width*a,n.height=t.height*a,n.sequence=r;let o=e6(t,"color",null);return o&&n.color.setFromString(o),null!=n.region&&n.updateRegion(),n}case"boundingbox":{let s=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!s)return null;this.readVertices(t,s,t.vertexCount<<1);let r=e6(t,"color",null);return r&&s.color.setFromString(r),s}case"mesh":case"linkedmesh":{let r=e6(t,"path",i),n=this.readSequence(e6(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,i,r,n);if(!o)return null;o.path=r;let l=e6(t,"color",null);l&&o.color.setFromString(l),o.width=e6(t,"width",0)*a,o.height=e6(t,"height",0)*a,o.sequence=n;let h=e6(t,"parent",null);if(h)return this.linkedMeshes.push(new e2(o,e6(t,"skin",null),s,h,e6(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=e6(t,"edges",null),o.hullLength=2*e6(t,"hull",0),o}case"path":{let s=this.attachmentLoader.newPathAttachment(e,i);if(!s)return null;s.closed=e6(t,"closed",!1),s.constantSpeed=e6(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,s,r<<1);let n=_.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)n[e]=t.lengths[e]*a;s.lengths=n;let o=e6(t,"color",null);return o&&s.color.setFromString(o),s}case"point":{let s=this.attachmentLoader.newPointAttachment(e,i);if(!s)return null;s.x=e6(t,"x",0)*a,s.y=e6(t,"y",0)*a,s.rotation=e6(t,"rotation",0);let r=e6(t,"color",null);return r&&s.color.setFromString(r),s}case"clipping":{let s=this.attachmentLoader.newClippingAttachment(e,i);if(!s)return null;let a=e6(t,"end",null);a&&(s.endSlot=r.findSlot(a));let n=t.vertexCount;this.readVertices(t,s,n<<1);let o=e6(t,"color",null);return o&&s.color.setFromString(o),s}}return null}readSequence(t){if(null==t)return null;let e=new te(e6(t,"count",0));return e.start=e6(t,"start",1),e.digits=e6(t,"digits",0),e.setupIndex=e6(t,"setup",0),e}readVertices(t,e,s){let i=this.scale;e.worldVerticesLength=s;let r=t.vertices;if(s==r.length){let t=_.toFloatArray(r);if(1!=i)for(let e=0,s=r.length;e<s;e++)t[e]*=i;e.vertices=t;return}let a=[],n=[];for(let t=0,e=r.length;t<e;){let e=r[t++];n.push(e);for(let s=t+4*e;t<s;t+=4)n.push(r[t]),a.push(r[t+1]*i),a.push(r[t+2]*i),a.push(r[t+3])}e.bones=n,e.vertices=_.toFloatArray(a)}readAnimation(t,e,s){let i=this.scale,r=[];if(t.slots)for(let e in t.slots){let i=t.slots[e],a=s.findSlot(e);if(!a)throw Error("Slot not found: "+e);let n=a.index;for(let t in i){let e=i[t];if(!e)continue;let s=e.length;if("attachment"==t){let t=new tS(s,n);for(let i=0;i<s;i++){let s=e[i];t.setFrame(i,e6(s,"time",0),e6(s,"name",null))}r.push(t)}else if("rgba"==t){let t=new tw(s,s<<2,n),i=e[0],a=e6(i,"time",0),o=V.fromString(i.color);for(let s=0,r=0;;s++){t.setFrame(s,a,o.r,o.g,o.b,o.a);let n=e[s+1];if(!n){t.shrink(r);break}let l=e6(n,"time",0),h=V.fromString(n.color),c=i.curve;c&&(r=e4(c,t,r,s,0,a,l,o.r,h.r,1),r=e4(c,t,r,s,1,a,l,o.g,h.g,1),r=e4(c,t,r,s,2,a,l,o.b,h.b,1),r=e4(c,t,r,s,3,a,l,o.a,h.a,1)),a=l,o=h,i=n}r.push(t)}else if("rgb"==t){let t=new tv(s,3*s,n),i=e[0],a=e6(i,"time",0),o=V.fromString(i.color);for(let s=0,r=0;;s++){t.setFrame(s,a,o.r,o.g,o.b);let n=e[s+1];if(!n){t.shrink(r);break}let l=e6(n,"time",0),h=V.fromString(n.color),c=i.curve;c&&(r=e4(c,t,r,s,0,a,l,o.r,h.r,1),r=e4(c,t,r,s,1,a,l,o.g,h.g,1),r=e4(c,t,r,s,2,a,l,o.b,h.b,1)),a=l,o=h,i=n}r.push(t)}else if("alpha"==t)r.push(e3(e,new ty(s,s,n),0,1));else if("rgba2"==t){let t=new tk(s,7*s,n),i=e[0],a=e6(i,"time",0),o=V.fromString(i.light),l=V.fromString(i.dark);for(let s=0,r=0;;s++){t.setFrame(s,a,o.r,o.g,o.b,o.a,l.r,l.g,l.b);let n=e[s+1];if(!n){t.shrink(r);break}let h=e6(n,"time",0),c=V.fromString(n.light),d=V.fromString(n.dark),u=i.curve;u&&(r=e4(u,t,r,s,0,a,h,o.r,c.r,1),r=e4(u,t,r,s,1,a,h,o.g,c.g,1),r=e4(u,t,r,s,2,a,h,o.b,c.b,1),r=e4(u,t,r,s,3,a,h,o.a,c.a,1),r=e4(u,t,r,s,4,a,h,l.r,d.r,1),r=e4(u,t,r,s,5,a,h,l.g,d.g,1),r=e4(u,t,r,s,6,a,h,l.b,d.b,1)),a=h,o=c,l=d,i=n}r.push(t)}else if("rgb2"==t){let t=new tC(s,6*s,n),i=e[0],a=e6(i,"time",0),o=V.fromString(i.light),l=V.fromString(i.dark);for(let s=0,r=0;;s++){t.setFrame(s,a,o.r,o.g,o.b,l.r,l.g,l.b);let n=e[s+1];if(!n){t.shrink(r);break}let h=e6(n,"time",0),c=V.fromString(n.light),d=V.fromString(n.dark),u=i.curve;u&&(r=e4(u,t,r,s,0,a,h,o.r,c.r,1),r=e4(u,t,r,s,1,a,h,o.g,c.g,1),r=e4(u,t,r,s,2,a,h,o.b,c.b,1),r=e4(u,t,r,s,3,a,h,l.r,d.r,1),r=e4(u,t,r,s,4,a,h,l.g,d.g,1),r=e4(u,t,r,s,5,a,h,l.b,d.b,1)),a=h,o=c,l=d,i=n}r.push(t)}}}if(t.bones)for(let e in t.bones){let a=t.bones[e],n=s.findBone(e);if(!n)throw Error("Bone not found: "+e);let o=n.index;for(let t in a){let e=a[t],s=e.length;if(0!=s){if("rotate"===t)r.push(e3(e,new th(s,s,o),0,1));else if("translate"===t){let t=new tc(s,s<<1,o);r.push(e5(e,t,"x","y",0,i))}else if("translatex"===t){let t=new td(s,s,o);r.push(e3(e,t,0,i))}else if("translatey"===t){let t=new tu(s,s,o);r.push(e3(e,t,0,i))}else if("scale"===t){let t=new tm(s,s<<1,o);r.push(e5(e,t,"x","y",1,1))}else if("scalex"===t){let t=new tg(s,s,o);r.push(e3(e,t,1,1))}else if("scaley"===t){let t=new tf(s,s,o);r.push(e3(e,t,1,1))}else if("shear"===t){let t=new tp(s,s<<1,o);r.push(e5(e,t,"x","y",0,1))}else if("shearx"===t){let t=new tx(s,s,o);r.push(e3(e,t,0,1))}else if("sheary"===t){let t=new tb(s,s,o);r.push(e3(e,t,0,1))}}}}if(t.ik)for(let e in t.ik){let a=t.ik[e],n=a[0];if(!n)continue;let o=s.findIkConstraint(e);if(!o)throw Error("IK Constraint not found: "+e);let l=s.ikConstraints.indexOf(o),h=new tF(a.length,a.length<<1,l),c=e6(n,"time",0),d=e6(n,"mix",1),u=e6(n,"softness",0)*i;for(let t=0,e=0;;t++){h.setFrame(t,c,d,u,e6(n,"bendPositive",!0)?1:-1,e6(n,"compress",!1),e6(n,"stretch",!1));let s=a[t+1];if(!s){h.shrink(e);break}let r=e6(s,"time",0),o=e6(s,"mix",1),l=e6(s,"softness",0)*i,m=n.curve;m&&(e=e4(m,h,e,t,0,c,r,d,o,1),e=e4(m,h,e,t,1,c,r,u,l,i)),c=r,d=o,u=l,n=s}r.push(h)}if(t.transform)for(let e in t.transform){let i=t.transform[e],a=i[0];if(!a)continue;let n=s.findTransformConstraint(e);if(!n)throw Error("Transform constraint not found: "+e);let o=s.transformConstraints.indexOf(n),l=new tY(i.length,6*i.length,o),h=e6(a,"time",0),c=e6(a,"mixRotate",1),d=e6(a,"mixX",1),u=e6(a,"mixY",d),m=e6(a,"mixScaleX",1),g=e6(a,"mixScaleY",m),f=e6(a,"mixShearY",1);for(let t=0,e=0;;t++){l.setFrame(t,h,c,d,u,m,g,f);let s=i[t+1];if(!s){l.shrink(e);break}let r=e6(s,"time",0),n=e6(s,"mixRotate",1),o=e6(s,"mixX",1),p=e6(s,"mixY",o),x=e6(s,"mixScaleX",1),b=e6(s,"mixScaleY",x),w=e6(s,"mixShearY",1),v=a.curve;v&&(e=e4(v,l,e,t,0,h,r,c,n,1),e=e4(v,l,e,t,1,h,r,d,o,1),e=e4(v,l,e,t,2,h,r,u,p,1),e=e4(v,l,e,t,3,h,r,m,x,1),e=e4(v,l,e,t,4,h,r,g,b,1),e=e4(v,l,e,t,5,h,r,f,w,1)),h=r,c=n,d=o,u=p,m=x,g=b,m=x,a=s}r.push(l)}if(t.path)for(let e in t.path){let a=t.path[e],n=s.findPathConstraint(e);if(!n)throw Error("Path constraint not found: "+e);let o=s.pathConstraints.indexOf(n);for(let t in a){let e=a[t],s=e[0];if(!s)continue;let l=e.length;if("position"===t){let t=new tR(l,l,o);r.push(e3(e,t,0,n.positionMode==k.Fixed?i:1))}else if("spacing"===t){let t=new tX(l,l,o);r.push(e3(e,t,0,n.spacingMode==C.Length||n.spacingMode==C.Fixed?i:1))}else if("mix"===t){let t=new tL(l,3*l,o),i=e6(s,"time",0),a=e6(s,"mixRotate",1),n=e6(s,"mixX",1),h=e6(s,"mixY",n);for(let r=0,o=0;;r++){t.setFrame(r,i,a,n,h);let l=e[r+1];if(!l){t.shrink(o);break}let c=e6(l,"time",0),d=e6(l,"mixRotate",1),u=e6(l,"mixX",1),m=e6(l,"mixY",u),g=s.curve;g&&(o=e4(g,t,o,r,0,i,c,a,d,1),o=e4(g,t,o,r,1,i,c,n,u,1),o=e4(g,t,o,r,2,i,c,h,m,1)),i=c,a=d,n=u,h=m,s=l}r.push(t)}}}if(t.attachments)for(let e in t.attachments){let a=t.attachments[e],n=s.findSkin(e);if(!n)throw Error("Skin not found: "+e);for(let t in a){let e=a[t],o=s.findSlot(t);if(!o)throw Error("Slot not found: "+t);let l=o.index;for(let t in e){let s=e[t],a=n.getAttachment(l,t);for(let t in s){let e=s[t],n=e[0];if(n){if("deform"==t){let t=a.bones,s=a.vertices,o=t?s.length/3*2:s.length,h=new tA(e.length,e.length,l,a),c=e6(n,"time",0);for(let r=0,a=0;;r++){let l;let d=e6(n,"vertices",null);if(d){l=_.newFloatArray(o);let e=e6(n,"offset",0);if(_.arrayCopy(d,0,l,e,d.length),1!=i)for(let t=e,s=t+d.length;t<s;t++)l[t]*=i;if(!t)for(let t=0;t<o;t++)l[t]+=s[t]}else l=t?_.newFloatArray(o):s;h.setFrame(r,c,l);let u=e[r+1];if(!u){h.shrink(a);break}let m=e6(u,"time",0),g=n.curve;g&&(a=e4(g,h,a,r,0,c,m,0,1,1)),c=m,n=u}r.push(h)}else if("sequence"==t){let t=new tP(e.length,l,a),s=0;for(let i=0;i<e.length;i++){let r=e6(n,"delay",s),a=e6(n,"time",0),o=f[e6(n,"mode","hold")],l=e6(n,"index",0);t.setFrame(i,a,o,l,r),s=r,n=e[i+1]}r.push(t)}}}}}}if(t.drawOrder){let e=new tE(t.drawOrder.length),i=s.slots.length,a=0;for(let r=0;r<t.drawOrder.length;r++,a++){let n=t.drawOrder[r],o=null,l=e6(n,"offsets",null);if(l){o=_.newArray(i,-1);let t=_.newArray(i-l.length,0),e=0,r=0;for(let i=0;i<l.length;i++){let a=l[i],n=s.findSlot(a.slot);if(!n)throw Error("Slot not found: "+n);let h=n.index;for(;e!=h;)t[r++]=e++;o[e+a.offset]=e++}for(;e<i;)t[r++]=e++;for(let e=i-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(a,e6(n,"time",0),o)}r.push(e)}if(t.events){let e=new tM(t.events.length),i=0;for(let r=0;r<t.events.length;r++,i++){let a=t.events[r],n=s.findEvent(a.name);if(!n)throw Error("Event not found: "+a.name);let o=new en(_.toSinglePrecision(e6(a,"time",0)),n);o.intValue=e6(a,"int",n.intValue),o.floatValue=e6(a,"float",n.floatValue),o.stringValue=e6(a,"string",n.stringValue),o.data.audioPath&&(o.volume=e6(a,"volume",1),o.balance=e6(a,"balance",0)),e.setFrame(i,o)}r.push(e)}let a=0;for(let t=0,e=r.length;t<e;t++)a=Math.max(a,r[t].getDuration());s.animations.push(new ti(e,r,a))}constructor(t){this.scale=1,this.linkedMeshes=[],this.attachmentLoader=t}},e2=class{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}};function e3(t,e,s,i){let r=t[0],a=e6(r,"time",0),n=e6(r,"value",s)*i,o=0;for(let l=0;;l++){e.setFrame(l,a,n);let h=t[l+1];if(!h)return e.shrink(o),e;let c=e6(h,"time",0),d=e6(h,"value",s)*i;r.curve&&(o=e4(r.curve,e,o,l,0,a,c,n,d,i)),a=c,n=d,r=h}}function e5(t,e,s,i,r,a){let n=t[0],o=e6(n,"time",0),l=e6(n,s,r)*a,h=e6(n,i,r)*a,c=0;for(let d=0;;d++){e.setFrame(d,o,l,h);let u=t[d+1];if(!u)return e.shrink(c),e;let m=e6(u,"time",0),g=e6(u,s,r)*a,f=e6(u,i,r)*a,p=n.curve;p&&(c=e4(p,e,c,d,0,o,m,l,g,a),c=e4(p,e,c,d,1,o,m,h,f,a)),o=m,l=g,h=f,n=u}}function e4(t,e,s,i,r,a,n,o,l,h){if("stepped"==t)return e.setStepped(i),s;let c=r<<2,d=t[c],u=t[c+1]*h,m=t[c+2],g=t[c+3]*h;return e.setBezier(s,i,r,a,o,d,u,m,g,n,l),s+1}function e6(t,e,s){return void 0!==t[e]?t[e]:s}(()=>{if(void 0===Math.fround){var t;Math.fround=(t=new Float32Array(1),function(e){return t[0]=e,t[0]})}})();var e8=class{addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}constructor(t,e={alpha:"true"}){this.restorables=[],t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?(this.gl=t,this.canvas=this.gl.canvas):(this.gl=t.getContext("webgl2",e)||t.getContext("webgl",e),this.canvas=t,t.addEventListener("webglcontextlost",t=>{t&&t.preventDefault()}),t.addEventListener("webglcontextrestored",t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()}))}},e7=class{static getDestGLBlendMode(t){switch(t){case A.Normal:return 771;case A.Additive:return 1;case A.Multiply:case A.Screen:return 771;default:throw Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case A.Normal:case A.Additive:return e?1:770;case A.Multiply:return 774;case A.Screen:return 1;default:throw Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case A.Normal:case A.Additive:return 1;case A.Multiply:return 771;case A.Screen:return 769;default:throw Error("Unknown blend mode: "+t)}}},e9=class extends tQ{setFilters(t,e){let s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,e9.validateMagFilter(e)),this.useMipMaps=e9.usesMipMaps(t),this.useMipMaps&&s.generateMipmap(s.TEXTURE_2D)}static validateMagFilter(t){switch(t){case w.MipMap:case w.MipMapLinearLinear:case w.MipMapLinearNearest:case w.MipMapNearestLinear:case w.MipMapNearestNearest:return w.Linear;default:return t}}static usesMipMaps(t){switch(t){case w.MipMap:case w.MipMapLinearLinear:case w.MipMapLinearNearest:case w.MipMapNearestLinear:case w.MipMapNearestNearest:return!0;default:return!1}}setWraps(t,e){let s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),e9.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}constructor(t,e,s=!1){super(e),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.context=t instanceof e8?t:new e8(t),this.useMipMaps=s,this.restore(),this.context.addRestorable(this)}},st=e9;st.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;var se=class extends er{constructor(t,e="",s=new ea){super(e=>new st(t,e),e,s)}},ss=class{setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,s){return this.x=t,this.y=e,this.z=s,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[si]+this.y*e[sr]+this.z*e[sa]+e[sn],this.x*e[so]+this.y*e[sl]+this.z*e[sh]+e[sc],this.x*e[sd]+this.y*e[su]+this.z*e[sm]+e[sg])}project(t){let e=t.values,s=1/(this.x*e[sf]+this.y*e[sp]+this.z*e[sx]+e[sb]);return this.set((this.x*e[si]+this.y*e[sr]+this.z*e[sa]+e[sn])*s,(this.x*e[so]+this.y*e[sl]+this.z*e[sh]+e[sc])*s,(this.x*e[sd]+this.y*e[su]+this.z*e[sm]+e[sg])*s)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x,s=t.y-this.y,i=t.z-this.z;return Math.sqrt(e*e+s*s+i*i)}constructor(t=0,e=0,s=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=s}},si=0,sr=4,sa=8,sn=12,so=1,sl=5,sh=9,sc=13,sd=2,su=6,sm=10,sg=14,sf=3,sp=7,sx=11,sb=15,sw=class{set(t){return this.values.set(t),this}transpose(){let t=this.temp,e=this.values;return t[si]=e[si],t[sr]=e[so],t[sa]=e[sd],t[sn]=e[sf],t[so]=e[sr],t[sl]=e[sl],t[sh]=e[su],t[sc]=e[sp],t[sd]=e[sa],t[su]=e[sh],t[sm]=e[sm],t[sg]=e[sx],t[sf]=e[sn],t[sp]=e[sc],t[sx]=e[sg],t[sb]=e[sb],this.set(t)}identity(){let t=this.values;return t[si]=1,t[sr]=0,t[sa]=0,t[sn]=0,t[so]=0,t[sl]=1,t[sh]=0,t[sc]=0,t[sd]=0,t[su]=0,t[sm]=1,t[sg]=0,t[sf]=0,t[sp]=0,t[sx]=0,t[sb]=1,this}invert(){let t=this.values,e=this.temp,s=t[sf]*t[su]*t[sh]*t[sn]-t[sd]*t[sp]*t[sh]*t[sn]-t[sf]*t[sl]*t[sm]*t[sn]+t[so]*t[sp]*t[sm]*t[sn]+t[sd]*t[sl]*t[sx]*t[sn]-t[so]*t[su]*t[sx]*t[sn]-t[sf]*t[su]*t[sa]*t[sc]+t[sd]*t[sp]*t[sa]*t[sc]+t[sf]*t[sr]*t[sm]*t[sc]-t[si]*t[sp]*t[sm]*t[sc]-t[sd]*t[sr]*t[sx]*t[sc]+t[si]*t[su]*t[sx]*t[sc]+t[sf]*t[sl]*t[sa]*t[sg]-t[so]*t[sp]*t[sa]*t[sg]-t[sf]*t[sr]*t[sh]*t[sg]+t[si]*t[sp]*t[sh]*t[sg]+t[so]*t[sr]*t[sx]*t[sg]-t[si]*t[sl]*t[sx]*t[sg]-t[sd]*t[sl]*t[sa]*t[sb]+t[so]*t[su]*t[sa]*t[sb]+t[sd]*t[sr]*t[sh]*t[sb]-t[si]*t[su]*t[sh]*t[sb]-t[so]*t[sr]*t[sm]*t[sb]+t[si]*t[sl]*t[sm]*t[sb];if(0==s)throw Error("non-invertible matrix");let i=1/s;return e[si]=t[sh]*t[sg]*t[sp]-t[sc]*t[sm]*t[sp]+t[sc]*t[su]*t[sx]-t[sl]*t[sg]*t[sx]-t[sh]*t[su]*t[sb]+t[sl]*t[sm]*t[sb],e[sr]=t[sn]*t[sm]*t[sp]-t[sa]*t[sg]*t[sp]-t[sn]*t[su]*t[sx]+t[sr]*t[sg]*t[sx]+t[sa]*t[su]*t[sb]-t[sr]*t[sm]*t[sb],e[sa]=t[sa]*t[sc]*t[sp]-t[sn]*t[sh]*t[sp]+t[sn]*t[sl]*t[sx]-t[sr]*t[sc]*t[sx]-t[sa]*t[sl]*t[sb]+t[sr]*t[sh]*t[sb],e[sn]=t[sn]*t[sh]*t[su]-t[sa]*t[sc]*t[su]-t[sn]*t[sl]*t[sm]+t[sr]*t[sc]*t[sm]+t[sa]*t[sl]*t[sg]-t[sr]*t[sh]*t[sg],e[so]=t[sc]*t[sm]*t[sf]-t[sh]*t[sg]*t[sf]-t[sc]*t[sd]*t[sx]+t[so]*t[sg]*t[sx]+t[sh]*t[sd]*t[sb]-t[so]*t[sm]*t[sb],e[sl]=t[sa]*t[sg]*t[sf]-t[sn]*t[sm]*t[sf]+t[sn]*t[sd]*t[sx]-t[si]*t[sg]*t[sx]-t[sa]*t[sd]*t[sb]+t[si]*t[sm]*t[sb],e[sh]=t[sn]*t[sh]*t[sf]-t[sa]*t[sc]*t[sf]-t[sn]*t[so]*t[sx]+t[si]*t[sc]*t[sx]+t[sa]*t[so]*t[sb]-t[si]*t[sh]*t[sb],e[sc]=t[sa]*t[sc]*t[sd]-t[sn]*t[sh]*t[sd]+t[sn]*t[so]*t[sm]-t[si]*t[sc]*t[sm]-t[sa]*t[so]*t[sg]+t[si]*t[sh]*t[sg],e[sd]=t[sl]*t[sg]*t[sf]-t[sc]*t[su]*t[sf]+t[sc]*t[sd]*t[sp]-t[so]*t[sg]*t[sp]-t[sl]*t[sd]*t[sb]+t[so]*t[su]*t[sb],e[su]=t[sn]*t[su]*t[sf]-t[sr]*t[sg]*t[sf]-t[sn]*t[sd]*t[sp]+t[si]*t[sg]*t[sp]+t[sr]*t[sd]*t[sb]-t[si]*t[su]*t[sb],e[sm]=t[sr]*t[sc]*t[sf]-t[sn]*t[sl]*t[sf]+t[sn]*t[so]*t[sp]-t[si]*t[sc]*t[sp]-t[sr]*t[so]*t[sb]+t[si]*t[sl]*t[sb],e[sg]=t[sn]*t[sl]*t[sd]-t[sr]*t[sc]*t[sd]-t[sn]*t[so]*t[su]+t[si]*t[sc]*t[su]+t[sr]*t[so]*t[sg]-t[si]*t[sl]*t[sg],e[sf]=t[sh]*t[su]*t[sf]-t[sl]*t[sm]*t[sf]-t[sh]*t[sd]*t[sp]+t[so]*t[sm]*t[sp]+t[sl]*t[sd]*t[sx]-t[so]*t[su]*t[sx],e[sp]=t[sr]*t[sm]*t[sf]-t[sa]*t[su]*t[sf]+t[sa]*t[sd]*t[sp]-t[si]*t[sm]*t[sp]-t[sr]*t[sd]*t[sx]+t[si]*t[su]*t[sx],e[sx]=t[sa]*t[sl]*t[sf]-t[sr]*t[sh]*t[sf]-t[sa]*t[so]*t[sp]+t[si]*t[sh]*t[sp]+t[sr]*t[so]*t[sx]-t[si]*t[sl]*t[sx],e[sb]=t[sr]*t[sh]*t[sd]-t[sa]*t[sl]*t[sd]+t[sa]*t[so]*t[su]-t[si]*t[sh]*t[su]-t[sr]*t[so]*t[sm]+t[si]*t[sl]*t[sm],t[si]=e[si]*i,t[sr]=e[sr]*i,t[sa]=e[sa]*i,t[sn]=e[sn]*i,t[so]=e[so]*i,t[sl]=e[sl]*i,t[sh]=e[sh]*i,t[sc]=e[sc]*i,t[sd]=e[sd]*i,t[su]=e[su]*i,t[sm]=e[sm]*i,t[sg]=e[sg]*i,t[sf]=e[sf]*i,t[sp]=e[sp]*i,t[sx]=e[sx]*i,t[sb]=e[sb]*i,this}determinant(){let t=this.values;return t[sf]*t[su]*t[sh]*t[sn]-t[sd]*t[sp]*t[sh]*t[sn]-t[sf]*t[sl]*t[sm]*t[sn]+t[so]*t[sp]*t[sm]*t[sn]+t[sd]*t[sl]*t[sx]*t[sn]-t[so]*t[su]*t[sx]*t[sn]-t[sf]*t[su]*t[sa]*t[sc]+t[sd]*t[sp]*t[sa]*t[sc]+t[sf]*t[sr]*t[sm]*t[sc]-t[si]*t[sp]*t[sm]*t[sc]-t[sd]*t[sr]*t[sx]*t[sc]+t[si]*t[su]*t[sx]*t[sc]+t[sf]*t[sl]*t[sa]*t[sg]-t[so]*t[sp]*t[sa]*t[sg]-t[sf]*t[sr]*t[sh]*t[sg]+t[si]*t[sp]*t[sh]*t[sg]+t[so]*t[sr]*t[sx]*t[sg]-t[si]*t[sl]*t[sx]*t[sg]-t[sd]*t[sl]*t[sa]*t[sb]+t[so]*t[su]*t[sa]*t[sb]+t[sd]*t[sr]*t[sh]*t[sb]-t[si]*t[su]*t[sh]*t[sb]-t[so]*t[sr]*t[sm]*t[sb]+t[si]*t[sl]*t[sm]*t[sb]}translate(t,e,s){let i=this.values;return i[sn]+=t,i[sc]+=e,i[sg]+=s,this}copy(){return new sw().set(this.values)}projection(t,e,s,i){this.identity();let r=1/Math.tan(s*(Math.PI/180)/2),a=this.values;return a[si]=r/i,a[so]=0,a[sd]=0,a[sf]=0,a[sr]=0,a[sl]=r,a[su]=0,a[sp]=0,a[sa]=0,a[sh]=0,a[sm]=(e+t)/(t-e),a[sx]=-1,a[sn]=0,a[sc]=0,a[sg]=2*e*t/(t-e),a[sb]=0,this}ortho2d(t,e,s,i){return this.ortho(t,t+s,e,e+i,0,1)}ortho(t,e,s,i,r,a){this.identity();let n=this.values;return n[si]=2/(e-t),n[so]=0,n[sd]=0,n[sf]=0,n[sr]=0,n[sl]=2/(i-s),n[su]=0,n[sp]=0,n[sa]=0,n[sh]=0,n[sm]=-2/(a-r),n[sx]=0,n[sn]=-(e+t)/(e-t),n[sc]=-(i+s)/(i-s),n[sg]=-(a+r)/(a-r),n[sb]=1,this}multiply(t){let e=this.temp,s=this.values,i=t.values;return e[si]=s[si]*i[si]+s[sr]*i[so]+s[sa]*i[sd]+s[sn]*i[sf],e[sr]=s[si]*i[sr]+s[sr]*i[sl]+s[sa]*i[su]+s[sn]*i[sp],e[sa]=s[si]*i[sa]+s[sr]*i[sh]+s[sa]*i[sm]+s[sn]*i[sx],e[sn]=s[si]*i[sn]+s[sr]*i[sc]+s[sa]*i[sg]+s[sn]*i[sb],e[so]=s[so]*i[si]+s[sl]*i[so]+s[sh]*i[sd]+s[sc]*i[sf],e[sl]=s[so]*i[sr]+s[sl]*i[sl]+s[sh]*i[su]+s[sc]*i[sp],e[sh]=s[so]*i[sa]+s[sl]*i[sh]+s[sh]*i[sm]+s[sc]*i[sx],e[sc]=s[so]*i[sn]+s[sl]*i[sc]+s[sh]*i[sg]+s[sc]*i[sb],e[sd]=s[sd]*i[si]+s[su]*i[so]+s[sm]*i[sd]+s[sg]*i[sf],e[su]=s[sd]*i[sr]+s[su]*i[sl]+s[sm]*i[su]+s[sg]*i[sp],e[sm]=s[sd]*i[sa]+s[su]*i[sh]+s[sm]*i[sm]+s[sg]*i[sx],e[sg]=s[sd]*i[sn]+s[su]*i[sc]+s[sm]*i[sg]+s[sg]*i[sb],e[sf]=s[sf]*i[si]+s[sp]*i[so]+s[sx]*i[sd]+s[sb]*i[sf],e[sp]=s[sf]*i[sr]+s[sp]*i[sl]+s[sx]*i[su]+s[sb]*i[sp],e[sx]=s[sf]*i[sa]+s[sp]*i[sh]+s[sx]*i[sm]+s[sb]*i[sx],e[sb]=s[sf]*i[sn]+s[sp]*i[sc]+s[sx]*i[sg]+s[sb]*i[sb],this.set(this.temp)}multiplyLeft(t){let e=this.temp,s=this.values,i=t.values;return e[si]=i[si]*s[si]+i[sr]*s[so]+i[sa]*s[sd]+i[sn]*s[sf],e[sr]=i[si]*s[sr]+i[sr]*s[sl]+i[sa]*s[su]+i[sn]*s[sp],e[sa]=i[si]*s[sa]+i[sr]*s[sh]+i[sa]*s[sm]+i[sn]*s[sx],e[sn]=i[si]*s[sn]+i[sr]*s[sc]+i[sa]*s[sg]+i[sn]*s[sb],e[so]=i[so]*s[si]+i[sl]*s[so]+i[sh]*s[sd]+i[sc]*s[sf],e[sl]=i[so]*s[sr]+i[sl]*s[sl]+i[sh]*s[su]+i[sc]*s[sp],e[sh]=i[so]*s[sa]+i[sl]*s[sh]+i[sh]*s[sm]+i[sc]*s[sx],e[sc]=i[so]*s[sn]+i[sl]*s[sc]+i[sh]*s[sg]+i[sc]*s[sb],e[sd]=i[sd]*s[si]+i[su]*s[so]+i[sm]*s[sd]+i[sg]*s[sf],e[su]=i[sd]*s[sr]+i[su]*s[sl]+i[sm]*s[su]+i[sg]*s[sp],e[sm]=i[sd]*s[sa]+i[su]*s[sh]+i[sm]*s[sm]+i[sg]*s[sx],e[sg]=i[sd]*s[sn]+i[su]*s[sc]+i[sm]*s[sg]+i[sg]*s[sb],e[sf]=i[sf]*s[si]+i[sp]*s[so]+i[sx]*s[sd]+i[sb]*s[sf],e[sp]=i[sf]*s[sr]+i[sp]*s[sl]+i[sx]*s[su]+i[sb]*s[sp],e[sx]=i[sf]*s[sa]+i[sp]*s[sh]+i[sx]*s[sm]+i[sb]*s[sx],e[sb]=i[sf]*s[sn]+i[sp]*s[sc]+i[sx]*s[sg]+i[sb]*s[sb],this.set(this.temp)}lookAt(t,e,s){let i=sw.xAxis,r=sw.yAxis,a=sw.zAxis;a.setFrom(e).normalize(),i.setFrom(e).normalize(),i.cross(s).normalize(),r.setFrom(i).cross(a).normalize(),this.identity();let n=this.values;return n[si]=i.x,n[sr]=i.y,n[sa]=i.z,n[so]=r.x,n[sl]=r.y,n[sh]=r.z,n[sd]=-a.x,n[su]=-a.y,n[sm]=-a.z,sw.tmpMatrix.identity(),sw.tmpMatrix.values[sn]=-t.x,sw.tmpMatrix.values[sc]=-t.y,sw.tmpMatrix.values[sg]=-t.z,this.multiply(sw.tmpMatrix),this}constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[si]=1,t[sl]=1,t[sm]=1,t[sb]=1}},sv=sw;sv.xAxis=new ss,sv.yAxis=new ss,sv.zAxis=new ss,sv.tmpMatrix=new sw;var sy=class{update(){let t=this.projection,e=this.view,s=this.projectionView,i=this.inverseProjectionView,r=this.zoom,a=this.viewportWidth,n=this.viewportHeight;t.ortho(r*(-a/2),r*(a/2),r*(-n/2),r*(n/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),s.set(t.values),s.multiply(e),i.set(s.values).invert()}screenToWorld(t,e,s){let i=t.x,r=s-t.y-1;return t.x=2*i/e-1,t.y=2*r/s-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,s){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=s*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}constructor(t,e){this.position=new ss(0,0,0),this.direction=new ss(0,0,-1),this.up=new ss(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new sv,this.inverseProjectionView=new sv,this.projection=new sv,this.view=new sv,this.viewportWidth=t,this.viewportHeight=e,this.update()}},sk=class{setupCallbacks(t){let e=e=>{if(e instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=e.clientX-r.left,this.mouseY=e.clientY-r.top,this.buttonDown=!0,this.listeners.map(t=>{t.down&&t.down(this.mouseX,this.mouseY)}),document.addEventListener("mousemove",s),document.addEventListener("mouseup",i)}},s=e=>{if(e instanceof MouseEvent){let s=t.getBoundingClientRect();this.mouseX=e.clientX-s.left,this.mouseY=e.clientY-s.top,this.listeners.map(t=>{this.buttonDown?t.dragged&&t.dragged(this.mouseX,this.mouseY):t.moved&&t.moved(this.mouseX,this.mouseY)})}},i=e=>{if(e instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=e.clientX-r.left,this.mouseY=e.clientY-r.top,this.buttonDown=!1,this.listeners.map(t=>{t.up&&t.up(this.mouseX,this.mouseY)}),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",i)}},r=t=>{t.preventDefault();let e=t.deltaY;t.deltaMode==WheelEvent.DOM_DELTA_LINE&&(e*=8),t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e*=24),this.listeners.map(e=>{e.wheel&&e.wheel(t.deltaY)})};t.addEventListener("mousedown",e,!0),t.addEventListener("mousemove",s,!0),t.addEventListener("mouseup",i,!0),t.addEventListener("wheel",r,!0),t.addEventListener("touchstart",e=>{if(!this.touch0||!this.touch1){let s=e.changedTouches.item(0);if(!s)return;let i=t.getBoundingClientRect(),r=s.clientX-i.left,a=s.clientY-i.top,n=new sC(s.identifier,r,a);if(this.mouseX=r,this.mouseY=a,this.buttonDown=!0,this.touch0){if(!this.touch1){this.touch1=n;let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(t*t+e*e),this.listeners.map(t=>{t.zoom&&t.zoom(this.initialPinchDistance,this.initialPinchDistance)})}}else this.touch0=n,this.listeners.map(t=>{t.down&&t.down(n.x,n.y)})}e.preventDefault()},!1),t.addEventListener("touchmove",e=>{if(this.touch0){var s=e.changedTouches;let a=t.getBoundingClientRect();for(var i=0;i<s.length;i++){var r=s[i];let t=r.clientX-a.left,e=r.clientY-a.top;this.touch0.identifier===r.identifier&&(this.touch0.x=this.mouseX=t,this.touch0.y=this.mouseY=e,this.listeners.map(s=>{s.dragged&&s.dragged(t,e)})),this.touch1&&this.touch1.identifier===r.identifier&&(this.touch1.x=this.mouseX=t,this.touch1.y=this.mouseY=e)}if(this.touch0&&this.touch1){let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x,s=Math.sqrt(t*t+e*e);this.listeners.map(t=>{t.zoom&&t.zoom(this.initialPinchDistance,s)})}}e.preventDefault()},!1);let a=e=>{if(this.touch0){var s=e.changedTouches;let a=t.getBoundingClientRect();for(var i=0;i<s.length;i++){var r=s[i];let t=r.clientX-a.left,e=r.clientY-a.top;if(this.touch0.identifier===r.identifier){if(this.touch0=null,this.mouseX=t,this.mouseY=e,this.listeners.map(s=>{s.up&&s.up(t,e)}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map(t=>{t.down&&t.down(this.touch0.x,this.touch0.y)});else{this.buttonDown=!1;break}}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}e.preventDefault()};t.addEventListener("touchend",a,!1),t.addEventListener("touchcancel",a)}addListener(t){this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=[],this.eventListeners=[],this.element=t,this.setupCallbacks(t)}},sC=class{constructor(t,e,s){this.identifier=t,this.x=e,this.y=s}},sS=class{constructor(t,e){this.canvas=t,this.camera=e;let s=0,i=0,r=0,a=0,n=0,o=0,l=0;new sk(t).addListener({down:(t,h)=>{s=e.position.x,i=e.position.y,r=n=t,a=o=h,l=e.zoom},dragged:(l,h)=>{let c=l-r,d=h-a,u=e.screenToWorld(new ss(0,0),t.clientWidth,t.clientHeight),m=e.screenToWorld(new ss(c,d),t.clientWidth,t.clientHeight).sub(u);e.position.set(s-m.x,i-m.y,0),e.update(),n=l,o=h},wheel:s=>{let i=s/600*e.zoom,r=e.zoom+i;if(r>0){let i=0,a=0;if(s<0)i=n,a=o;else{let e=new ss(t.clientWidth/2+15,t.clientHeight/2),s=n-e.x,r=t.clientHeight-1-o-e.y;i=e.x+s,a=t.clientHeight-1-e.y+r}let l=e.screenToWorld(new ss(i,a),t.clientWidth,t.clientHeight);e.zoom=r,e.update();let h=e.screenToWorld(new ss(i,a),t.clientWidth,t.clientHeight);e.position.add(l.sub(h)),e.update()}},zoom:(t,s)=>{e.zoom=l*(t/s)},up:(t,e)=>{n=t,o=e},moved:(t,e)=>{n=t,o=e}})}},sA=class{getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){let s=this.context.gl,i=s.createShader(t);if(!i)throw Error("Couldn't create shader.");if(s.shaderSource(i,e),s.compileShader(i),!s.getShaderParameter(i,s.COMPILE_STATUS)){let t="Couldn't compile shader: "+s.getShaderInfoLog(i);if(s.deleteShader(i),!s.isContextLost())throw Error(t)}return i}compileProgram(t,e){let s=this.context.gl,i=s.createProgram();if(!i)throw Error("Couldn't compile program.");if(s.attachShader(i,t),s.attachShader(i,e),s.linkProgram(i),!s.getProgramParameter(i,s.LINK_STATUS)){let t="Couldn't compile shader program: "+s.getProgramInfoLog(i);if(s.deleteProgram(i),!s.isContextLost())throw Error(t)}return i}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,s){this.context.gl.uniform2f(this.getUniformLocation(t),e,s)}setUniform3f(t,e,s,i){this.context.gl.uniform3f(this.getUniformLocation(t),e,s,i)}setUniform4f(t,e,s,i,r){this.context.gl.uniform4f(this.getUniformLocation(t),e,s,i,r)}setUniform2x2f(t,e){let s=this.context.gl;this.tmp2x2.set(e),s.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let s=this.context.gl;this.tmp3x3.set(e),s.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let s=this.context.gl;this.tmp4x4.set(e),s.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;if(!this.program)throw Error("Shader not compiled.");let s=e.getUniformLocation(this.program,t);if(!s&&!e.isContextLost())throw Error("Couldn't find location for uniform ".concat(t));return s}getAttributeLocation(t){let e=this.context.gl;if(!this.program)throw Error("Shader not compiled.");let s=e.getAttribLocation(this.program,t);if(-1==s&&!e.isContextLost())throw Error("Couldn't find location for attribute ".concat(t));return s}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e="\nattribute vec4 ".concat(sA.POSITION,";\nattribute vec4 ").concat(sA.COLOR,";\nattribute vec2 ").concat(sA.TEXCOORDS,";\nuniform mat4 ").concat(sA.MVP_MATRIX,";\nvarying vec4 v_color;\nvarying vec2 v_texCoords;\n\nvoid main () {\n	v_color = ").concat(sA.COLOR,";\n	v_texCoords = ").concat(sA.TEXCOORDS,";\n	gl_Position = ").concat(sA.MVP_MATRIX," * ").concat(sA.POSITION,";\n}\n");return new sA(t,e,"\n#ifdef GL_ES\n	#define LOWP lowp\n	precision mediump float;\n#else\n	#define LOWP\n#endif\nvarying LOWP vec4 v_color;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n}\n")}static newTwoColoredTextured(t){let e="\nattribute vec4 ".concat(sA.POSITION,";\nattribute vec4 ").concat(sA.COLOR,";\nattribute vec4 ").concat(sA.COLOR2,";\nattribute vec2 ").concat(sA.TEXCOORDS,";\nuniform mat4 ").concat(sA.MVP_MATRIX,";\nvarying vec4 v_light;\nvarying vec4 v_dark;\nvarying vec2 v_texCoords;\n\nvoid main () {\n	v_light = ").concat(sA.COLOR,";\n	v_dark = ").concat(sA.COLOR2,";\n	v_texCoords = ").concat(sA.TEXCOORDS,";\n	gl_Position = ").concat(sA.MVP_MATRIX," * ").concat(sA.POSITION,";\n}\n");return new sA(t,e,"\n#ifdef GL_ES\n	#define LOWP lowp\n	precision mediump float;\n#else\n	#define LOWP\n#endif\nvarying LOWP vec4 v_light;\nvarying LOWP vec4 v_dark;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n	vec4 texColor = texture2D(u_texture, v_texCoords);\n	gl_FragColor.a = texColor.a * v_light.a;\n	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n}\n")}static newColored(t){let e="\nattribute vec4 ".concat(sA.POSITION,";\nattribute vec4 ").concat(sA.COLOR,";\nuniform mat4 ").concat(sA.MVP_MATRIX,";\nvarying vec4 v_color;\n\nvoid main () {\n	v_color = ").concat(sA.COLOR,";\n	gl_Position = ").concat(sA.MVP_MATRIX," * ").concat(sA.POSITION,";\n}\n");return new sA(t,e,"\n#ifdef GL_ES\n	#define LOWP lowp\n	precision mediump float;\n#else\n	#define LOWP\n#endif\nvarying LOWP vec4 v_color;\n\nvoid main () {\n	gl_FragColor = v_color;\n}\n")}constructor(t,e,s){this.vertexShader=e,this.fragmentShader=s,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=s,this.context=t instanceof e8?t:new e8(t),this.context.addRestorable(this),this.compile()}},sI=sA;sI.MVP_MATRIX="u_projTrans",sI.POSITION="a_position",sI.COLOR="a_color",sI.COLOR2="a_color2",sI.TEXCOORDS="a_texCoords",sI.SAMPLER="u_texture";var sM=class{getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++)t+=this.attributes[e].numElements;return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,s,i){let r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?r.drawElements(e,i,r.UNSIGNED_SHORT,2*s):r.drawArrays(e,s,i),this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let s=0;for(let i=0;i<this.attributes.length;i++){let r=this.attributes[i],a=t.getAttributeLocation(r.name);e.enableVertexAttribArray(a),e.vertexAttribPointer(a,r.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*s),s+=r.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let e=this.context.gl;for(let s=0;s<this.attributes.length;s++){let i=this.attributes[s],r=t.getAttributeLocation(i.name);e.disableVertexAttribArray(r)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}constructor(t,e,s,i){this.attributes=e,this.verticesBuffer=null,this.verticesLength=0,this.dirtyVertices=!1,this.indicesBuffer=null,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t instanceof e8?t:new e8(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(s*this.elementsPerVertex),this.indices=new Uint16Array(i),this.context.addRestorable(this)}},sT=class{constructor(t,e,s){this.name=t,this.type=e,this.numElements=s}},sE=class extends sT{constructor(){super(sI.POSITION,M.Float,2)}},sF=class extends sT{constructor(){super(sI.POSITION,M.Float,3)}},sY=class extends sT{constructor(t=0){super(sI.TEXCOORDS+(0==t?"":t),M.Float,2)}},sR=class extends sT{constructor(){super(sI.COLOR,M.Float,4)}},sX=class extends sT{constructor(){super(sI.COLOR2,M.Float,4)}};(u=M||(M={}))[u.Float=0]="Float";var sL=class{begin(t){if(this.isDrawing)throw Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),sL.disableCulling&&(this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE))}setBlendMode(t,e,s){(this.srcColorBlend!=t||this.srcAlphaBlend!=e||this.dstBlend!=s)&&(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,s,e,s)))}draw(t,e,s){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+s.length>this.mesh.getIndices().length)&&this.flush();let i=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let r=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<s.length;t++,e++)r[t]=s[e]+i;this.indicesLength+=s.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw Error("No texture set.");if(!this.shader)throw Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,sL.globalDrawCalls++}}end(){if(!this.isDrawing)throw Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND),sL.disableCulling&&this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=sL.globalDrawCalls;return sL.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}constructor(t,e=!0,s=10920){if(this.drawCalls=0,this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.cullWasEnabled=!1,s>10920)throw Error("Can't have more than 10920 triangles per batch: "+s);this.context=t instanceof e8?t:new e8(t);let i=e?[new sE,new sR,new sY,new sX]:[new sE,new sR,new sY];this.mesh=new sM(t,i,s,3*s);let r=this.context.gl;this.srcColorBlend=r.SRC_ALPHA,this.srcAlphaBlend=r.ONE,this.dstBlend=r.ONE_MINUS_SRC_ALPHA}},sB=sL;sB.disableCulling=!1,sB.globalDrawCalls=0;var sP=class{begin(t){if(this.isDrawing)throw Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,s){this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,s,e,s))}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,s,i){this.color.set(t,e,s,i)}point(t,e,s){this.check(T.Point,1),s||(s=this.color),this.vertex(t,e,s)}line(t,e,s,i,r){this.check(T.Line,2),this.mesh.getVertices(),this.vertexIndex,r||(r=this.color),this.vertex(t,e,r),this.vertex(s,i,r)}triangle(t,e,s,i,r,a,n,o,l,h){this.check(t?T.Filled:T.Line,3),this.mesh.getVertices(),this.vertexIndex,o||(o=this.color),l||(l=this.color),h||(h=this.color),t?(this.vertex(e,s,o),this.vertex(i,r,l),this.vertex(a,n,h)):(this.vertex(e,s,o),this.vertex(i,r,l),this.vertex(i,r,o),this.vertex(a,n,l),this.vertex(a,n,o),this.vertex(e,s,l))}quad(t,e,s,i,r,a,n,o,l,h,c,d,u){this.check(t?T.Filled:T.Line,3),this.mesh.getVertices(),this.vertexIndex,h||(h=this.color),c||(c=this.color),d||(d=this.color),u||(u=this.color),t?(this.vertex(e,s,h),this.vertex(i,r,c),this.vertex(a,n,d),this.vertex(a,n,d),this.vertex(o,l,u),this.vertex(e,s,h)):(this.vertex(e,s,h),this.vertex(i,r,c),this.vertex(i,r,c),this.vertex(a,n,d),this.vertex(a,n,d),this.vertex(o,l,u),this.vertex(o,l,u),this.vertex(e,s,h))}rect(t,e,s,i,r,a){this.quad(t,e,s,e+i,s,e+i,s+r,e,s+r,a,a,a,a)}rectLine(t,e,s,i,r,a,n){this.check(t?T.Filled:T.Line,8),n||(n=this.color);let o=this.tmp.set(r-s,e-i);o.normalize(),a*=.5;let l=o.x*a,h=o.y*a;t?(this.vertex(e+l,s+h,n),this.vertex(e-l,s-h,n),this.vertex(i+l,r+h,n),this.vertex(i-l,r-h,n),this.vertex(i+l,r+h,n),this.vertex(e-l,s-h,n)):(this.vertex(e+l,s+h,n),this.vertex(e-l,s-h,n),this.vertex(i+l,r+h,n),this.vertex(i-l,r-h,n),this.vertex(i+l,r+h,n),this.vertex(e+l,s+h,n),this.vertex(i-l,r-h,n),this.vertex(e-l,s-h,n))}x(t,e,s){this.line(t-s,e-s,t+s,e+s),this.line(t-s,e+s,t+s,e-s)}polygon(t,e,s,i){if(s<3)throw Error("Polygon must contain at least 3 vertices");this.check(T.Line,2*s),i||(i=this.color),this.mesh.getVertices(),this.vertexIndex,s<<=1;let r=t[e<<=1],a=t[e+1],n=e+s;for(let o=e,l=e+s-2;o<l;o+=2){let e=t[o],s=t[o+1],l=0,h=0;o+2>=n?(l=r,h=a):(l=t[o+2],h=t[o+3]),this.vertex(e,s,i),this.vertex(l,h,i)}}circle(t,e,s,i,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0==a&&(a=Math.max(1,6*N.cbrt(i)|0)),a<=0)throw Error("segments must be > 0.");r||(r=this.color);let n=2*N.PI/a,o=Math.cos(n),l=Math.sin(n),h=i,c=0;if(t){this.check(T.Filled,3*a+3),a--;for(let t=0;t<a;t++){this.vertex(e,s,r),this.vertex(e+h,s+c,r);let t=h;h=o*h-l*c,c=l*t+o*c,this.vertex(e+h,s+c,r)}this.vertex(e,s,r),this.vertex(e+h,s+c,r)}else{this.check(T.Line,2*a+2);for(let t=0;t<a;t++){this.vertex(e+h,s+c,r);let t=h;h=o*h-l*c,c=l*t+o*c,this.vertex(e+h,s+c,r)}this.vertex(e+h,s+c,r)}h=i,c=0,this.vertex(e+h,s+c,r)}curve(t,e,s,i,r,a,n,o,l,h){this.check(T.Line,2*l+2),h||(h=this.color);let c=1/l,d=c*c,u=c*c*c,m=3*c,g=3*d,f=6*d,p=6*u,x=t-2*s+r,b=e-2*i+a,w=(s-r)*3-t+n,v=(i-a)*3-e+o,y=t,k=e,C=(s-t)*m+x*g+w*u,S=(i-e)*m+b*g+v*u,A=x*f+w*p,I=b*f+v*p,M=w*p,E=v*p;for(;l-- >0;)this.vertex(y,k,h),y+=C,k+=S,C+=A,S+=I,A+=M,I+=E,this.vertex(y,k,h);this.vertex(y,k,h),this.vertex(n,o,h)}vertex(t,e,s){let i=this.vertexIndex,r=this.mesh.getVertices();r[i++]=t,r[i++]=e,r[i++]=s.r,r[i++]=s.g,r[i++]=s.b,r[i++]=s.a,this.vertexIndex=i}end(){if(!this.isDrawing)throw Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}constructor(t,e=10920){if(this.isDrawing=!1,this.shapeType=T.Filled,this.color=new V(1,1,1,1),this.shader=null,this.vertexIndex=0,this.tmp=new H,e>10920)throw Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof e8?t:new e8(t),this.mesh=new sM(t,[new sE,new sR],e,0);let s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA}};(m=T||(T={}))[m.Point=0]="Point",m[m.Line=1]="Line",m[m.Filled=4]="Filled";var sD=class{draw(t,e,s){let i=e.x,r=e.y,a=this.context.gl,n=this.premultipliedAlpha?a.ONE:a.SRC_ALPHA;t.setBlendMode(n,a.ONE,a.ONE_MINUS_SRC_ALPHA);let o=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,i=o.length;e<i;e++){let i=o[e];if(s&&s.indexOf(i.data.name)>-1||!i.parent)continue;let r=i.data.length*i.a+i.worldX,a=i.data.length*i.c+i.worldY;t.rectLine(!0,i.worldX,i.worldY,r,a,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(i,r,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let s=e.slots;for(let e=0,i=s.length;e<i;e++){let i=s[e],r=i.getAttachment();if(r instanceof t9){let e=this.vertices;r.computeWorldVertices(i,e,0,2),t.line(e[0],e[1],e[2],e[3]),t.line(e[2],e[3],e[4],e[5]),t.line(e[4],e[5],e[6],e[7]),t.line(e[6],e[7],e[0],e[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let s=e.slots;for(let e=0,i=s.length;e<i;e++){let i=s[e];if(!i.bone.active)continue;let r=i.getAttachment();if(!(r instanceof t4))continue;let a=this.vertices;r.computeWorldVertices(i,0,r.worldVerticesLength,a,0,2);let n=r.triangles,o=r.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,s=n.length;e<s;e+=3){let s=2*n[e],i=2*n[e+1],r=2*n[e+2];t.triangle(!1,a[s],a[s+1],a[i],a[i+1],a[r],a[r+1])}}if(this.drawMeshHull&&o>0){t.setColor(this.attachmentLineColor);let e=a[(o=(o>>1)*2)-2],s=a[o-1];for(let i=0,r=o;i<r;i+=2){let r=a[i],n=a[i+1];t.line(r,n,e,s),e=r,s=n}}}}if(this.drawBoundingBoxes){let s=this.bounds;s.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,s.minX,s.minY,s.getWidth(),s.getHeight());let i=s.polygons,r=s.boundingBoxes;for(let e=0,s=i.length;e<s;e++){let s=i[e];t.setColor(r[e].color),t.polygon(s,0,s.length)}}if(this.drawPaths){let s=e.slots;for(let e=0,i=s.length;e<i;e++){let i=s[e];if(!i.bone.active)continue;let r=i.getAttachment();if(!(r instanceof t6))continue;let a=r.worldVerticesLength,n=this.temp=_.setArraySize(this.temp,a,0);r.computeWorldVertices(i,0,a,n,0,2);let o=this.pathColor,l=n[2],h=n[3],c=0,d=0;if(r.closed){t.setColor(o);let e=n[0],s=n[1],i=n[a-2],r=n[a-1];c=n[a-4],d=n[a-3],t.curve(l,h,e,s,i,r,c,d,32),t.setColor(sD.LIGHT_GRAY),t.line(l,h,e,s),t.line(c,d,i,r)}a-=4;for(let e=4;e<a;e+=6){let s=n[e],i=n[e+1],r=n[e+2],a=n[e+3];c=n[e+4],d=n[e+5],t.setColor(o),t.curve(l,h,s,i,r,a,c,d,32),t.setColor(sD.LIGHT_GRAY),t.line(l,h,s,i),t.line(c,d,r,a),l=c,h=d}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,i=o.length;e<i;e++){let i=o[e];s&&s.indexOf(i.data.name)>-1||t.circle(!0,i.worldX,i.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let s=e.slots;t.setColor(this.clipColor);for(let e=0,i=s.length;e<i;e++){let i=s[e];if(!i.bone.active)continue;let r=i.getAttachment();if(!(r instanceof tJ))continue;let a=r.worldVerticesLength,n=this.temp=_.setArraySize(this.temp,a,0);r.computeWorldVertices(i,0,a,n,0,2);for(let e=0,s=n.length;e<s;e+=2){let s=n[e],i=n[e+1],r=n[(e+2)%n.length],a=n[(e+3)%n.length];t.line(s,i,r,a)}}}}dispose(){}constructor(t){this.boneLineColor=new V(1,0,0,1),this.boneOriginColor=new V(0,1,0,1),this.attachmentLineColor=new V(0,0,1,.5),this.triangleLineColor=new V(1,.64,0,.5),this.pathColor=new V().setFromString("FF7F00"),this.clipColor=new V(.8,0,0,2),this.aabbColor=new V(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new eQ,this.temp=[],this.vertices=_.newFloatArray(2048),this.context=t instanceof e8?t:new e8(t)}},sV=sD;sV.LIGHT_GRAY=new V(192/255,192/255,192/255,1),sV.GREEN=new V(0,1,0,1);var sO=class{constructor(t,e,s){this.vertices=t,this.numVertices=e,this.numFloats=s}},sN=class{draw(t,e){let s,i,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=this.clipper,h=this.premultipliedAlpha,c=this.twoColorTint,d=null;this.temp,this.temp2,this.temp3,this.temp4;let u=this.renderable,m=e.drawOrder,g=e.color,f=c?12:8,p=!1;-1==a&&(p=!0);for(let e=0,x=m.length;e<x;e++){let x,b=l.isClipping()?2:f,w=m[e];if(!w.bone.active||(a>=0&&a==w.data.index&&(p=!0),!p)){l.clipEndWithSlot(w);continue}n>=0&&n==w.data.index&&(p=!1);let v=w.getAttachment();if(v instanceof t9)u.vertices=this.vertices,u.numVertices=4,u.numFloats=b<<2,v.computeWorldVertices(w,u.vertices,0,b),i=sN.QUAD_TRIANGLES,s=v.uvs,x=v.region.renderObject.page.texture,r=v.color;else if(v instanceof t4)u.vertices=this.vertices,u.numVertices=v.worldVerticesLength>>1,u.numFloats=u.numVertices*b,u.numFloats>u.vertices.length&&(u.vertices=this.vertices=_.newFloatArray(u.numFloats)),v.computeWorldVertices(w,0,v.worldVerticesLength,u.vertices,0,b),i=v.triangles,x=v.region.renderObject.page.texture,s=v.uvs,r=v.color;else if(v instanceof tJ){l.clipStart(w,v);continue}else{l.clipEndWithSlot(w);continue}if(x){let e=w.color,a=this.tempColor;a.r=g.r*e.r*r.r,a.g=g.g*e.g*r.g,a.b=g.b*e.b*r.b,a.a=g.a*e.a*r.a,h&&(a.r*=a.a,a.g*=a.a,a.b*=a.a);let n=this.tempColor2;w.darkColor?(h?(n.r=w.darkColor.r*a.a,n.g=w.darkColor.g*a.a,n.b=w.darkColor.b*a.a):n.setFromColor(w.darkColor),n.a=h?1:0):n.set(0,0,0,1);let m=w.data.blendMode;if(m!=d&&(d=m,t.setBlendMode(e7.getSourceColorGLBlendMode(d,h),e7.getSourceAlphaGLBlendMode(d),e7.getDestGLBlendMode(d))),l.isClipping()){l.clipTriangles(u.vertices,u.numFloats,i,i.length,s,a,n,c);let e=new Float32Array(l.clippedVertices),r=l.clippedTriangles;o&&o(u.vertices,u.numFloats,f),t.draw(x,e,r)}else{let e=u.vertices;if(c)for(let t=2,i=0,r=u.numFloats;t<r;t+=f,i+=2)e[t]=a.r,e[t+1]=a.g,e[t+2]=a.b,e[t+3]=a.a,e[t+4]=s[i],e[t+5]=s[i+1],e[t+6]=n.r,e[t+7]=n.g,e[t+8]=n.b,e[t+9]=n.a;else for(let t=2,i=0,r=u.numFloats;t<r;t+=f,i+=2)e[t]=a.r,e[t+1]=a.g,e[t+2]=a.b,e[t+3]=a.a,e[t+4]=s[i],e[t+5]=s[i+1];let r=u.vertices.subarray(0,u.numFloats);o&&o(u.vertices,u.numFloats,f),t.draw(x,r,i)}}l.clipEndWithSlot(w)}l.clipEnd()}constructor(t,e=!0){this.premultipliedAlpha=!1,this.tempColor=new V,this.tempColor2=new V,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new sO([],0,0),this.clipper=new e0,this.temp=new H,this.temp2=new H,this.temp3=new V,this.temp4=new V,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=_.newFloatArray(1024*this.vertexSize)}},sU=sN;sU.QUAD_TRIANGLES=[0,1,2,2,3,0];var sW=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],sz=[0,1,2,2,3,0],sq=new V(1,1,1,1),s_=class{dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,s,i,r)}drawSkeletonDebug(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,s)}drawTexture(t,e,s,i,r,a){this.enableRenderer(this.batcher),a||(a=sq);var n=0;sW[n++]=e,sW[n++]=s,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=0,sW[n++]=1,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n++]=0),sW[n++]=e+i,sW[n++]=s,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=1,sW[n++]=1,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n++]=0),sW[n++]=e+i,sW[n++]=s+r,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=1,sW[n++]=0,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n++]=0),sW[n++]=e,sW[n++]=s+r,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=0,sW[n++]=0,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n]=0),this.batcher.draw(t,sW,sz)}drawTextureUV(t,e,s,i,r,a,n,o,l,h){this.enableRenderer(this.batcher),h||(h=sq);var c=0;sW[c++]=e,sW[c++]=s,sW[c++]=h.r,sW[c++]=h.g,sW[c++]=h.b,sW[c++]=h.a,sW[c++]=a,sW[c++]=n,this.twoColorTint&&(sW[c++]=0,sW[c++]=0,sW[c++]=0,sW[c++]=0),sW[c++]=e+i,sW[c++]=s,sW[c++]=h.r,sW[c++]=h.g,sW[c++]=h.b,sW[c++]=h.a,sW[c++]=o,sW[c++]=n,this.twoColorTint&&(sW[c++]=0,sW[c++]=0,sW[c++]=0,sW[c++]=0),sW[c++]=e+i,sW[c++]=s+r,sW[c++]=h.r,sW[c++]=h.g,sW[c++]=h.b,sW[c++]=h.a,sW[c++]=o,sW[c++]=l,this.twoColorTint&&(sW[c++]=0,sW[c++]=0,sW[c++]=0,sW[c++]=0),sW[c++]=e,sW[c++]=s+r,sW[c++]=h.r,sW[c++]=h.g,sW[c++]=h.b,sW[c++]=h.a,sW[c++]=a,sW[c++]=l,this.twoColorTint&&(sW[c++]=0,sW[c++]=0,sW[c++]=0,sW[c]=0),this.batcher.draw(t,sW,sz)}drawTextureRotated(t,e,s,i,r,a,n,o,l){this.enableRenderer(this.batcher),l||(l=sq);let h=e+a,c=s+n,d=-a,u=-n,m=i-a,g=r-n,f=0,p=0,x=0,b=0,w=0,v=0,y=0,k=0;if(0!=o){let t=N.cosDeg(o),e=N.sinDeg(o);f=t*d-e*u,p=e*d+t*u,y=t*d-e*g,k=e*d+t*g,w=t*m-e*g,v=e*m+t*g,x=w+(f-y),b=v+(p-k)}else f=d,p=u,y=d,k=g,w=m,v=g,x=m,b=u;f+=h,p+=c,x+=h,b+=c,w+=h,v+=c,y+=h,k+=c;var C=0;sW[C++]=f,sW[C++]=p,sW[C++]=l.r,sW[C++]=l.g,sW[C++]=l.b,sW[C++]=l.a,sW[C++]=0,sW[C++]=1,this.twoColorTint&&(sW[C++]=0,sW[C++]=0,sW[C++]=0,sW[C++]=0),sW[C++]=x,sW[C++]=b,sW[C++]=l.r,sW[C++]=l.g,sW[C++]=l.b,sW[C++]=l.a,sW[C++]=1,sW[C++]=1,this.twoColorTint&&(sW[C++]=0,sW[C++]=0,sW[C++]=0,sW[C++]=0),sW[C++]=w,sW[C++]=v,sW[C++]=l.r,sW[C++]=l.g,sW[C++]=l.b,sW[C++]=l.a,sW[C++]=1,sW[C++]=0,this.twoColorTint&&(sW[C++]=0,sW[C++]=0,sW[C++]=0,sW[C++]=0),sW[C++]=y,sW[C++]=k,sW[C++]=l.r,sW[C++]=l.g,sW[C++]=l.b,sW[C++]=l.a,sW[C++]=0,sW[C++]=0,this.twoColorTint&&(sW[C++]=0,sW[C++]=0,sW[C++]=0,sW[C]=0),this.batcher.draw(t,sW,sz)}drawRegion(t,e,s,i,r,a){this.enableRenderer(this.batcher),a||(a=sq);var n=0;sW[n++]=e,sW[n++]=s,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=t.u,sW[n++]=t.v2,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n++]=0),sW[n++]=e+i,sW[n++]=s,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=t.u2,sW[n++]=t.v2,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n++]=0),sW[n++]=e+i,sW[n++]=s+r,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=t.u2,sW[n++]=t.v,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n++]=0),sW[n++]=e,sW[n++]=s+r,sW[n++]=a.r,sW[n++]=a.g,sW[n++]=a.b,sW[n++]=a.a,sW[n++]=t.u,sW[n++]=t.v,this.twoColorTint&&(sW[n++]=0,sW[n++]=0,sW[n++]=0,sW[n]=0),this.batcher.draw(t.page.texture,sW,sz)}line(t,e,s,i,r,a){this.enableRenderer(this.shapes),this.shapes.line(t,e,s,i,r)}triangle(t,e,s,i,r,a,n,o,l,h){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,s,i,r,a,n,o,l,h)}quad(t,e,s,i,r,a,n,o,l,h,c,d,u){this.enableRenderer(this.shapes),this.shapes.quad(t,e,s,i,r,a,n,o,l,h,c,d,u)}rect(t,e,s,i,r,a){this.enableRenderer(this.shapes),this.shapes.rect(t,e,s,i,r,a)}rectLine(t,e,s,i,r,a,n){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,s,i,r,a,n)}polygon(t,e,s,i){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,s,i)}circle(t,e,s,i,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.enableRenderer(this.shapes),this.shapes.circle(t,e,s,i,r,a)}curve(t,e,s,i,r,a,n,o,l,h){this.enableRenderer(this.shapes),this.shapes.curve(t,e,s,i,r,a,n,o,l,h)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let e=this.canvas;var s=window.devicePixelRatio||1,i=Math.round(e.clientWidth*s),r=Math.round(e.clientHeight*s);if((e.width!=i||e.height!=r)&&(e.width=i,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),t===E.Expand)this.camera.setViewport(i,r);else if(t===E.Fit){let t=e.width,s=e.height,i=this.camera.viewportWidth,r=this.camera.viewportHeight,a=r/i<s/t?i/t:r/s;this.camera.setViewport(t*a,s*a)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof sB?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(sI.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof sP?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(sI.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}constructor(t,e,s=!0){this.twoColorTint=!1,this.activeRenderer=null,this.canvas=t,this.context=e instanceof e8?e:new e8(e),this.twoColorTint=s,this.camera=new sy(t.width,t.height),this.batcherShader=s?sI.newTwoColoredTextured(this.context):sI.newColoredTextured(this.context),this.batcher=new sB(this.context,s),this.shapesShader=sI.newColored(this.context),this.shapes=new sP(this.context),this.skeletonRenderer=new sU(this.context,s),this.skeletonDebugRenderer=new sV(this.context)}};(g=E||(E={}))[g.Stretch=0]="Stretch",g[g.Expand=1]="Expand",g[g.Fit=2]="Fit";var sj=0,sG=class{dispose(){var t,e;null==(t=this.logo)||t.dispose(),null==(e=this.spinner)||e.dispose()}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(sj<2||t&&this.fadeOut>1)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));let s=this.tempColor,i=this.renderer,r=i.canvas,a=i.context.gl;if(i.resize(E.Expand),i.camera.position.set(r.width/2,r.height/2,0),i.batcher.setBlendMode(a.ONE,a.ONE,a.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;s.setFromColor(this.backgroundColor),e=1-((e=1-this.fadeOut/1)-1)*(e-1),s.a*=e,s.a>0&&(i.camera.zoom=1,i.begin(),i.quad(!0,0,0,r.width,0,r.width,r.height,0,r.height,s,s,s,s),i.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(a.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),a.clear(a.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),s.set(e,e,e,e),this.logo||(this.logo=new st(i.context,Y),this.spinner=new st(i.context,F)),i.camera.zoom=Math.max(1,163/r.height),i.begin(),i.drawTexture(this.logo,(r.width-165)/2,(r.height-108)/2,165,108,s),this.spinner&&i.drawTextureRotated(this.spinner,(r.width-163)/2,(r.height-163)/2,163,163,81.5,81.5,this.angle,s),i.end()}constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new Z,this.backgroundColor=new V(.135,.135,.135,1),this.tempColor=new V,this.renderer=t,this.timeKeeper.maxDelta=9,!Y){let t=navigator.userAgent.indexOf("Safari")>-1,e=()=>sj++;(Y=new Image).src=sZ,t||(Y.crossOrigin="anonymous"),Y.onload=e,(F=new Image).src=sH,t||(F.crossOrigin="anonymous"),F.onload=e}}},sH="data:image/png;base64,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",sZ="data:image/png;base64,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",sK=class{clear(t,e,s,i){this.gl.clearColor(t,e,s,i),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}constructor(t,e){this.time=new Z,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),e.webglConfig&&(e.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new e8(t,e.webglConfig),this.renderer=new s_(t,this.context),this.gl=this.context.gl,this.assetManager=new se(this.context,e.pathPrefix),this.input=new sk(t),e.app.loadAssets&&e.app.loadAssets(this);let s=()=>{requestAnimationFrame(s),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this)},i=()=>{if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),s());return}requestAnimationFrame(i)};requestAnimationFrame(i)}};return L})(),l=s(5081);function h(t){var e,s,a,h;let{skins:u}=t;function m(t,s){let i=document.getElementById("loading");i.classList.remove("hidden"),e.assetManager.loadBinary("/nikke/l2d/".concat(t,".skel")),e.assetManager.loadTextureAtlas("/nikke/l2d/".concat(t,".atlas"));let r=()=>{e.assetManager.isLoadingComplete()?(g("/nikke/l2d/".concat(t,".skel"),"/nikke/l2d/".concat(t,".atlas"),s),i.classList.add("hidden")):requestAnimationFrame(r)};r()}function g(t,i,r){let n,l,h,c=e.assetManager;var d=c.require(i),u=new o.AtlasAttachmentLoader(d),m=new o.SkeletonBinary(u);m.scale=1;var g=m.readSkeletonData(c.require(t));s=new o.Skeleton(g);var f=new o.AnimationStateData(g);if((a=new o.AnimationState(f)).setAnimation(0,s.data.animations[0].name,!0),r){let t=document.body.querySelector("#skins");for(var p of(t.innerHTML="",r)){let e=document.createElement("option");e.value=p.skin,e.innerText=p.name,console.log(e.value),e.selected=p.name==r[0].name,t.appendChild(e)}}let x=document.body.querySelector("#animations");for(var b of(x.innerHTML="",s.data.animations)){let t=document.createElement("option");t.value=t.innerText=b.name,t.selected=b.name==s.data.animations[0].name,x.appendChild(t)}a.update(0),a.apply(s),s.updateWorldTransform(),n=new o.Vector2,l=new o.Vector2,s.getBounds(n,l),e.renderer.resize(o.ResizeMode.Expand),(h=e.renderer.camera).position.x=n.x+l.x/2,h.position.y=n.y+l.y/2,h.zoom=l.x>l.y?l.x/e.htmlCanvas.width*1.25:l.y/e.htmlCanvas.height*1.25,h.update()}return(0,r.useEffect)(()=>{e=new o.SpineCanvas(document.getElementById("canvas"),{webglConfig:{alpha:!0},alpha:!0,preserveDrawingBuffer:!0}),m(u[0].skins[0].skin);let t=()=>{if(e.assetManager.isLoadingComplete()){e.assetManager.hasErrors()||(function(){let t=u[0].skins[0].skin;g("/nikke/l2d/".concat(t,".skel"),"/nikke/l2d/".concat(t,".atlas"),u[0].skins),new o.CameraController(e.htmlCanvas,e.renderer.camera),new c(e.htmlCanvas,t=>(function(t){let s,i;let r=[],a=e.assetManager,n=t=>{for(var e="",s=new Uint8Array(t),i=s.byteLength,r=0;r<i;r++)e+=String.fromCharCode(s[r]);return window.btoa(e)};for(var o of t)o.name.endsWith(".atlas")||o.name.endsWith(".atlas.txt")?(s=o,a.setRawDataURI(o.name,"data:text/plain;,"+o.contentText)):o.name.endsWith(".skel")?(i=o,a.setRawDataURI(o.name,"data:application/octet-stream;base64,"+n(o.contentBinary)),a.loadBinary(o.name)):o.name.endsWith(".json")?(i=o,a.setRawDataURI(o.name,"data:text/plain;,"+o.contentText),a.loadJson(o.name)):o.name.endsWith(".png")&&(r.push(o),a.setRawDataURI(o.name,"data:image/png;base64,"+n(o.contentBinary)));if(!s){alert("Please provide a .atlas or .atlas.txt atlas file.");return}if(0==r.length&&alert("Please provide the atlas page .png file(s)."),!i){alert("Please provide a .skel skeleton file.");return}a.loadTextureAtlas(s.name);let l=()=>{e.assetManager.isLoadingComplete()?g(i.name,s.name,["Custom"]):requestAnimationFrame(l)};l()})(t));let s=document.body.querySelector("#animations");s.onchange=()=>{a.setAnimation(0,s.value,!0)};let i=document.body.querySelector("#skins");i.onchange=t=>{let e=i.value;console.log(e),m(e)},document.getElementById("nikkeList");var r=document.getElementById("record"),n=e.htmlCanvas.captureStream(60),l=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp8"}),h=[];if(l.ondataavailable=function(t){h.push(t.data)},l.onstop=function(t){var e=new Blob(h,{type:"video/mp4"});h=[];var s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.target="_blank",i.download="recording.webm",document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i)},100)},l.ondataavailable=function(t){h.push(t.data)},r){let t=0;r.addEventListener("click",e=>{t?(r.innerHTML="Record",l.stop(),t=0):(r.innerHTML="Stop",l.start(),t=1)})}}(e),function t(){let i,r,n;requestAnimationFrame(t),i=Date.now()/1e3,h||(h=i),r=i-h,a.update(r),a.apply(s),s.updateWorldTransform(),(n=e.renderer).resize(o.ResizeMode.Expand),n.begin(),n.drawSkeleton(s,!0),n.end(),h=i}());return}requestAnimationFrame(t)};requestAnimationFrame(t)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"border elevation1 padding flexList",children:[(0,i.jsx)(function(){let t=u.map(t=>({label:t.name,value:t.skins}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.ZP,{id:"nikkeList",className:"elevation1",options:t,defaultValue:t[0],onChange:t=>(function(t){let e=t.value,s=e[0].skin;m(s,e)})(t),styles:{option:(t,e)=>({background:e.isFocused?"var(--elevation2)":e.isSelected?"var(--elevation3)":"var(--elevation1)",fontSize:"0.8rem",padding:"calc(var(--padding) / 2) var(--padding)"}),control:(t,e)=>({...t,background:"var(--elevation1)"}),singleValue:t=>({...t,width:"120px",color:"white"}),input:t=>({...t,width:"120px",color:"white"}),menu:t=>({...t,background:"var(--elevation1)",margin:"0",padding:"0"})}}),(0,i.jsx)("select",{id:"skins"}),(0,i.jsx)("select",{id:"animations"}),(0,i.jsx)("div",{id:"loading",className:"".concat(n().loading," hidden padding border elevation1"),children:"Loading model..."})]})},{}),(0,i.jsx)(d,{})]}),(0,i.jsx)("div",{className:n().wrapper,children:(0,i.jsx)("canvas",{id:"canvas",className:n().spineWebGL})})]})}s(5846);class c{async onDrop(t){t.preventDefault(),t.stopPropagation();let e=Object.keys(t.dataTransfer.items),s=[];await Promise.all(e.map(async e=>{var i=t.dataTransfer.items[e].getAsFile();if("string"==i.kind)return;let r=await i.arrayBuffer(),a=await i.text();s.push({name:i.name,contentBinary:r,contentText:a})})),this.callback(s)}constructor(t,e){this.callback=e,t.ondrop=t=>this.onDrop(t),t.ondragover=t=>t.preventDefault()}}function d(){return(0,i.jsx)("div",{className:n().recordWrapper,children:(0,i.jsx)("button",{id:"record",children:"Record"})})}},635:function(t,e,s){Promise.resolve().then(s.bind(s,3147))},1638:function(t){t.exports={wrapper:"spineList_wrapper___5xHg",loading:"spineList_loading__BnDTf",nikkeFilter:"spineList_nikkeFilter__xN6_3",nikkeList:"spineList_nikkeList__In3UI",spineWebGL:"spineList_spineWebGL__DhpiP",recordWrapper:"spineList_recordWrapper__fdO4n"}}},function(t){t.O(0,[619,851,667,961,744],function(){return t(t.s=635)}),_N_E=t.O()}]);